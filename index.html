<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="测试游记">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="测试游记">
<meta property="og:locale">
<meta property="article:author" content="测试游记">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/"/>





  <title>测试游记</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">测试游记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%9B%9B)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%9B%9B)/" itemprop="url">测试开发进阶(十四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%9B%9B)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(十四)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-十四"><a href="#测试开发进阶-十四" class="headerlink" title="测试开发进阶(十四)"></a>测试开发进阶(十四)</h1><p><strong>欢迎关注我呀～「测试游记」「zx94_11」</strong></p>
<blockquote>
<p>当网页被加载时，浏览器会创建页面的文档对象模型（Document Object Model）。</p>
</blockquote>
<p><img src="http://www.w3school.com.cn/i/ct_htmltree.gif" alt="DOM HTML"></p>
<p>节点树中的节点彼此拥有层级关系。</p>
<ul>
<li>父（parent）</li>
<li>子（child）</li>
<li>同胞（sibling）</li>
</ul>
<p><strong>父节点拥有子节点。同级的子节点被称为同胞（兄弟或姐妹）</strong></p>
<h3 id="获取页面标签"><a href="#获取页面标签" class="headerlink" title="获取页面标签"></a>获取页面标签</h3><ul>
<li><h5 id="通过-id-找到-HTML-元素（常用）"><a href="#通过-id-找到-HTML-元素（常用）" class="headerlink" title="通过 id 找到 HTML 元素（常用）"></a>通过 id 找到 HTML 元素（常用）</h5><p> <code>document.getElementById()</code></p>
</li>
<li><h5 id="通过标签名找到-HTML-元素"><a href="#通过标签名找到-HTML-元素" class="headerlink" title="通过标签名找到 HTML 元素"></a>通过标签名找到 HTML 元素</h5><p> 获取出来的是列表<code>getElementsByTagName()</code></p>
</li>
<li><h5 id="通过类名找到-HTML-元素（通过类名查找-HTML-元素在-IE-5-6-7-8-中无效。）"><a href="#通过类名找到-HTML-元素（通过类名查找-HTML-元素在-IE-5-6-7-8-中无效。）" class="headerlink" title="通过类名找到 HTML 元素（通过类名查找 HTML 元素在 IE 5,6,7,8 中无效。）"></a>通过类名找到 HTML 元素（通过类名查找 HTML 元素在 IE 5,6,7,8 中无效。）</h5><p> 取出来的是列表<code>getElementsByClassName()</code></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;b1&quot;</span>&gt;</span>box1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;b1&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    box1.style[<span class="string">&#x27;color&#x27;</span>] = <span class="string">&#x27;red&#x27;</span>;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过<code>document.getElementById(&#39;b1&#39;)</code>找到<code>id</code>是<code>b1</code>的对象，然后把它的颜色设为红色</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nqugmtouj30hu0920tk.jpg" alt="红色"></p>
<blockquote>
<p>如果把javascript写在元素的上面，就会<strong>出错</strong>，因为页面上从上往下加载执行的，javascript去页面上获取元素div1的时候，元素div1还没有加载</p>
</blockquote>
<p>解决办法：</p>
<ul>
<li>javascript放到页面最下边</li>
<li>放入window.onload触发的函数里面</li>
</ul>
<p>window.onload函数在页面加载完后才执行</p>
<h3 id="操作标签内容"><a href="#操作标签内容" class="headerlink" title="操作标签内容"></a>操作标签内容</h3><ul>
<li><p>innerHTML 属性</p>
<p> 获取元素内容的最简单方法是使用 <strong>innerHTML</strong> 属性。innerHTML 属性对于获取或替换 HTML 元素的内容很有用。</p>
</li>
<li><p>读取节点文本</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> odv1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> content1 = odv1.innerHTML;</span><br><span class="line">alert(content1)</span><br></pre></td></tr></table></figure></li>
<li><p>写入(修改)节点文本</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> odv1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">odv1.innerHTML = 哈哈哈;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="修改标签属性"><a href="#修改标签属性" class="headerlink" title="修改标签属性"></a>修改标签属性</h3><ul>
<li><p>操作属性的方法</p>
<ol>
<li><p><code>.</code> 操作</p>
</li>
<li><p><code>[ ]</code>操作</p>
</li>
</ol>
</li>
<li><h5 id="读取属性"><a href="#读取属性" class="headerlink" title="读取属性"></a>读取属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;input_user&quot;</span> name=<span class="string">&quot;user&quot;</span> value=<span class="string">&quot;python&quot;</span>&gt;  </span><br><span class="line"><span class="comment">//   读取属性</span></span><br><span class="line"><span class="keyword">var</span> odv1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;input_user&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> idValue = odv1.id;</span><br><span class="line"><span class="keyword">var</span> nameValue = odv1[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">alert(idValue);</span><br><span class="line">alert(nameValue);</span><br></pre></td></tr></table></figure></li>
<li><h5 id="修改属性"><a href="#修改属性" class="headerlink" title="修改属性"></a>修改属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;a1&quot;</span> &gt;「测试游记」&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改属性</span></span><br><span class="line">a1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;a1&#x27;</span>);</span><br><span class="line"><span class="comment">// a1.href = &#x27;http://www.666.com&#x27;;</span></span><br><span class="line">a1[<span class="string">&#x27;href&#x27;</span>] = <span class="string">&#x27;http://www.666.com&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li><h5 id="注意点：操作class属性的时候，要将属性名字改为className"><a href="#注意点：操作class属性的时候，要将属性名字改为className" class="headerlink" title="注意点：操作class属性的时候，要将属性名字改为className"></a>注意点：操作class属性的时候，要将属性名字改为className</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a1.className = <span class="string">&#x27;hied&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="修改css样式"><a href="#修改css样式" class="headerlink" title="修改css样式"></a>修改css样式</h5><ol>
<li><p><code>节点.style.样式名</code></p>
</li>
<li><p><code>节点.style[&#39;样式名&#39;]</code></p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dv1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;dv01&quot;</span> &gt;</span>这个是div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//修改css样式</span></span><br><span class="line"><span class="keyword">var</span> odv1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;dv01&#x27;</span>);</span><br><span class="line"></span><br><span class="line">odv1.style.width = <span class="string">&#x27;300px&#x27;</span>;</span><br><span class="line">odv1.style[<span class="string">&#x27;height&#x27;</span>] = <span class="string">&#x27;200px&#x27;</span>;</span><br><span class="line">odv1.style.background = <span class="string">&#x27;cyan&#x27;</span>;</span><br></pre></td></tr></table></figure>


<h3 id="oclock-事件"><a href="#oclock-事件" class="headerlink" title="oclock 事件"></a>oclock 事件</h3><ul>
<li>onclick事件：点击了该 HTML 元素</li>
<li>事件属性添加 JavaScript 代码：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给div定义一个onclick事件，触发该事件的时候，调用该事件指定的函数</span></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;dv1&quot;</span> id=<span class="string">&quot;dv01&quot;</span> onclick=<span class="string">&quot;tank()&quot;</span>&gt;这个是div1&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个函数，负责弹框</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tank</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="jquery"><a href="#jquery" class="headerlink" title="jquery"></a>jquery</h2><blockquote>
<p>jQuery是目前使用最广泛的javascript函数库。</p>
</blockquote>
<blockquote>
<p>jQuery的版本分为1.x系列和2.x、3.x系列</p>
<p>1.x系列兼容低版本的浏览器</p>
<p>2.x、3.x系列放弃支持低版本浏览器</p>
<p>目前使用最多的是1.x系列的。</p>
</blockquote>
<blockquote>
<p>jquery的口号和愿望 Write Less, Do More（写得少，做得多）</p>
</blockquote>
<ul>
<li><h5 id="官方网站：http-jquery-com"><a href="#官方网站：http-jquery-com" class="headerlink" title="官方网站：http://jquery.com/"></a>官方网站：<a target="_blank" rel="noopener" href="http://jquery.com/">http://jquery.com/</a></h5></li>
<li><h5 id="在线手册：https-www-runoob-com-manual-jquery"><a href="#在线手册：https-www-runoob-com-manual-jquery" class="headerlink" title="在线手册：https://www.runoob.com/manual/jquery/"></a>在线手册：<a target="_blank" rel="noopener" href="https://www.runoob.com/manual/jquery/">https://www.runoob.com/manual/jquery/</a></h5></li>
<li><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4></li>
</ul>
<h5 id="版本下载：https-code-jquery-com"><a href="#版本下载：https-code-jquery-com" class="headerlink" title="版本下载：https://code.jquery.com/"></a>版本下载：<a target="_blank" rel="noopener" href="https://code.jquery.com/">https://code.jquery.com/</a></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="jquery基本的选择器"><a href="#jquery基本的选择器" class="headerlink" title="jquery基本的选择器"></a>jquery基本的选择器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// id选择器</span></span><br><span class="line">$(<span class="string">&#x27;#btn1&#x27;</span>) </span><br><span class="line"><span class="comment">// 类选择器</span></span><br><span class="line">$(<span class="string">&#x27;.box1&#x27;</span>) </span><br><span class="line"><span class="comment">// 标签选择器</span></span><br><span class="line">$(<span class="string">&#x27;li&#x27;</span>) </span><br><span class="line"><span class="comment">// 层级选择器</span></span><br><span class="line">$(<span class="string">&#x27;#ul li span&#x27;</span>) </span><br><span class="line"> <span class="comment">// 属性选择器</span></span><br><span class="line">$(<span class="string">&#x27;input[name=user]&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="选择同胞和父辈元素"><a href="#选择同胞和父辈元素" class="headerlink" title="选择同胞和父辈元素"></a>选择同胞和父辈元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//选择div元素前面紧挨的同辈元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).prev(); </span><br><span class="line"><span class="comment">//选择div元素之前所有的同辈元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).prevAll();</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择div元素后面紧挨的同辈元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).next(); </span><br><span class="line"><span class="comment">//选择div元素后面所有的同辈元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).nextAll(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//选择div的父元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).parent();</span><br><span class="line"><span class="comment">//选择div的所有子元素 </span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).children(); </span><br><span class="line"><span class="comment">//选择div的同级元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).siblings(); </span><br><span class="line"></span><br><span class="line"><span class="comment">//选择div内的class等于cs的元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).find(<span class="string">&#x27;#cs li&#x27;</span>); </span><br></pre></td></tr></table></figure>

<h3 id="选择过滤"><a href="#选择过滤" class="headerlink" title="选择过滤"></a>选择过滤</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择包含p元素的div元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).has(<span class="string">&#x27;p&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//选择class不等于cs的div元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).not(<span class="string">&#x27;.cs&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//选择class等于cs的div元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).filter(<span class="string">&#x27;.cs&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//选择第6个div元素</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).eq(<span class="number">5</span>); </span><br></pre></td></tr></table></figure>

<h3 id="获取元素的索引值"><a href="#获取元素的索引值" class="headerlink" title="获取元素的索引值"></a>获取元素的索引值</h3><p>有时候需要获得匹配元素相对于其同胞元素的索引位置，此时可以用index()方法获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $li = $(<span class="string">&#x27;.list li&#x27;</span>).eq(<span class="number">1</span>);</span><br><span class="line">alert($li.index()); <span class="comment">// 弹出1</span></span><br><span class="line"></span><br><span class="line">&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">1</span>&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">2</span>&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">4</span>&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">5</span>&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">6</span>&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取元素样式"><a href="#获取元素样式" class="headerlink" title="获取元素样式"></a>获取元素样式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取div的样式</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;width&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;color&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="修改元素样式"><a href="#修改元素样式" class="headerlink" title="修改元素样式"></a>修改元素样式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置div的样式</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;width&quot;</span>,<span class="string">&quot;30px&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).css(<span class="string">&quot;height&quot;</span>,<span class="string">&quot;30px&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).css(&#123;<span class="attr">fontSize</span>:<span class="string">&quot;30px&quot;</span>,<span class="attr">color</span>:<span class="string">&quot;red&quot;</span>&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="添加或者移除class属性"><a href="#添加或者移除class属性" class="headerlink" title="添加或者移除class属性"></a>添加或者移除class属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加class属性</span></span><br><span class="line">$(<span class="string">&quot;#div1&quot;</span>).addClass(<span class="string">&quot;cs2&quot;</span>) </span><br><span class="line"><span class="comment">// 移除class属性</span></span><br><span class="line">$(<span class="string">&quot;#div1&quot;</span>).removeClass(<span class="string">&quot;cs2&quot;</span>)  </span><br><span class="line"><span class="comment">// 重复切换样式</span></span><br><span class="line">$(<span class="string">&quot;#div1&quot;</span>).toggleClass(<span class="string">&quot;cs2&quot;</span>) </span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6ntxisii0j30v60u0qf7.jpg" alt="案例"></p>
<p>代码：</p>
<h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#009FCC</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font</span>: bold <span class="number">28px</span>/<span class="number">100px</span> <span class="string">&quot;微软雅黑&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left_menu</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#dddddd</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left_menu</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left_menu</span> <span class="selector-class">.li1</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">font</span>: normal <span class="number">20px</span>/<span class="number">60px</span> <span class="string">&quot;微软雅黑&quot;</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#009FCC</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hied</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">270px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#dddddd</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&#x27;.li1&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">this</span>).next().show().siblings(<span class="string">&#x27;div&#x27;</span>).hide();</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">&#x27;a&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&#x27;https://w.url.cn/s/A1cCbyT&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>「测试游记」- 案例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/main.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>自动化测试平台<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li1&quot;</span>&gt;</span>用例管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hied&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>查看用例<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>添加用例<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>修改用例<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li1&quot;</span>&gt;</span>套件管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hied&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>查看套件<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>添加套件<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>修改套件<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li1&quot;</span>&gt;</span>环境管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hied&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>查看环境<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>添加环境<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>修改环境<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li1&quot;</span>&gt;</span>项目管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hied&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>查看项目<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>添加项目<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>修改项目<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>「测试游记」<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/qrcode.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;「测试游记」&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;height: 200px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81)/" itemprop="url">测试开发进阶(四十)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十"><a href="#测试开发进阶-四十" class="headerlink" title="测试开发进阶(四十)"></a>测试开发进阶(四十)</h1><h2 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $((<span class="number">10</span> + <span class="number">20</span>))</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 30</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> one=25</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> two=12</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $((one+two))</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 37</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9btmw3tu7j30tq076jt7.jpg" alt="1"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $((one&gt;two))</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $((one&lt;two))</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9btnufcbaj30t204wq3t.jpg" alt="2"></p>
<h3 id="expr"><a href="#expr" class="headerlink" title="expr"></a>expr</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $(expr <span class="variable">$one</span>+<span class="variable">$two</span>)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 25+12</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $(expr <span class="variable">$one</span> + <span class="variable">$two</span>)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 37</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9btp8qj2rj30ws04ywfn.jpg" alt="3"></p>
<p>比较大小需要转义</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $(expr <span class="variable">$one</span> \&gt; <span class="variable">$two</span>)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $(expr <span class="variable">$one</span> \&lt; <span class="variable">$two</span>)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9btrpp1ztj30x804ugmn.jpg" alt="4"></p>
<h2 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h2><h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><ul>
<li>条件成立，返回0</li>
<li>条件不成立，返回1</li>
</ul>
<h3 id="逻辑表达式"><a href="#逻辑表达式" class="headerlink" title="逻辑表达式"></a>逻辑表达式</h3><ul>
<li><code>&amp;&amp;</code></li>
<li><code>｜｜</code></li>
</ul>
<h3 id="文件表达式"><a href="#文件表达式" class="headerlink" title="文件表达式"></a>文件表达式</h3><ul>
<li><code>-f</code>判断输入内容是非为一个文件</li>
<li><code>-d</code>判断输入内容是非为一个目录</li>
<li><code>-x</code>判断输入内容是非可执行</li>
<li><code>-e</code>判断文件是非存在</li>
</ul>
<h3 id="数值操作符"><a href="#数值操作符" class="headerlink" title="数值操作符"></a>数值操作符</h3><ul>
<li><code>-eq</code>相等</li>
<li><code>-gt</code>大于</li>
<li><code>-lt</code>小于</li>
<li><code>-ne</code>不等于</li>
</ul>
<h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><ul>
<li><code>==</code></li>
<li><code>!=</code></li>
</ul>
<h3 id="进行判断"><a href="#进行判断" class="headerlink" title="进行判断"></a>进行判断</h3><p><code>test</code>和<code>[]</code>效果一致</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> [ 1 = 2 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;条件不成立&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> [ 1 = 2 ] || <span class="built_in">echo</span> <span class="string">&quot;条件不成立&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">test</span> 1 = 2 &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;条件不成立&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">test</span> 1 = 2 || <span class="built_in">echo</span> <span class="string">&quot;条件不成立&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9bty7dp7fj310604w40m.jpg" alt="5"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9btznv9szj310u03igmu.jpg" alt="6"></p>
<p>查看使用方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> man [ ]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> man <span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Shell脚本"><a href="#Shell脚本" class="headerlink" title="Shell脚本"></a>Shell脚本</h2><h3 id="格式要求"><a href="#格式要求" class="headerlink" title="格式要求"></a>格式要求</h3><ul>
<li>在文件首行指定执行shell的程序</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9buc02o7zj30hi02ujri.jpg" alt="7"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span> </span><br></pre></td></tr></table></figure>

<ul>
<li>后缀建议为<code>.sh</code></li>
<li>执行失败时,使用<code>exit</code>返回非零值，来退出程序</li>
<li>默认锁进4个空格</li>
</ul>
<h3 id="执行脚本"><a href="#执行脚本" class="headerlink" title="执行脚本"></a>执行脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 第一种方式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> bash 1126.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 第二种方式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod +x 1126.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./1126.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 第三种方式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> 1126.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ul>
<li>单行注释：<code>#</code></li>
<li>多行注释</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">要注释的内容</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">pwd</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9bukfgdtxj30io0560t3.jpg" alt="8"></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="格式一"><a href="#格式一" class="headerlink" title="格式一"></a>格式一</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">函数名()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="格式二"><a href="#格式二" class="headerlink" title="格式二"></a>格式二</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">function 函数名</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">要注释的内容</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">hello()</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Hello,Shell&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line">function greet</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Hello,zx&quot;</span><br><span class="line">&#125;</span><br><span class="line">greet</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9buqg8f3dj30i003k3yp.jpg" alt="9"></p>
<h4 id="入参"><a href="#入参" class="headerlink" title="入参"></a>入参</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function greet</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Hello,$1&quot;</span><br><span class="line">    echo &quot;Hello,$2&quot;</span><br><span class="line">    echo &quot;Hello,$3&quot;</span><br><span class="line">&#125;</span><br><span class="line">greet &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9burp7jw4j30hg04yjro.jpg" alt="10"></p>
<p>接收命令行传参</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">greet $1 $2 $3</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9busz55f0j30km06qjrr.jpg" alt="11"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">read -p &quot;请输入你的姓名:&quot; name</span><br><span class="line">read -p &quot;请输入你的年龄:&quot; age</span><br><span class="line">read -p &quot;请输入你的爱好:&quot; </span><br><span class="line">function info</span><br><span class="line">&#123;</span><br><span class="line">    # -e 运行\n换行</span><br><span class="line">    echo -e &quot;你的姓名为:$&#123;name&#125;\n你的年龄为:$&#123;age&#125;\n你的爱好为:$&#123;REPLY&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line">info</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9buye4528j30m806wgmj.jpg" alt="12"></p>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件1 ]</span><br><span class="line">then</span><br><span class="line">    指令1</span><br><span class="line">elif [ 条件2 ]</span><br><span class="line">then</span><br><span class="line">    指令2</span><br><span class="line">else</span><br><span class="line">    指令2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">read -p &quot;输入你的年龄:&quot;</span><br><span class="line"></span><br><span class="line">if [ $&#123;REPLY&#125; -ge 70 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;好好养生&quot;</span><br><span class="line">elif [ $&#123;REPLY&#125; -ge 18 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;好好工作&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;好好学习&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9bv5qkppbj30k208a3zh.jpg" alt="13"></p>
<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><h5 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for 值 in 列表</span><br><span class="line">do</span><br><span class="line">    执行语句</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><strong>例子</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dirs=$(ls /)</span><br><span class="line">for i in $&#123;dirs&#125;</span><br><span class="line">do</span><br><span class="line">    index=$(($&#123;index&#125; + 1))</span><br><span class="line">    echo &quot;$&#123;index&#125;.$&#123;i&#125;&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9bvgl0e69j30ls0lygn6.jpg" alt="15"></p>
<h5 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">max=10</span><br><span class="line">for ((i=1;i&lt;=max;i++))</span><br><span class="line">do</span><br><span class="line">    执行语句</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><strong>例子</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">max=10</span><br><span class="line">for ((i=0;i&lt;=max;i++))</span><br><span class="line">do</span><br><span class="line">    echo &quot;i=$&#123;i&#125;&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9bva4ahzhj30ia0aomxl.jpg" alt="14"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B)/" itemprop="url">测试开发进阶(四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四"><a href="#测试开发进阶-四" class="headerlink" title="测试开发进阶(四)"></a>测试开发进阶(四)</h1><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;----func----&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        print(<span class="string">&#x27;----wrapper----&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">print(func())</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">----func----</span></span><br><span class="line"><span class="string">&lt;function func.&lt;locals&gt;.wrapper at 0x103bb77b8&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">func()()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">----func----</span></span><br><span class="line"><span class="string">----wrapper----</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="满足闭包的条件"><a href="#满足闭包的条件" class="headerlink" title="满足闭包的条件"></a>满足闭包的条件</h3><ul>
<li>函数中嵌套一个函数</li>
<li>外层函数的返回值是内层函数的函数名</li>
<li>内层嵌套函数对外部作用域有一个非全局变量的引用</li>
</ul>
<h3 id="闭包的作用"><a href="#闭包的作用" class="headerlink" title="闭包的作用"></a>闭包的作用</h3><ul>
<li>实现数据锁定</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据锁定</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>():</span></span><br><span class="line">    num = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        print(<span class="string">f&#x27;这里使用了num的值<span class="subst">&#123;num&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">wrapper = func2()</span><br><span class="line">num = <span class="number">10000</span></span><br><span class="line">wrapper() <span class="comment"># 这里使用了num的值1000</span></span><br></pre></td></tr></table></figure>

<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><blockquote>
<p>开放封闭原则：软件实体应该是可扩展，而不可修改的。也就是说，<strong>对扩展是开放的</strong>，而<strong>对修改是封闭的</strong>。</p>
</blockquote>
<p>装饰器的作用：在不更改原功能函数内部代码，并且不改变调用方法的情况下为原函数添加新的功能。</p>
<p><code>@</code>：语法糖</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        print(num)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">decorator(<span class="number">1000</span>)()</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator1</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        print(func)<span class="comment"># 1⃣️</span></span><br><span class="line">        func()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;这是func&#x27;</span>)<span class="comment">#2⃣️</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wra = decorator1(func)</span><br><span class="line">wra()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;function func at 0x1142421e0&gt;1⃣️</span></span><br><span class="line"><span class="string">这是func2⃣️</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator1 </span><span class="comment"># 等价于func1 = decorator1(func1)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;这是func&#x27;</span>)</span><br><span class="line"></span><br><span class="line">func1()</span><br></pre></td></tr></table></figure>

<h3 id="一个作用域的错误"><a href="#一个作用域的错误" class="headerlink" title="一个作用域的错误"></a>一个作用域的错误</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">100</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    print(a)</span><br><span class="line">    a = <span class="number">999</span></span><br><span class="line">func()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;/Users/zhongxin/Desktop/py/zx/04/0812_2.py&quot;, line 14, in &lt;module&gt;</span></span><br><span class="line"><span class="string">    func()</span></span><br><span class="line"><span class="string">  File &quot;/Users/zhongxin/Desktop/py/zx/04/0812_2.py&quot;, line 12, in func</span></span><br><span class="line"><span class="string">    print(a)</span></span><br><span class="line"><span class="string">UnboundLocalError: local variable &#x27;a&#x27; referenced before assignment</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="装饰器常见应用场景"><a href="#装饰器常见应用场景" class="headerlink" title="装饰器常见应用场景"></a>装饰器常见应用场景</h3><ul>
<li>权限校验</li>
<li>计算时间⌛️</li>
<li>环境准备和恢复工作</li>
<li>web自动化用例失败截图</li>
</ul>
<blockquote>
<h4 id="Chrome插件推荐-ChroPath"><a href="#Chrome插件推荐-ChroPath" class="headerlink" title="Chrome插件推荐-ChroPath"></a>Chrome插件推荐-ChroPath</h4></blockquote>
<p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5yg16kusij31b30u01kx.jpg" alt="元素定位"></p>
<h4 id="web自动化用例失败截图"><a href="#web自动化用例失败截图" class="headerlink" title="web自动化用例失败截图"></a>web自动化用例失败截图</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            func()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            browser.save_screenshot(<span class="string">&#x27;eroor.png&#x27;</span>)</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_search</span>():</span></span><br><span class="line">    browser.find_element_by_id(<span class="string">&#x27;kw&#x27;</span>).send_keys(<span class="string">&#x27;selenium&#x27;</span>)</span><br><span class="line">    browser.find_element_by_id(<span class="string">&#x27;su11&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test_search()</span><br></pre></td></tr></table></figure>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5ygdjjnkhj31b30u0nf5.jpg" alt="截图"></p>
<h3 id="带参数的装饰器"><a href="#带参数的装饰器" class="headerlink" title="带参数的装饰器"></a>带参数的装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">        func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_num</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">f&#x27;sum=<span class="subst">&#123;a + b&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_num(<span class="number">11</span>, <span class="number">22</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">sum=33</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="类实现装饰器"><a href="#类实现装饰器" class="headerlink" title="类实现装饰器"></a>类实现装饰器</h2><blockquote>
<p><code>__call__</code>:魔术方法，在对象使用括号调用的时候会触发</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDecorator</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, func</span>):</span></span><br><span class="line">        self.func = func <span class="comment">#⚠️⚠️⚠️</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;这是__call__方法&#x27;</span>)</span><br><span class="line">        self.func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;这是MyDecorator的func方法&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@MyDecorator  </span><span class="comment"># add_num = MyDecorator(add_num)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_num</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">f&#x27;sun=<span class="subst">&#123;a + b&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_num(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h2 id="装饰器装饰类"><a href="#装饰器装饰类" class="headerlink" title="装饰器装饰类"></a>装饰器装饰类</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dceorator</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">        obj = func(*args, **kwargs)</span><br><span class="line">        print(<span class="string">&#x27;222&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@dceorator  </span><span class="comment"># Hero = dceorator(Hero)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;这是Hero的func&#x27;</span>)</span><br><span class="line"></span><br><span class="line">h = Hero()</span><br><span class="line">print(h)</span><br><span class="line">h.func()</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">111</span></span><br><span class="line"><span class="string">222</span></span><br><span class="line"><span class="string">&lt;__main__.Hero object at 0x1033a4390&gt;</span></span><br><span class="line"><span class="string">这是Hero的func</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%83)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%83)/" itemprop="url">测试开发进阶(四十七)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%83)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十七)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十七"><a href="#测试开发进阶-四十七" class="headerlink" title="测试开发进阶(四十七)"></a>测试开发进阶(四十七)</h1><h2 id="日志分析"><a href="#日志分析" class="headerlink" title="日志分析"></a>日志分析</h2><p>使用adb获取日志</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb logcat</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> adb logcat &gt; logcat_1215.log</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x5coc9pyj316y0u0toq.jpg" alt="查看日志"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x5eq03plj31b30u0hdt.jpg" alt="日志"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I/SystemServer(  553): Package Manager</span><br><span class="line">D/SELinuxMMAC(  553): Couldn&#x27;t find install policy /data/security/mac_permissions.xml</span><br><span class="line">W/PackageManager(  553): Unknown permission com.android.smspush.WAPPUSH_MANAGER_BIND in package com.android.phone</span><br></pre></td></tr></table></figure>

<p>其中<code>I</code> <code>D</code> <code>W</code>表示日志优先级，类似于<code>Info</code> <code>Error</code></p>
<ul>
<li><p><code>I</code>:INFO</p>
</li>
<li><p><code>D</code>:DEBUG</p>
</li>
<li><p><code>W</code>:WARING</p>
</li>
<li><p><code>E</code>:ERROR</p>
</li>
</ul>
<p>斜杠后面表示日志的<code>输出模块</code></p>
<p>括号中为当前的<code>进程号</code></p>
<p>冒号后面内容为<code>日志主体</code></p>
<p>拉取<code>traces.txt</code>文件(追踪信息)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb pull /data/anr/traces.txt /Users/zhongxin/Desktop</span></span><br></pre></td></tr></table></figure>

<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><ul>
<li><p><code>fatal exception</code>严重异常</p>
</li>
<li><p><code>ANR IN</code></p>
</li>
</ul>
<h2 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h2><h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>很多时候，手机发热发烫。是因为CPU使用率过高，CPU过于繁忙，会导致手机无法响应用户，整体性能降低，用户体验会很差，也容易引起ANR等一些列问题</p>
<p>CPU使用率分为：<code>用户态</code> <code>系统态</code> <code>空闲态</code></p>
<ul>
<li>用户态：CPU处于用户态执行的时间</li>
<li>系统态：CPU处于系统内核执行的时间</li>
<li>空闲态：CPU处于空闲系统进程执行的时间</li>
</ul>
<p>CPU使用率=CPU执行非系统空闲进程的时间/CPU总的执行时间</p>
<ul>
<li>HZ</li>
</ul>
<p>Linux核心每隔固定周期会发出timer interrupt（IRQ 0），HZ是用来定义每一秒有几次timer interrupt</p>
<ul>
<li>Tick</li>
</ul>
<p>Tick是HZ的倒数，Tick = 1/HZ </p>
<p>即timer interrupt每发生一次中断的时间</p>
<ul>
<li>Jiffies</li>
</ul>
<p>Linux核心变数，是一个unsigned long类型的变量，它被用来记录系统自开机以来，已经过了多少tick。</p>
<p>每发生一次timer interrupt，Jiffies变数会被+1</p>
<p>CPU使用率=(用户态Jiffies + 系统态Jiffies)/总Jiffies</p>
<h4 id="CPU指标获取"><a href="#CPU指标获取" class="headerlink" title="CPU指标获取"></a>CPU指标获取</h4><h5 id="读取proc文件"><a href="#读取proc文件" class="headerlink" title="读取proc文件"></a>读取proc文件</h5><ul>
<li><code>/proc/stat</code></li>
<li><code>/proc/&lt;pid&gt;/stat</code></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x66z16xbj317f0u0wpn.jpg" alt="proc"></p>
<p><code>cpu0</code>表示CPU核心</p>
<p><code>cpu1</code>表示CPU的第二个核心</p>
<p><code>cpu</code>表示总和</p>
<p>查看模拟器的配置：双核的CPU</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x68mtbkaj310s0u0agv.jpg" alt="配置"></p>
<p>查找对于app的cpu使用情况</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6aht7bej317401at99.jpg" alt="查看PID"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /proc/1757/<span class="built_in">stat</span></span>    </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6b9l8zbj317f0u0n5k.jpg" alt="指定app的情况"></p>
<p>获取当前进程的Jiffies</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /proc/1757/<span class="built_in">stat</span> | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $14,$15&#125;&#x27;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="第三方工具GT-soloPi"><a href="#第三方工具GT-soloPi" class="headerlink" title="第三方工具GT/soloPi"></a>第三方工具GT/soloPi</h5><p><a target="_blank" rel="noopener" href="https://gt.qq.com/download.html">https://gt.qq.com/download.html</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6hl05kzj30u0187aij.jpg" alt="GT"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6kbsedpj30ta18cag2.jpg" alt="GT"></p>
<p>将日志保存到文件中</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6lw4zmmj30my0hkgmd.jpg" alt="保存"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6meq6sqj319i0aswln.jpg" alt="查看日志"></p>
<p>拉取至本地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb pull /sdcard/GT/GW/com.sankuai.meituan/5.5.4/20191215/Pcp0_com.sankuai.meituan_20191215100605.csv /Users/zhongxin/Desktop</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x6p4lj4tj30f4136gpb.jpg" alt="查看cpu数据"></p>
<p>soloPi无法安装到模拟器，暂不演示</p>
<h3 id="启动时间"><a href="#启动时间" class="headerlink" title="启动时间"></a>启动时间</h3><p><code>2-5-8原则</code></p>
<h4 id="App启动方式"><a href="#App启动方式" class="headerlink" title="App启动方式"></a>App启动方式</h4><ul>
<li>冷启动</li>
</ul>
<p>后台没有进程，系统会重新创建一个新的进程分配给该应用</p>
<ul>
<li>热启动</li>
</ul>
<p>后台已有该进程，会从已有进程来启动应用</p>
<hr>
<p>查找包名</p>
<p>android 7.0以下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys activity | find <span class="string">&quot;mFocusedActivity&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>android 8.0以上</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys activity | find <span class="string">&quot;mResumedActivity&quot;</span></span></span><br></pre></td></tr></table></figure>

<hr>
<ol>
<li>查看启动时间</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell am start -W -n com.lemon.lemonban/com.lemon.lemonban.activity.WelcomeActivity</span></span><br></pre></td></tr></table></figure>

<p>程序员角度：获取打开应用到第一帧出现的时间</p>
<ol start="2">
<li>使用soloPi来进行屏幕录制</li>
<li>录屏数帧</li>
</ol>
<p>人工录制后数帧数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell screenrecord --bugreport /sdcard/launch.mp4</span></span><br></pre></td></tr></table></figure>

<h3 id="流量"><a href="#流量" class="headerlink" title="流量"></a>流量</h3><p>手机上网所产生的流量数据。</p>
<h4 id="读取proc文件-1"><a href="#读取proc文件-1" class="headerlink" title="读取proc文件"></a>读取proc文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /proc/net/xt_qtaguid/stats</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x7c82or3j315q0u0gzq.jpg" alt="流量"></p>
<ul>
<li>iface 网络性质 wlan-wifi流量 lo本地流量 rmnet0-3g/2g流量</li>
<li>uid_tag_int 应用UID</li>
<li>cnt_set 应用前后台标识位 1-前台 0-后台</li>
<li>rx_bytes 接收数据</li>
<li>tx_bytes 传输数据</li>
</ul>
<p>查看具体app的流量</p>
<p>使用<code>ps</code>找到对于应用的<code>uid</code>：u0_a35 = 10000+35</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x7d4hu6rj317i01i3zd.jpg" alt="uid"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9x7hadgeqj31de01eweq.jpg" alt="100035"></p>
<p>lo:网络类型</p>
<p>10035:应用UID</p>
<p>0:后台</p>
<p>132324:接收的流量数据消耗</p>
<p>2321:发送的流量数据消耗</p>
<h3 id="电量"><a href="#电量" class="headerlink" title="电量"></a>电量</h3><p>电量影响因素</p>
<ul>
<li>cpu</li>
<li>wakelock(保持唤醒锁)</li>
<li>无线数据(2G/3G/4G)</li>
<li>wiif</li>
<li>蓝牙</li>
<li>传感器</li>
<li>相机</li>
<li>闪光灯</li>
<li>GPS</li>
</ul>
<h4 id="power-profile-xml文件：决定电量测试是否准备的标准文件"><a href="#power-profile-xml文件：决定电量测试是否准备的标准文件" class="headerlink" title="power_profile.xml文件：决定电量测试是否准备的标准文件"></a>power_profile.xml文件：决定电量测试是否准备的标准文件</h4><ol>
<li>手机中的每个组件，如CPU，LCD，GPS，WIFI，BT等，运行时的能耗标准都保存在power_profile.xml中</li>
<li>由于android手机厂商的差异，每个硬件模块耗电信息不同，所以每个厂商都会对power_profile.xml进行定制</li>
<li>android耗电量通过代码估算，没有硬件参与汇报，准确度取决于厂商ROM所提供的power_profile.xml文件，不同厂商的power_profile.xml准确度及源码有差异，因此不同手机，不同版本的数据可能存在较大差异</li>
<li>系统源码PowerProfile读取power_profile.xml，并提供API访问部件电流数值</li>
<li>怎么获取power_profile.xml：反编译framework-res.apk</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%80)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%80)/" itemprop="url">测试开发进阶(四十一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%80)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十一)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十一"><a href="#测试开发进阶-四十一" class="headerlink" title="测试开发进阶(四十一)"></a>测试开发进阶(四十一)</h1><h2 id="校验Shell格式"><a href="#校验Shell格式" class="headerlink" title="校验Shell格式"></a>校验Shell格式</h2><p><a target="_blank" rel="noopener" href="https://www.shellcheck.net/">https://www.shellcheck.net/</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e4yt9j2zj31910u043p.jpg" alt="shellcheck"></p>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><blockquote>
<p>只要满足条件，就一直循环</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while 条件</span><br><span class="line">do</span><br><span class="line">	执行语句</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">a=1</span><br><span class="line">while [ $&#123;a&#125; -lt 5 ]</span><br><span class="line">do </span><br><span class="line">    echo $&#123;a&#125;</span><br><span class="line">    a=$(($&#123;a&#125;+1))</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">case 变量名 in</span><br><span class="line">	值1)</span><br><span class="line">		指令1</span><br><span class="line">	值2)</span><br><span class="line">		指令2</span><br><span class="line">	值3)</span><br><span class="line">		指令3</span><br><span class="line">	*)</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 条件都不满足</span></span><br><span class="line">		指令4</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line"></span><br><span class="line">case &quot;$2&quot; in</span><br><span class="line">    +)</span><br><span class="line">        echo &quot;$1 + $3 = $(($1+$3))&quot;</span><br><span class="line">        ;;</span><br><span class="line">    -)</span><br><span class="line">        echo &quot;$1 - $3 = $(($1-$3))&quot;</span><br><span class="line">        ;;</span><br><span class="line">    \*)</span><br><span class="line">        echo &quot;$1 * $3 = $(($1*$3))&quot;</span><br><span class="line">        ;;</span><br><span class="line">    /)</span><br><span class="line">        echo &quot;$1 / $3 = $(($1/$3))&quot;</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo &quot;$2 不是合法的运算符&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e58tsz9qj30oe0cotae.jpg" alt="case"></p>
<h2 id="文本处理三剑客"><a href="#文本处理三剑客" class="headerlink" title="文本处理三剑客"></a>文本处理三剑客</h2><ul>
<li>grep </li>
<li>sed</li>
<li>awk</li>
</ul>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><ul>
<li><code>grep [option][pattern][file1,file2]</code></li>
<li><code>some command | grep [option][pattern]</code></li>
</ul>
<p><strong>常用选项</strong></p>
<p><code>-i</code>忽略大小写</p>
<p><code>-c</code>只输出匹配行的数量</p>
<p><code>-n</code>显示行号</p>
<p><code>-r</code>递归搜索</p>
<p><code>-E</code>支持拓展正则表达式</p>
<p><code>-w</code>匹配整个单词</p>
<p><code>-l</code>只列出匹配的文件名</p>
<p><code>-F</code>不支持正则，按字符串字面意思进行匹配</p>
<p>最基础用法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep mail passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5q2ssjfj30j602mdg2.jpg" alt="基础用法"></p>
<p>大小写不敏感</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep New passwd</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> grep New passwd -i</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5qk3ot3j30k803kjrt.jpg" alt="大小写敏感"></p>
<p>匹配有多少行符合要求</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep New passwd -i -c</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>显示匹配的内容的行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep New passwd -i -n</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5r5531sj30ng04eq3g.jpg" alt="行"></p>
<p>查找路径下的内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep -r <span class="string">&quot;bash&quot;</span> ./</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5knjcotj30js08o75q.jpg" alt="递归检索">只输出文件名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep -rl <span class="string">&quot;bash&quot;</span> ./</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5lg6da9j30kc07m74x.jpg" alt="递归检索2"></p>
<p>正则匹配</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&quot;s&#123;2&#125;&quot;</span> passwd -E</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5rgplhjj30l603wwez.jpg" alt="正则匹配"></p>
<p>匹配整个单词</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&quot;oo&quot;</span> passwd -w</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&quot;root&quot;</span> passwd -w</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5pcrn89j30l2030dg7.jpg" alt="-w"></p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p><code>/dev/null</code>相当于linux中的回收站</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&quot;<span class="variable">$USER</span>&quot;</span> passwd  &gt; /dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$USER</span>是存在的&quot;</span>|| <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$USER</span>是不存在的&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e5xybpm7j317a050wfh.jpg" alt="查找"></p>
<p>查看是否运行了docker</p>
<p><code>-v</code>：排除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看ps中包含docker的内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps -aux | grep docker</span> </span><br><span class="line">root     24521  0.0  0.0  14224  1088 pts/0    S+   23:21   0:00 grep --color=auto docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 排除grep</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps -aux | grep docker | grep -v grep</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看符合的个数</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps -aux | grep docker | grep -v grep | wc -l</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e60zivn5j310603g74x.jpg" alt="查找ps中"></p>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><ul>
<li>流编辑器,对文本进行逐行处理</li>
<li><code>sed [option] &quot;pattern command&quot; file</code></li>
<li><code>some command | sed [option] &quot;pattern command&quot;</code></li>
</ul>
<p>常用选项<code>[option]</code></p>
<p><code>-n</code>只打印模式匹配的行</p>
<p><code>-f</code>加载存放动作的文件</p>
<p><code>-r</code>支持拓展正则</p>
<p><code>-i</code>直接修改文件</p>
<p>匹配模式<code>pattern</code></p>
<p><code>5</code> 只处理第五行</p>
<p><code>5,10</code>只处理第五行到第十行</p>
<p><code>/pattern1/</code>只处理能匹配到pattern1的行</p>
<p><code>/pattern1/,/pattern2/</code>只处理从匹配到pattern1的行到匹配pattern2的行</p>
<p><code>command</code>命令</p>
<p>查询<code>p</code></p>
<p>新增</p>
<ul>
<li><code>a</code>在匹配行的后面新增</li>
<li><code>i</code>在匹配行前新增</li>
<li><code>r</code>外部文件读入,行后新增</li>
<li><code>w</code>匹配行写入外部文件</li>
</ul>
<p>删除<code>d</code></p>
<p>修改</p>
<ul>
<li><code>s/old/new</code>,只修改匹配行中第一个old</li>
<li><code>s/old/new/g</code>修改匹配行中所有的old</li>
<li><code>s/old/new/ig</code>忽略大小写</li>
</ul>
<hr>
<p><code>p</code>相当于print</p>
<p>匹配的行打印两次</p>
<p>原始行+匹配的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;p&quot;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p>只打印匹配的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&quot;p&quot;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p>匹配<code>mail</code>的那行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;/mail/ p&quot;</span> passwd -n</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e68o8tyej30mq02omxe.jpg" alt="image-20191128232924959"></p>
<p>匹配以s开头的内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&quot;/^s/ p&quot;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e6eut18zj30z007s0ui.jpg" alt="正则匹配"></p>
<p>匹配mail开头的行到s开头的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&quot;/^mail/,/^s/ p&quot;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e6idvri2j30wq0aimze.jpg" alt="匹配"></p>
<p>在3，4，5行前面添加内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;3,5 i Add content before the current line&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e7m09xbvj31380kuwj8.jpg" alt="添加内容"></p>
<p>正式写入需要加<code>-i</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">&#x27;3,5 i Add content before the current line&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e7musctsj315y0rudlc.jpg" alt="正式写入"></p>
<p>插入文件的内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;testfile&quot;</span> &gt;&gt; a.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">&#x27;/man/,/mail/ r a.txt&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e7ppncvjj31720u079w.jpg" alt="插入文件内容"></p>
<p>匹配内容写入文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">&#x27;/man/,/mail/ w b.txt&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e7qwmx8gj30rm06odgr.jpg" alt="写入文件"></p>
<p>删除内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">&#x27;/test/ d&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p>修改</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;3,6 s/nologin/666/&#x27;</span> passwd |head</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g9e7uslhglj30rc09edhg.jpg" alt="修改"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%89)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%89)/" itemprop="url">测试开发进阶(四十三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%B8%89)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十三)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十三"><a href="#测试开发进阶-四十三" class="headerlink" title="测试开发进阶(四十三)"></a>测试开发进阶(四十三)</h1><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/keyou1/p/11511067.html">史上最全Docker环境安装指南-让安装docker简单到爆</a>:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/keyou1/p/11511067.html">https://www.cnblogs.com/keyou1/p/11511067.html</a></p>
<h2 id="例子-使用Docker运行python程序"><a href="#例子-使用Docker运行python程序" class="headerlink" title="例子:使用Docker运行python程序"></a>例子:使用Docker运行python程序</h2><p>新建一个py文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;print(&#x27;Hello Docker&#x27;)&quot;</span> &gt;&gt; test.py</span></span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -it --name mypy --rm -v <span class="variable">$PWD</span>:/app -w /app python:alpine python test.py</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9jzdmt2rdj31f80pa0z3.jpg" alt="运行"></p>
<h2 id="镜像-amp-容器"><a href="#镜像-amp-容器" class="headerlink" title="镜像&amp;容器"></a>镜像&amp;容器</h2><h3 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h3><ul>
<li>Docker Hub查找现有镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker search xxx</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9jyjt2488j31ba0u04mk.jpg" alt="查找"></p>
<ul>
<li>查看本地镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker images</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image ls</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9jzflpa4zj31bi0u01kx.jpg" alt="查看本地镜像"></p>
<ul>
<li>查看<code>IMAGE ID</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker images -q</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看镜像<code>具体信息</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker inspect python</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image inspect python</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除镜像</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rmi xxx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image rm xxx</span></span><br></pre></td></tr></table></figure>

<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><ul>
<li>查看正在运行的容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9jzpgxqu4j31j40k6tgf.jpg" alt="ps其他操作"></p>
<ul>
<li>查看全部容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a</span></span><br></pre></td></tr></table></figure>

<ul>
<li>停止容器</li>
<li>重启容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker stop xxx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker restart xxx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>暂停容器</li>
<li>恢复容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pause xxx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker unpause xxx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>列出容器上运行的所有历史命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">history</span> xxx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看容器的进程和资源利用</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker top xxx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stats xxx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rm xxx</span></span><br></pre></td></tr></table></figure>

<h2 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h2><p>几个重要的命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --<span class="built_in">help</span>| grep -E <span class="string">&#x27;\-i,|\-t,|\-d,|\-v,|\-p,|\-P,|\-\-name&#x27;</span></span></span><br><span class="line">  -d, --detach                         Run container in background and print container ID</span><br><span class="line">  -i, --interactive                    Keep STDIN open even if not attached</span><br><span class="line">      --name string                    Assign a name to the container</span><br><span class="line">  -p, --publish list                   Publish a container&#x27;s port(s) to the host</span><br><span class="line">  -P, --publish-all                    Publish all exposed ports to random ports</span><br><span class="line">  -t, --tty                            Allocate a pseudo-TTY</span><br><span class="line">  -v, --volume list                    Bind mount a volume</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9k034sxu7j31rq0c4tg0.jpg" alt="常用命令"></p>
<p><code>-i</code>与容器交互</p>
<p><code>-t</code>开启终端</p>
<p>一般<code>-i</code>和<code>-t</code>需要一起使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -it centos /bin/bash</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9k08a22vyj318w0nkk09.jpg" alt="进入容器"></p>
<p><code>--name</code>给容器命名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name 666 -it centos</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9k09jx0t9j324609a7cc.jpg" alt="命名"></p>
<p><code>-d</code>在后台运行</p>
<ul>
<li>进入正在运行的容器</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it 666 /bin/bash</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it 666 /bin/sh</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%94)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%94)/" itemprop="url">测试开发进阶(四十五)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%94)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十五)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十五"><a href="#测试开发进阶-四十五" class="headerlink" title="测试开发进阶(四十五)"></a>测试开发进阶(四十五)</h1><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose --version</span></span><br></pre></td></tr></table></figure>

<h3 id="删除无用的网络"><a href="#删除无用的网络" class="headerlink" title="删除无用的网络"></a>删除无用的网络</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker network prune</span></span><br></pre></td></tr></table></figure>

<h3 id="删除无用的数据卷"><a href="#删除无用的数据卷" class="headerlink" title="删除无用的数据卷"></a>删除无用的数据卷</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker volume prune</span></span><br></pre></td></tr></table></figure>

<h3 id="编写docker-compose-yml"><a href="#编写docker-compose-yml" class="headerlink" title="编写docker-compose.yml"></a>编写docker-compose.yml</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定版本信息</span></span><br><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定服务(启动容器)</span></span><br><span class="line">services: </span><br><span class="line">    <span class="comment"># 服务名:项目根目录小写_指定的服务名_服务个数的序号</span></span><br><span class="line">    <span class="comment"># deploydjango_db_1</span></span><br><span class="line">    db:</span><br><span class="line">      <span class="comment"># 指定镜像的名称</span></span><br><span class="line">      image: mariadb</span><br><span class="line">      <span class="comment"># 覆盖默认的CMO,指定运行容器时(docker run)需要运行的命令或者参数</span></span><br><span class="line">      command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line">      volumes: </span><br><span class="line">        - mysql_db:/var/lib/mysql</span><br><span class="line">      <span class="comment"># 指定容器重启的策略</span></span><br><span class="line">      restart: always</span><br><span class="line">      <span class="comment"># 指定环境变量</span></span><br><span class="line">      environment: </span><br><span class="line">        MYSQL_ROOT_PASSWORD: pythonvip</span><br><span class="line">        MYSQL_DATABASE: test</span><br><span class="line"></span><br><span class="line">    django_app:</span><br><span class="line">      <span class="comment"># 指定容器的启动依赖</span></span><br><span class="line">      <span class="comment"># 只有当db容器启动后,再启动 django_app容器</span></span><br><span class="line">      depends_on: </span><br><span class="line">          - db</span><br><span class="line">      <span class="comment"># 指定Dockerfile所在的路径</span></span><br><span class="line">      build: ./django_app_docker</span><br><span class="line">        <span class="comment"># 指定构建的镜像名</span></span><br><span class="line">      image: keyou1/django_app</span><br><span class="line">      restart: always</span><br><span class="line">      volumes: </span><br><span class="line">        - logs:/usr/src/app/logs</span><br><span class="line">        - django_code:/usr/src/app/LearnDjango/</span><br><span class="line">    web:</span><br><span class="line">      depends_on: </span><br><span class="line">        - django_app</span><br><span class="line">      build: ./nginx_docker</span><br><span class="line">      image: keyou1/lemon-test-nginx</span><br><span class="line">      restart: always</span><br><span class="line">      <span class="comment"># 端口映射</span></span><br><span class="line">      ports: </span><br><span class="line">        - <span class="string">&quot;8866:80&quot;</span></span><br><span class="line">        - <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line">      volumes: </span><br><span class="line">        - logs:/var/log/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定容器使用的数据卷</span></span><br><span class="line">volumes: </span><br><span class="line">    <span class="comment"># deploydjango_mysql_db</span></span><br><span class="line">    <span class="comment"># 数据卷名为:项目根目录小写_指定的数据卷名</span></span><br><span class="line">    mysql_db:</span><br><span class="line">    django_code:</span><br><span class="line">    logs:</span><br></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>在docker-compose.yml文件所在路径下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up</span></span><br></pre></td></tr></table></figure>

<h2 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h2><p>以之前完成的<code>ApiTest</code>项目为例：</p>
<ol>
<li>收集静态文件</li>
</ol>
<p>在<code>setting.py</code>文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 收集静态文件</span></span><br><span class="line"><span class="comment"># 1. 在项目根路径下创建xx文件夹</span></span><br><span class="line"><span class="comment"># 2. 执行收集命令 python manage.py collectstatic</span></span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, <span class="string">&#x27;front_ends/static&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9o0ahgvxoj30c205iq35.jpg" alt="收集静态文件"></p>
<ol start="2">
<li>前端代码打包</li>
</ol>
<p><code>lemon-test/package.json</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9o0ckxekqj30zy0pstd4.jpg" alt="打包"></p>
<p>打包结果：</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9o0ddr3rdj30by0bwq3h.jpg" alt="打包"></p>
<p>将两者合并</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9o0hjoru8j30c60aqq3g.jpg" alt="合并"></p>
<ol start="3">
<li>放置到nginx中</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9o0oy3grwj30b00eq752.jpg" alt="nginx"></p>
<ol start="4">
<li>运行项目Dockerfile并推送至Docker Hub</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> $ docker build ./ -t  apitest:last</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 登录docker hub</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker login</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker tag apitest:last zhongxin1111/apitest</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> docker push zhongxin1111/apitest</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>运行<code>docker-compose.yml</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up -d</span></span><br></pre></td></tr></table></figure>


<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定版本信息</span></span><br><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定服务(启动容器)</span></span><br><span class="line">services: </span><br><span class="line">    <span class="comment"># 服务名:项目根目录小写_指定的服务名_服务个数的序号</span></span><br><span class="line">    <span class="comment"># deploydjango_db_1</span></span><br><span class="line">    db:</span><br><span class="line">      <span class="comment"># 指定镜像的名称</span></span><br><span class="line">      image: mariadb</span><br><span class="line">      <span class="comment"># 覆盖默认的CMO,指定运行容器时(docker run)需要运行的命令或者参数</span></span><br><span class="line">      command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line">      volumes: </span><br><span class="line">        - mysql_db:/var/lib/mysql</span><br><span class="line">      <span class="comment"># 指定容器重启的策略</span></span><br><span class="line">      restart: always</span><br><span class="line">      <span class="comment"># 指定环境变量</span></span><br><span class="line">      environment: </span><br><span class="line">        MYSQL_ROOT_PASSWORD: pythonvip</span><br><span class="line">        MYSQL_DATABASE: test</span><br><span class="line"></span><br><span class="line">    django_app:</span><br><span class="line">      <span class="comment"># 指定容器的启动依赖</span></span><br><span class="line">      <span class="comment"># 只有当db容器启动后,再启动 django_app容器</span></span><br><span class="line">      depends_on: </span><br><span class="line">          - db</span><br><span class="line">      <span class="comment"># 指定Dockerfile所在的路径</span></span><br><span class="line">      build: ./django_app_docker</span><br><span class="line">        <span class="comment"># 指定构建的镜像名</span></span><br><span class="line">      image: zhongxin1111/apitest</span><br><span class="line">      restart: always</span><br><span class="line">      volumes: </span><br><span class="line">        - logs:/usr/src/app/logs</span><br><span class="line">        - django_code:/usr/src/app/LearnDjango/</span><br><span class="line">    web:</span><br><span class="line">      depends_on: </span><br><span class="line">        - django_app</span><br><span class="line">      build: ./nginx_docker</span><br><span class="line">      image: keyou1/lemon-test-nginx</span><br><span class="line">      restart: always</span><br><span class="line">      <span class="comment"># 端口映射</span></span><br><span class="line">      ports: </span><br><span class="line">        - <span class="string">&quot;8866:80&quot;</span></span><br><span class="line">        - <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line">      volumes: </span><br><span class="line">        - logs:/var/log/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定容器使用的数据卷</span></span><br><span class="line">volumes: </span><br><span class="line">    <span class="comment"># deploydjango_mysql_db</span></span><br><span class="line">    <span class="comment"># 数据卷名为:项目根目录小写_指定的数据卷名</span></span><br><span class="line">    mysql_db:</span><br><span class="line">    django_code:</span><br><span class="line">    logs:</span><br></pre></td></tr></table></figure>

<p>具体代码见：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/zx490336534/ApiTest/tree/master/DeployApiTest">https://github.com/zx490336534/ApiTest/tree/master/DeployApiTest</a></p>
<h2 id="Docker-Swarm"><a href="#Docker-Swarm" class="headerlink" title="Docker Swarm"></a>Docker Swarm</h2><ul>
<li>集群</li>
<li>大型应用</li>
<li>高性能 高效率 高可用</li>
<li>无中心设计</li>
<li>横向 纵向伸缩</li>
<li>多主机网络</li>
<li>服务发现</li>
<li>负载均衡</li>
<li>回滚更新</li>
</ul>
<h3 id="Swarm-manager"><a href="#Swarm-manager" class="headerlink" title="Swarm manager"></a>Swarm manager</h3><ul>
<li>切换 加入 移除 维护 节点</li>
<li>最小的集群至少需要5个节点</li>
</ul>
<h3 id="Swarm-work"><a href="#Swarm-work" class="headerlink" title="Swarm work"></a>Swarm work</h3><ul>
<li>运行任务的节点</li>
<li>托管容器任务</li>
</ul>
<h3 id="创建集群"><a href="#创建集群" class="headerlink" title="创建集群"></a>创建集群</h3><ul>
<li>初始化</li>
<li>docker swarm</li>
</ul>
<p>由于没有环境，所以不再深入</p>
<p>见：<a target="_blank" rel="noopener" href="https://docs.docker.com/swarm/">https://docs.docker.com/swarm/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AD)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AD)/" itemprop="url">测试开发进阶(四十六)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AD)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十六)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十六"><a href="#测试开发进阶-四十六" class="headerlink" title="测试开发进阶(四十六)"></a>测试开发进阶(四十六)</h1><h3 id="为什么要做APP专项测试"><a href="#为什么要做APP专项测试" class="headerlink" title="为什么要做APP专项测试"></a>为什么要做APP专项测试</h3><ul>
<li>奔溃(crash)</li>
<li>卡顿</li>
<li>兼容性问题(占据大多数时间)</li>
<li>发热/发烫</li>
</ul>
<blockquote>
<p>硬件耗电-&gt;产生热量</p>
</blockquote>
<ul>
<li>响应慢</li>
</ul>
<blockquote>
<p>2-5-8原则</p>
<p>2秒钟 -&gt; 优</p>
<p>5秒钟 -&gt; 可以接受</p>
<p>8秒钟 -&gt; 不能接受</p>
</blockquote>
<h2 id="专项纬度"><a href="#专项纬度" class="headerlink" title="专项纬度"></a>专项纬度</h2><h3 id="场景测试"><a href="#场景测试" class="headerlink" title="场景测试"></a>场景测试</h3><h4 id="兼容性测试"><a href="#兼容性测试" class="headerlink" title="兼容性测试"></a>兼容性测试</h4><ul>
<li>testin云测</li>
<li>STF实验室平台</li>
</ul>
<h4 id="压力稳定性测试"><a href="#压力稳定性测试" class="headerlink" title="压力稳定性测试"></a>压力稳定性测试</h4><ul>
<li>Monkey</li>
</ul>
<h4 id="弱网测试"><a href="#弱网测试" class="headerlink" title="弱网测试"></a>弱网测试</h4><ul>
<li>fiddler代理</li>
<li>network Emulator toolkit</li>
<li>Facebook ATC</li>
</ul>
<h4 id="安全测试"><a href="#安全测试" class="headerlink" title="安全测试"></a>安全测试</h4><ul>
<li>BurpSuite</li>
<li>ApkTool/Dex2Jar/JD-GUI反编译</li>
<li>安装包签名</li>
<li>账户安全</li>
</ul>
<h3 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h3><h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><ul>
<li>proc文件-Jiffies</li>
<li>GT/soloPi</li>
</ul>
<h4 id="电量测试"><a href="#电量测试" class="headerlink" title="电量测试"></a>电量测试</h4><ul>
<li>腾讯GT</li>
<li>battery historian</li>
</ul>
<h4 id="流量测试"><a href="#流量测试" class="headerlink" title="流量测试"></a>流量测试</h4><ul>
<li>proc文件</li>
<li>腾讯GT</li>
</ul>
<h4 id="启动时间"><a href="#启动时间" class="headerlink" title="启动时间"></a>启动时间</h4><ul>
<li>adb shell am start</li>
<li>soloPi插件</li>
</ul>
<h4 id="流畅度专项"><a href="#流畅度专项" class="headerlink" title="流畅度专项"></a>流畅度专项</h4><ul>
<li>卡顿root cause</li>
<li>FPS/SM</li>
<li>GPU呈现模式/GT</li>
<li>卡顿分析</li>
</ul>
<blockquote>
<ul>
<li>页面多度绘制</li>
<li>TraceView/StrictMode</li>
<li>频繁GC</li>
</ul>
</blockquote>
<h4 id="内存专项"><a href="#内存专项" class="headerlink" title="内存专项"></a>内存专项</h4><ul>
<li>内存泄露/溢出</li>
<li>内存占用</li>
<li>LMK</li>
<li>leakcanary</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vdjlvyboj31nq0u0qco.jpg" alt="专项测试"></p>
<h2 id="兼容性测试-1"><a href="#兼容性测试-1" class="headerlink" title="兼容性测试"></a>兼容性测试</h2><p>由于移动端的碎片化特征，需要确保App产品能够在不同系统版本，不同屏幕分辨率，不同系统定制ROM也能够有好的用户体验</p>
<ul>
<li>系统版本兼容</li>
</ul>
<blockquote>
<p>Android: </p>
</blockquote>
<ul>
<li><p>2.2 2.3 milestone</p>
</li>
<li><p>4.0 4.1 4.2 4.4</p>
</li>
<li><p>5.0 5.1</p>
</li>
<li><p>6.0 6.1</p>
</li>
<li><p>7.0 7.1</p>
</li>
<li><p>8.0 8.1</p>
</li>
<li><p>9</p>
</li>
</ul>
<blockquote>
<p>IOS:</p>
</blockquote>
<ul>
<li>8</li>
<li>9</li>
<li>10</li>
<li>11</li>
<li>12</li>
<li>13</li>
</ul>
<hr>
<ul>
<li>系统定制ROM兼容(Android)</li>
</ul>
<p>小米MIUI</p>
<p>华为EMUI</p>
<p>魅族flyme</p>
<hr>
<ul>
<li>屏幕分辨率兼容</li>
</ul>
<hr>
<p><code>APP流量数据</code><a target="_blank" rel="noopener" href="https://tongji.baidu.com/research/app">https://tongji.baidu.com/research/app</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vdqwab0dj31b30u01kx.jpg" alt="APP流量数据"></p>
<h3 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h3><ul>
<li>云测平台</li>
<li>自建STF平台:<a target="_blank" rel="noopener" href="http://www.lemfix.com/topics/341">http://www.lemfix.com/topics/341</a></li>
</ul>
<h2 id="压力稳定性测试-1"><a href="#压力稳定性测试-1" class="headerlink" title="压力稳定性测试"></a>压力稳定性测试</h2><p>App长时间在前/后台运行，用户对于App的稳定性有更高的要求。</p>
<p>通过稳定性测试来避免奔溃(crash)/无响应(ANR)/内存泄露等问题。</p>
<ul>
<li>Monkey <strong>支持Android</strong></li>
</ul>
<p>优点：</p>
<blockquote>
<p>Google原生工具，使用简单，开源</p>
</blockquote>
<p>缺点:</p>
<blockquote>
<p>基于坐标,遍历深度不够,无详细报告</p>
</blockquote>
<hr>
<ul>
<li>Maxim <strong>支持Android</strong></li>
</ul>
<p>优点:</p>
<blockquote>
<p>基于uiautomator引擎实现，多种模式运行</p>
</blockquote>
<p>缺点:</p>
<blockquote>
<p>不开源，无法定制</p>
</blockquote>
<hr>
<ul>
<li>FastMonkey <strong>支持IOS</strong></li>
</ul>
<p>优点:</p>
<blockquote>
<p>基于XCTestWD，swiftmonkey二次开发，无需插桩 效率高</p>
</blockquote>
<p>缺点:</p>
<blockquote>
<p>配置复杂</p>
</blockquote>
<hr>
<h2 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h2><ul>
<li>安装</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.douban.com/note/701408420/">https://www.douban.com/note/701408420/</a></p>
<ul>
<li>查看版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb version</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vgwz1xkzj313a04ut9t.jpg" alt="查看版本"></p>
<ul>
<li>查看设备连接情况</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb devices</span></span><br></pre></td></tr></table></figure>

<p>使用「夜神模拟器」</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vh2j9i86j318205yjsq.jpg" alt="连接模拟器"></p>
<ul>
<li>杀死/重启adb服务</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb kill-server</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb start-server</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前运行的包名<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys activity | find <span class="string">&quot;mFocusedActivity&quot;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>dumpsys:解析信息</p>
<p>activity:页面名字</p>
<h3 id="monkey"><a href="#monkey" class="headerlink" title="monkey"></a>monkey</h3><p>乱点1000次</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey 1000</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vh62oiegj30ya0u0x27.jpg" alt="乱点1000次"></p>
<p><code>-p</code>用于约束限制,用此参数指定一个或多个包(App名字)</p>
<p>指定包之后，Monkey将只允许系统启动指定的App，如果不指定则允许启动设备中的所有APP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban 1000</span></span><br></pre></td></tr></table></figure>

<p><code>-s</code>用于指定伪随机数生成器的seed值</p>
<p>如果seed相同，则两次Monkey测试所产生的事件序列也相同</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 提前指定，第一次Monkey测试出了bug</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban -s 101 1000</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 第二次测试的流程和第一次一样就可以保证复现</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban -s 101 1000</span></span><br></pre></td></tr></table></figure>

<p><code>-v</code>日志级别</p>
<ul>
<li><code>-v</code></li>
</ul>
<p>默认值，仅提供启动提示，测试完成，最终结果</p>
<ul>
<li><code>-v -v</code></li>
</ul>
<p>提供较为详细的日志，包括每个发送到Activity的事件信息</p>
<ul>
<li><code>-v -v -v</code></li>
</ul>
<p>最详细的日志，包括了测试中选中/未选中的Activity信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban -v -v 1000</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban -v -v -v 1000</span> </span><br></pre></td></tr></table></figure>

<p><code>--throttle &lt;毫秒&gt;</code></p>
<p>指定用户操作间的时延</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban --throttle 3000 1000</span></span><br></pre></td></tr></table></figure>

<p><code>--randomize-throttle</code></p>
<p>指定随机延时，单位毫秒</p>
<p>执行1000次随机事件，间隔在0～300毫秒之间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban --throttle 300 --randomize-throttle  1000</span></span><br></pre></td></tr></table></figure>
<ul>
<li>杀死monky</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入shell</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> shell</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -9 &lt;monky-pid&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="事件百分比"><a href="#事件百分比" class="headerlink" title="事件百分比"></a>事件百分比</h3><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vfu9163pj30xc0mzdho.jpg" alt="事件百分比"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell monkey -p com.lemon.lemonban --pct-touch 100 1000</span></span><br></pre></td></tr></table></figure>

<p>设置全部（100%）为点击事件执行1000次</p>
<h2 id="弱网测试-1"><a href="#弱网测试-1" class="headerlink" title="弱网测试"></a>弱网测试</h2><p>现在APP网络环境复杂，如果APP没有对网络异常进行兼容处理，那么用户可能在日常使用中遇到APP闪退，ANR（程序无响应），数据丢失等问题</p>
<p>低于2G速度属于弱网，3G也可以划分为弱网，一般WIFI不划入弱网测试范畴</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9vg4se4oij30xg0dk769.jpg" alt="弱网定义"></p>
<p>工具：</p>
<ul>
<li>fiddler/charles</li>
</ul>
<p>代理限速，设置延时</p>
<blockquote>
<p>按照Charles抓取手机报文的方式<strong>设置代理</strong></p>
</blockquote>
<ul>
<li>Network Emulator Toolkit</li>
</ul>
<p>网卡限速，设置丢包和延时</p>
<ul>
<li>facebook ATC</li>
</ul>
<p>Linux 工具，需要部署环境，后续设备接入热点即可</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AB)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AB)/" itemprop="url">测试开发进阶(四十八)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%85%AB)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十八)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十八"><a href="#测试开发进阶-四十八" class="headerlink" title="测试开发进阶(四十八)"></a>测试开发进阶(四十八)</h1><h2 id="电量"><a href="#电量" class="headerlink" title="电量"></a>电量</h2><p>统计耗电本身也是一件耗电行为，所以软件统计方式其实都不是很精确</p>
<h3 id="统计方法-工具"><a href="#统计方法-工具" class="headerlink" title="统计方法/工具"></a>统计方法/工具</h3><ul>
<li>功耗仪：统计整机的耗电</li>
<li>腾讯GT工具</li>
<li>Battery Historian(Google 官方提供的工具，5.0及以后系统适用)</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/google/battery-historian">https://github.com/google/battery-historian</a></p>
<h3 id="手机投屏软件"><a href="#手机投屏软件" class="headerlink" title="手机投屏软件"></a>手机投屏软件</h3><p>windows：apowermirror</p>
<h3 id="Battery-Historian"><a href="#Battery-Historian" class="headerlink" title="Battery Historian"></a>Battery Historian</h3><p>从手机中导出bugreport文件上传至页面，在网页中生成详细的图表数据来展示手机各模块电量消耗过程，然后通过App数据的分析制定出相关的电量优化的方法</p>
<ul>
<li>安装GO python Java</li>
<li>使用Docker</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -p 9999:9999 registry.cn-beijing.aliyuncs.com/center1/google_battery</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1ga142i5s9lj315k0mwtbg.jpg" alt="google_battery"></p>
<h4 id="获取方式"><a href="#获取方式" class="headerlink" title="获取方式"></a>获取方式</h4><h5 id="记录唤醒锁的信息"><a href="#记录唤醒锁的信息" class="headerlink" title="记录唤醒锁的信息"></a>记录唤醒锁的信息</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys batterystats --<span class="built_in">enable</span> full-wake-history</span></span><br></pre></td></tr></table></figure>

<h5 id="重置电量数据"><a href="#重置电量数据" class="headerlink" title="重置电量数据"></a>重置电量数据</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys batterystats --reset</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1ga134tp4ghj315804eaav.jpg" alt="重置"></p>
<h5 id="采集电量数据"><a href="#采集电量数据" class="headerlink" title="采集电量数据"></a>采集电量数据</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Android7.0之后</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb bugreport bugreport.zip</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Android7.0之前</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb bugreport &gt; bugreport.txt</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1ga138bppx3j30u80u07m7.jpg" alt="电量数据"></p>
<h2 id="流畅度"><a href="#流畅度" class="headerlink" title="流畅度"></a>流畅度</h2><h3 id="帧率-amp-刷新频率"><a href="#帧率-amp-刷新频率" class="headerlink" title="帧率 &amp; 刷新频率"></a>帧率 &amp; 刷新频率</h3><p><code>Refresh Rate</code>屏幕在一秒内刷新屏幕的次数，取决于硬件的固定参数，如60Hz</p>
<p><code>Frame Rate</code>GPU在一秒内绘制操作的帧数，例如30fps，60fps</p>
<h3 id="卡顿root-cause"><a href="#卡顿root-cause" class="headerlink" title="卡顿root cause"></a>卡顿root cause</h3><p>大多数用户感受到卡顿等性能问题的主要根源都是因为渲染性能，android系统无法及时完成那些复杂的界面渲染操作，就产生了卡顿/不流畅的想象</p>
<h3 id="FPS指标"><a href="#FPS指标" class="headerlink" title="FPS指标"></a>FPS指标</h3><ul>
<li>fps低，但是不觉得App卡</li>
</ul>
<p>因为本来就用不到那么高的fps，屏幕没有绘制要求，那么fps就为0</p>
<ul>
<li>app停止操作后，fps还是一直变化</li>
</ul>
<p>屏幕每一帧的合成都是针对手机里面所有的进程，当前app停止后其他进程可能还在绘制</p>
<h3 id="计算流畅度"><a href="#计算流畅度" class="headerlink" title="计算流畅度"></a>计算流畅度</h3><ul>
<li>系统合成帧率</li>
</ul>
<blockquote>
<p>数据形式最为直观，游戏/视频等连续绘制的应用可以考虑选用，但不适用于绝大多数非连续绘制的应用</p>
</blockquote>
<ul>
<li>流畅度(SM:SMoothness)</li>
</ul>
<blockquote>
<p>数据形式和FPS类似，可以很好的弥补FPS无法准确刻画非连续绘制的应用显示性能的缺陷</p>
<ul>
<li>原理：在VSync机制中1s内Loop运行的次数</li>
<li>当流畅度越小的时候说明当前程序越卡顿</li>
</ul>
</blockquote>
<h3 id="指标获取"><a href="#指标获取" class="headerlink" title="指标获取"></a>指标获取</h3><h4 id="FPS获取"><a href="#FPS获取" class="headerlink" title="FPS获取"></a>FPS获取</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys gfxinfo 包名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 例如</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys gfxinfo com.sankuai.meituan</span></span><br></pre></td></tr></table></figure>

<p>Draw+Prepare+Process+Execute=完整显示一帧的时间</p>
<p>这个时间需要小于16.67ms才能保证不丢帧</p>
<ul>
<li>计算总数据的行数(跳过第一行)</li>
</ul>
<blockquote>
<p>frameCount = rowNum</p>
</blockquote>
<ul>
<li>计算每帧的渲染时间</li>
</ul>
<blockquote>
<p>renderTime = Draw + Prepare + Process + Execute</p>
</blockquote>
<ul>
<li>当渲染时间renderTime大于16.67ms，该帧渲染超时,算一次丢帧，需要用掉额外的Vsync个数为(多需要同步的信号)</li>
</ul>
<blockquote>
<ul>
<li>16.67整数倍</li>
</ul>
<p>vsyncOverNum=int(renderTime/16.67)-1</p>
<ul>
<li>非16.67整数倍</li>
</ul>
<p>vsyncOverNum=int(renderTime/16.67)-1</p>
</blockquote>
<ul>
<li>fps计算公式</li>
</ul>
<blockquote>
<p>fps=frameCount*60/(frameCount+vsyncOverNum=int)</p>
</blockquote>
<h4 id="SM获取"><a href="#SM获取" class="headerlink" title="SM获取"></a>SM获取</h4><p>腾讯GT</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1ga14kprtg4j30u018hn90.jpg" alt="GT"></p>
<h3 id="流畅度影响因素"><a href="#流畅度影响因素" class="headerlink" title="流畅度影响因素"></a>流畅度影响因素</h3><ul>
<li>UI渲染</li>
</ul>
<blockquote>
<p>界面过度渲染</p>
<p>布局边界合理性</p>
</blockquote>
<ul>
<li>UI线程复杂运算</li>
<li>频繁GC垃圾回收</li>
</ul>
<h3 id="UI渲染"><a href="#UI渲染" class="headerlink" title="UI渲染"></a>UI渲染</h3><p>UI渲染由CPU和GPU两个部分协同完成</p>
<ul>
<li>CPU负责UI布局元素的Measure，Layout，Draw等相关运算执行。如果布局边界不合理，会导致卡顿</li>
<li>GPU负责栅格化，将UI元素绘制到屏幕上，如果界面过度绘制，也可能导致卡顿</li>
</ul>
<h4 id="页面的过度绘制"><a href="#页面的过度绘制" class="headerlink" title="页面的过度绘制"></a>页面的过度绘制</h4><p>一个像素点绘制次数超过1次</p>
<p>开发者选项-&gt;调试GPU过度绘制</p>
<ul>
<li>没颜色：没有过度绘制</li>
<li>蓝色：1倍过度绘制，1个像素点绘制2次</li>
<li>绿色：2倍 3次</li>
<li>浅红色：3倍 4次</li>
<li>深红色：4倍以上 5次以上</li>
</ul>
<p>蓝色和绿色可以接受</p>
<h4 id="UI线程复杂运算"><a href="#UI线程复杂运算" class="headerlink" title="UI线程复杂运算"></a>UI线程复杂运算</h4><p>当android应用启动时，系统会为应用创建一个主线程，负责和UI组件进行交互</p>
<p>如果主线程里面进行复杂运算就会造成界面无响应/卡顿/不流畅(ANR已经是卡顿的极致了)</p>
<ul>
<li>TraceView</li>
</ul>
<p>分析方法执行时间</p>
<ul>
<li>StrictMode(严苛模式)</li>
</ul>
<p>在代码里或者开发者选项中开启，查看应用哪些操作在主线程上执行时间过长</p>
<p>当一些操作违背了严格模式时，屏幕四周会闪烁红色，同时输出StrictMode的相关信息到LOGCAT日志中</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%9B%9B)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%9B%9B)/" itemprop="url">测试开发进阶(四十四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E5%9B%9B)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十四)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十四"><a href="#测试开发进阶-四十四" class="headerlink" title="测试开发进阶(四十四)"></a>测试开发进阶(四十四)</h1><p>运行一个页面</p>
<p><strong>index.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>「测试游记」<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>「测试游记」<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>运行nginx</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name my_web -d -v <span class="variable">$PWD</span>/index.html:/usr/share/nginx/html/index.html -p 6688:80 nginx:alpine</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9m9osikmuj30hw0a0aas.jpg" alt="index"></p>
<p><strong>查看Docker网络信息</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker inspect my_web</span></span><br><span class="line"></span><br><span class="line">&quot;Networks&quot;: &#123;</span><br><span class="line">    &quot;bridge&quot;: &#123;</span><br><span class="line">        &quot;IPAMConfig&quot;: null,</span><br><span class="line">        &quot;Links&quot;: null,</span><br><span class="line">        &quot;Aliases&quot;: null,</span><br><span class="line">        &quot;NetworkID&quot;: &quot;df9d31e0e839edd40d10b32b0459fc178efc4a7d22ee9d06090e7c47dd135bfc&quot;,</span><br><span class="line">        &quot;EndpointID&quot;: &quot;c905dc6442971d9e6a2b36581f7081b0bf976aec477fe01dd0596cbed7647de0&quot;,</span><br><span class="line">        &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">        &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">        &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">        &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">        &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">        &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">        &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">        &quot;DriverOpts&quot;: null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web ip a</span></span><br><span class="line"></span><br><span class="line">inet 127.0.0.1/8 scope host lo</span><br><span class="line">inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9m9sy02fuj31ec0kgdnk.jpg" alt="网络情况"></p>
<h2 id="network"><a href="#network" class="headerlink" title="network"></a>network</h2><h3 id="docker0"><a href="#docker0" class="headerlink" title="docker0"></a>docker0</h3><p>默认容器与宿主机之间沟通的桥梁</p>
<h3 id="网络类型"><a href="#网络类型" class="headerlink" title="网络类型"></a>网络类型</h3><ul>
<li>bridge(默认)</li>
</ul>
<p>nat网络模型,虚拟路由器</p>
<ul>
<li>host</li>
</ul>
<p>与宿主机共享网络<code>--net=host</code></p>
<ul>
<li>none</li>
</ul>
<p>不配置网络<code>--net=none</code></p>
<ul>
<li>overlay</li>
</ul>
<p>不同网络进行通信</p>
<p>与一同容器共享网络<code>--net=container:容器名</code></p>
<h3 id="查看docker网络列表"><a href="#查看docker网络列表" class="headerlink" title="查看docker网络列表"></a>查看docker网络列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker network ls</span></span><br><span class="line"></span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">df9d31e0e839        bridge              bridge              local</span><br><span class="line">b58ef02d2c13        host                host                local</span><br><span class="line">544544bfb357        none                null                local</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9ma80yhzrj3158080gpq.jpg" alt="网络列表"></p>
<h4 id="创建一个网络"><a href="#创建一个网络" class="headerlink" title="创建一个网络"></a>创建一个网络</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker network create my_net</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9ma9ud4tsj315208uwgx.jpg" alt="创建一个网络"></p>
<p>在该网络下创建两个容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name my_web1 --network my_net -d -v <span class="variable">$PWD</span>/index.html:/usr/share/nginx/html/index.html -p 6689:80 nginx:alpine</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run --name my_web2 --network my_net -d -v <span class="variable">$PWD</span>/index.html:/usr/share/nginx/html/index.html -p 6690:80 nginx:alpine</span></span><br></pre></td></tr></table></figure>

<p>查看当前创建的网络</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker network inspect my_net</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9madvkln3j31f00iyq8x.jpg" alt="当前创建的网络"></p>
<p>可以发现</p>
<ul>
<li><p><code>my_web1</code>的网络地址为<code>172.18.0.2/16</code></p>
</li>
<li><p><code>my_web2</code>的网络地址为<code>172.18.0.3/16</code></p>
</li>
</ul>
<p>测试一下两者是否相通</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web1 ping -c2 172.18.0.3</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web2 ping -c2 172.18.0.2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 还可以通过容器名访问</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web2 ping -c2 my_web1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web1 ping -c2 my_web2</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9maft1iooj31g20k8dlv.jpg" alt="网络通信"></p>
<h3 id="使用host"><a href="#使用host" class="headerlink" title="使用host"></a>使用host</h3><p>与宿主机网络完全一致</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name my_web3 --network host -d -v <span class="variable">$PWD</span>/index.html:/usr/share/nginx/html/index.html -p 6689:80 nginx:alpine</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web3 ip a</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9majepug5j30zy0u0x0p.jpg" alt="查看网络"></p>
<h3 id="使用none"><a href="#使用none" class="headerlink" title="使用none"></a>使用none</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name my_web4 --network none -d -v <span class="variable">$PWD</span>/index.html:/usr/share/nginx/html/index.html -p 6689:80 nginx:alpine</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it my_web4 ip a</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9makhs2vkj31lq0d0djt.jpg" alt="none"></p>
<h3 id="批量删除my-web"><a href="#批量删除my-web" class="headerlink" title="批量删除my_web"></a>批量删除my_web</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rm -f $(docker ps|awk <span class="string">&#x27;/my_web/ &#123;print $1&#125;&#x27;</span>)</span></span><br></pre></td></tr></table></figure>

<h3 id="批量删除Exited的内容"><a href="#批量删除Exited的内容" class="headerlink" title="批量删除Exited的内容"></a>批量删除Exited的内容</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rm -f $(docker ps -a|awk <span class="string">&#x27;/Exited/ &#123;print $1&#125;&#x27;</span>)</span></span><br></pre></td></tr></table></figure>

<h2 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h2><ul>
<li>使用数据卷实现数据持久化</li>
<li>数据备份/数据共享</li>
</ul>
<h3 id="搭建一个个人博客"><a href="#搭建一个个人博客" class="headerlink" title="搭建一个个人博客"></a>搭建一个个人博客</h3><p>运行mysql</p>
<p><code>-e</code>环境变量</p>
<p><code>-d</code>后台执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mydb --network my_net -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span></span><br></pre></td></tr></table></figure>

<p>运行wordpress</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name myblog --network my_net -d -e WORDPRESS_DB_HOST=mydb -e WORDPRESS_DB_PASSWORD=123456 -p 6688:80 wordpress</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9mb0cnwvqj31b30u07n1.jpg" alt="个人博客"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9mb1b8lxjj31b30u0au9.jpg" alt="个人博客1"></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9mb1yeafqj31b30u0h8q.jpg" alt="个人博客2"></p>
<h3 id="创建数据卷"><a href="#创建数据卷" class="headerlink" title="创建数据卷"></a>创建数据卷</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker volume create myvol</span></span><br></pre></td></tr></table></figure>

<p><strong>与数据库映射</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mydb --network my_net -e MYSQL_ROOT_PASSWORD=123456 -d -v myvol:/var/lib/mysql mysql:5.7</span></span><br></pre></td></tr></table></figure>

<p>mysql产生的数据会自动同步到数据卷</p>
<p>这样删除<code>mydb</code>也可以恢复数据</p>
<h3 id="查看数据卷"><a href="#查看数据卷" class="headerlink" title="查看数据卷"></a>查看数据卷</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker volume inspect myvol</span></span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2019-12-05T16:24:37Z&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/myvol/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;myvol&quot;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9mb7vgk2ej316q0fsjug.jpg" alt="查看数据卷"></p>
<p>使用管理员账号进入<code>/var/lib/docker/volumes/myvol/_data</code>可以查看存储的数据</p>
<h3 id="删除数据卷"><a href="#删除数据卷" class="headerlink" title="删除数据卷"></a>删除数据卷</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker volume rm myvol</span></span><br></pre></td></tr></table></figure>

<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p><strong>fun.py</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cowpy <span class="keyword">import</span> cow</span><br><span class="line"></span><br><span class="line">print(cow.milk_random_cow(<span class="string">&quot;Hello,Everyone&quot;</span>))</span><br></pre></td></tr></table></figure>
<p><strong>requirements.txt</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cowpy==1.1.0</span><br></pre></td></tr></table></figure>
<p><strong>Dockerfile</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:alpine</span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> maintainer=<span class="string">&quot;zhongxin &lt;490336534@qq.com&gt;&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> description=<span class="string">&quot;This is simple example.&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.txt ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install --no-cache-dir -r requirements.txt</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;python&quot;</span>,<span class="string">&quot;fun.py&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>创建</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker build ./ -t animal</span></span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name animal --rm animal</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9mbrkhmxtj316y0u0thm.jpg" alt="运行"></p>
<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><ul>
<li><p>使用<code>FROM</code>来指定base image镜像(在base image的基础上来操作)，放在首行</p>
</li>
<li><p><code>LABEL</code>指明作者，不执行的指令</p>
</li>
<li><p><code>WORKDIR</code>相当于<code>cd</code>命令，如果进入的目录不存在，会创建</p>
</li>
<li><p><code>COPY</code>相当于<code>cp</code>命令，宿主机中的内容「前」 复制到 容器中「后」</p>
</li>
<li><p><code>./</code>为当前目录<code>WORKDIR</code></p>
</li>
<li><p><code>ADD</code>和<code>COPY</code>命令类似，他会将一个压缩文件解压后，复制到容器中</p>
</li>
<li><p><code>RUN</code>在容器中执行linux命令需要使用RUN</p>
</li>
<li><p>可以执行多个<code>RUN</code></p>
</li>
<li><p><code>COPY . .</code>把相对于Dockerfile文件所在路径的所有文件拷贝到容器的当前目录</p>
</li>
<li><p><code>CMD</code>当镜像运行的时候会默认执行的命令</p>
</li>
</ul>
<h4 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h4><p>在已存在的image顶层执行命令，创建一个新的layer层</p>
<p>往往将需要安装的依赖，使用一个RUN来创建。多个命令可以用<code>&amp;&amp;</code>来拼接</p>
<h4 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h4><p>在容器内创建环境变量</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENV</span> username=zhongxin \</span><br><span class="line">		password=<span class="number">123456</span></span><br></pre></td></tr></table></figure>

<h4 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h4><p><code>VOLUME</code>命令指定的目录「容器中」才能被映射</p>
<h4 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h4><p>将容器中的端口暴露出来</p>
<h4 id="ENTRYPOINT-和-CMD"><a href="#ENTRYPOINT-和-CMD" class="headerlink" title="ENTRYPOINT 和 CMD"></a>ENTRYPOINT 和 CMD</h4><p><strong>不同点</strong></p>
<p>CMD</p>
<ul>
<li>运行容器时，不加任何参数，会自动执行CMD，如果添加参数会忽略CMD</li>
<li>有多个CMD，则只有最后一个会执行，其他都被忽略</li>
<li>可以给ENTRYPOINT传参</li>
</ul>
<blockquote>
<p>CMD[“p1”,”p2”]</p>
<p>如果ENTRYPOINT使用shell格式，CMO会被忽略</p>
<p>如果ENTRYPOINT使用exec格式，CMO会和它进行组合</p>
</blockquote>
<p>ENTRYPOINT </p>
<ul>
<li>运行容器时，如果添加参数不会忽略ENTRYPOINT </li>
</ul>
<p><strong>相同点</strong></p>
<ul>
<li>只有1个CMD或者ENTRYPOINT时，没有区别</li>
<li>shell格式和exec格式</li>
</ul>
<blockquote>
<p>shell格式:ls /</p>
<p>exec格式:[“ls”,”/“]</p>
<p>一定要「双引号」</p>
</blockquote>
<p>CMD和ENTRYPOINT一起使用的时候，</p>
<ul>
<li>不入参为ENTRYPOINT+CMD</li>
<li>入参为为ENTRYPOINT+参数</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%7C%7C%20archive">
              
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zx490336534" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">测试游记</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

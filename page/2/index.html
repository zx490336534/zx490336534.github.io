<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="测试游记">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="测试游记">
<meta property="og:locale">
<meta property="article:author" content="测试游记">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/page/2/"/>





  <title>测试游记</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">测试游记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%8C)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%8C)/" itemprop="url">测试开发进阶(四十二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:35+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%9B%9B%E5%8D%81%E4%BA%8C)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(四十二)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-四十二"><a href="#测试开发进阶-四十二" class="headerlink" title="测试开发进阶(四十二)"></a>测试开发进阶(四十二)</h1><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><blockquote>
<p>文本处理工具，处理数据并生成结果报告</p>
</blockquote>
<ul>
<li><code>awk ‘BEGIN&#123;&#125;pattern&#123;commands&#125;END&#123;&#125;’ file</code></li>
<li><code>some command | awk ‘BEGIN&#123;&#125;pattern&#123;commands&#125;END&#123;&#125;’</code></li>
</ul>
<p><strong>BEGIN</strong>处理数据之前执行</p>
<p><strong>pattern</strong>匹配模式</p>
<p><strong>commands</strong>处理的命令</p>
<p><strong>END</strong>处理数据之后执行</p>
<h3 id="内置变量"><a href="#内置变量" class="headerlink" title="内置变量"></a>内置变量</h3><ul>
<li><code>$0</code>整行内容</li>
<li><code>$1~$n</code>当前行的第1～n个字段</li>
<li><code>NF</code>当前行字段数</li>
<li><code>NR</code>当前行号，从1开始</li>
<li><code>FS</code>输入字段分割符，默认为空格或tab键</li>
<li><code>RS</code>输入行分割符，默认为回车符</li>
<li><code>OFS</code>输入字段分割符，默认为空格</li>
<li><code>ORS</code>输入行分割符，默认为回车符</li>
</ul>
<hr>
<p><strong>输出以<code>:</code>分割的最后一列内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125; &#123;print $NF&#125;&#x27;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p><strong>输出以<code>:</code>分割的<code>games</code>开头的行到<code>new</code>开头的行的最后一列内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^games/,/^new/&#123;print $NF&#125;&#x27;</span> passwd</span></span><br></pre></td></tr></table></figure>

<h3 id="printf格式符"><a href="#printf格式符" class="headerlink" title="printf格式符"></a>printf格式符</h3><ul>
<li><code>%s</code>字符串</li>
<li><code>%d</code>十进制数字</li>
<li><code>%f</code>浮点数</li>
<li><code>+</code>右对齐</li>
<li><code>-</code>左对齐</li>
</ul>
<hr>
<p>以<code>%s\n</code>的格式输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^games/,/^new/&#123;printf &quot;%s\n&quot; , $1&#125;&#x27;</span> passwd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^games/,/^new/&#123;printf &quot;%20s\n&quot; , $1&#125;&#x27;</span> passwd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^games/,/^new/&#123;printf &quot;%20s  %s\n&quot; , $1,$NF&#125;&#x27;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h79saz30j314i0e4tar.jpg" alt="awk1"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^games/,/^new/&#123;printf &quot;%-20s\t%-20s\n&quot; , $1,$NF&#125;&#x27;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h7b67buaj315w05ojsb.jpg" alt="awk2"></p>
<p><strong>格式化输出以s开头的行好和第一列内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125;/^s/&#123;printf &quot;%d\t%-10s\n&quot; , NR,$1&#125;&#x27;</span> passwd</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h7eet3k8j30zy07a0tn.jpg" alt="awk3"></p>
<p><strong>格式化输出第三例大于100的内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3 &gt; 100 &#123;printf &quot;%-10s\t%-10s\n&quot;,$1,$(NF-1)&#125;&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h7n26eg7j312m0cwjta.jpg" alt="awk4"></p>
<p><strong>添加头部和尾部</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;BEGIN&#123;printf &quot;%-10s\t%-10s\n&quot;,&quot;username&quot;,&quot;path&quot;&#125;$3 &gt; 100 &#123;COUNT++;printf &quot;%-10s\t%-10s\n&quot;,$1,$(NF-1)&#125;END&#123;printf &quot;%-10s\t%-10s\n&quot;,&quot;totally&quot;,COUNT&#125;&#x27;</span> passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h7sgygswj30f60e2400.jpg" alt="awk5"></p>
<h3 id="使用文件"><a href="#使用文件" class="headerlink" title="使用文件"></a>使用文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> awk1.awk</span></span><br><span class="line">BEGIN&#123;</span><br><span class="line">    printf &quot;%-20s\t%-20s\n&quot;,&quot;UserName&quot;,&quot;Path&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    if ($3 &gt; 100)&#123;</span><br><span class="line">        COUNT++</span><br><span class="line">        printf &quot;%-20s\t%-20s\n&quot;,$1,$(NF-1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">END&#123;</span><br><span class="line">    printf &quot;%-20s\t%-20s\n&quot;,&quot;Totally&quot;,COUNT</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk -F <span class="string">&#x27;:&#x27;</span> -f awk1.awk  passwd</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h7zmwl13j30pa0e8409.jpg" alt="awk6"></p>
<h2 id="日志分析"><a href="#日志分析" class="headerlink" title="日志分析"></a>日志分析</h2><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h88qqxn7j31tw0u0tw4.jpg" alt="日志文件"></p>
<h3 id="获取每个测试人员执行的用例数"><a href="#获取每个测试人员执行的用例数" class="headerlink" title="获取每个测试人员执行的用例数"></a>获取每个测试人员执行的用例数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">BEGIN&#123;</span><br><span class="line">    printf &quot;%-10s%-10s\n&quot;,&quot;Tester&quot;,&quot;TotalTestcases&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    USERS[$4] += 1</span><br><span class="line">&#125;</span><br><span class="line">END&#123;</span><br><span class="line">    for (u in USERS)&#123;</span><br><span class="line">        printf &quot;%-10s%-10s\n&quot;,u,USERS[u]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk -f 1201.awk testcases.log</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h89guc1zj30ns068gm9.jpg" alt="文件处理1"></p>
<h3 id="统计每位测试人员执行用例成功和失败的总数"><a href="#统计每位测试人员执行用例成功和失败的总数" class="headerlink" title="统计每位测试人员执行用例成功和失败的总数"></a>统计每位测试人员执行用例成功和失败的总数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BEGIN&#123;</span><br><span class="line">    printf &quot;%-10s%-12s%-12s\n&quot;,&quot;Tester&quot;,&quot;PassTotal&quot;,&quot;FailTotal&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;   </span><br><span class="line">    if ($5 == &quot;Pass&quot;)&#123;</span><br><span class="line">        SUCCESS[$4] += 1</span><br><span class="line">    &#125;</span><br><span class="line">    else if($5 == &quot;Fail&quot;)&#123;</span><br><span class="line">        FAIL[$4] += 2</span><br><span class="line">    &#125;</span><br><span class="line">    USERS[$4] += 1</span><br><span class="line">&#125;</span><br><span class="line">END&#123;</span><br><span class="line">    for (u in USERS)&#123;</span><br><span class="line">        printf &quot;%-10s%-12s%-12s\n&quot;,u,SUCCESS[u],FAIL[u]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk -f 1201_2.awk testcases.log</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h8ho7aksj30oy06imxy.jpg" alt="文件处理2"></p>
<h3 id="同时分别统计每位测试人员执行用例CRITICAL、ERROR日志等级数以及所有测试人员每项总数"><a href="#同时分别统计每位测试人员执行用例CRITICAL、ERROR日志等级数以及所有测试人员每项总数" class="headerlink" title="同时分别统计每位测试人员执行用例CRITICAL、ERROR日志等级数以及所有测试人员每项总数"></a>同时分别统计每位测试人员执行用例CRITICAL、ERROR日志等级数以及所有测试人员每项总数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">BEGIN&#123;</span><br><span class="line">    printf &quot;%-10s%-12s%-12s%-12s%-12s\n&quot;,&quot;Tester&quot;,&quot;PassTotal&quot;,&quot;FailTotal&quot;,&quot;CRITICALATotal&quot;,&quot;ERRORTotal&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;   </span><br><span class="line">    if ($5 == &quot;Pass&quot;)&#123;</span><br><span class="line">        SUCCESS[$4] += 1</span><br><span class="line">        s += 1</span><br><span class="line">    &#125;</span><br><span class="line">    else if($5 == &quot;Fail&quot;)&#123;</span><br><span class="line">        FAIL[$4] += 1</span><br><span class="line">        f += 1</span><br><span class="line">    &#125;</span><br><span class="line">    if($3 == &quot;CRITICAL&quot;)&#123;</span><br><span class="line">        CRITICAL[$4] += 1</span><br><span class="line">        c += 1</span><br><span class="line">    &#125;</span><br><span class="line">    else if($3 == &quot;ERROR&quot;)&#123;</span><br><span class="line">        ERROR[$4] += 1</span><br><span class="line">        e += 1</span><br><span class="line">    &#125;</span><br><span class="line">    USERS[$4] += 1</span><br><span class="line">&#125;</span><br><span class="line">END&#123;</span><br><span class="line">    for (u in USERS)&#123;</span><br><span class="line">        printf &quot;%-10s%-12s%-12s%-12s%-12s\n&quot;,u,SUCCESS[u],FAIL[u],CRITICAL[u],ERROR[u]</span><br><span class="line">    &#125;</span><br><span class="line">    printf &quot;%-10s%-12s%-12s%-12s%-12s\n&quot;,&quot;Total&quot;,s,f,c,e</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1g9h8zounn1j30p007cgmp.jpg" alt="文件处理3"></p>
<h3 id="使用shell脚本来实现，并显示菜单，选择不同的选项则打印不同的内容"><a href="#使用shell脚本来实现，并显示菜单，选择不同的选项则打印不同的内容" class="headerlink" title="使用shell脚本来实现，并显示菜单，选择不同的选项则打印不同的内容"></a>使用shell脚本来实现，并显示菜单，选择不同的选项则打印不同的内容</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author:zhongxin</span></span><br><span class="line">echo &quot;one:统计每位测试人员执行用例的总数&quot;</span><br><span class="line">echo &quot;two:分别统计每位测试人员执行用例成功和失败的总数&quot;</span><br><span class="line">echo &quot;three:同时分别统计每位测试人员执行用例CRITICAL、ERROR日志等级数以及所有测试人员每项总数&quot;</span><br><span class="line">read -p &quot;请输入选择的模式:&quot; modes</span><br><span class="line">echo $&#123;modes&#125;</span><br><span class="line">case $&#123;modes&#125; in</span><br><span class="line">    one)</span><br><span class="line">    awk -f ./1201.awk testcases.log</span><br><span class="line">    ;;</span><br><span class="line">    two)</span><br><span class="line">    awk -f ./1201_2.awk testcases.log</span><br><span class="line">    ;;</span><br><span class="line">    three)</span><br><span class="line">    awk -f ./1201_3.awk testcases.log</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">    echo &quot;请输入正确的模式&quot;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AB)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AB)/" itemprop="url">测试开发进阶(十八)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:34+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AB)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(十八)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-十八"><a href="#测试开发进阶-十八" class="headerlink" title="测试开发进阶(十八)"></a>测试开发进阶(十八)</h1><p><strong>欢迎关注我的公众号「测试游记」</strong></p>
<blockquote>
<p>element-ui其实就是一个组件库</p>
</blockquote>
<p><code>ref</code>为一个元素或者子组件的应用</p>
<p>组件中定义的所有的ref都会放在当前组件的<code>$refs</code>属性中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">        ref=&quot;multipleTable&quot;</span><br><span class="line">        :data=&quot;tableData&quot;</span><br><span class="line">        tooltip-effect=&quot;dark&quot;</span><br><span class="line">        style=&quot;width: 100%&quot;</span><br><span class="line">        class=&quot;project_list_new&quot;</span><br><span class="line">        @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">toggleSelection</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.multipleTable.clearSelection();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>this.$refs.multipleTable</code>就可以操作上面的内容了</p>
<h2 id="一个登录页面"><a href="#一个登录页面" class="headerlink" title="一个登录页面"></a>一个登录页面</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- v-bind单向绑定，只能将Model中的数据传给绑定的属性 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:username</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">id</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:password</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>你输入的用户名为&#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>你输入的密码为&#123;&#123;password&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;Login&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                username: <span class="string">&#x27;admin&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                password: <span class="string">&#x27;admin&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: medium;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>v-bind单向绑定，只能将Model中的数据传给绑定的属性</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g73xx67rynj31b30u0at1.jpg" alt="单向绑定"></p>
<blockquote>
<p>v-model双向绑定<br>v-model为双向绑定，既可以把Model中的数据传给绑定的属性，也可以把属性传回给Model</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">id</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g73xyn9hbmj31b30u0dz7.jpg" alt="双向绑定"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;ruleForm&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:label-position</span>=<span class="string">&quot;labelPosition&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">status-icon</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">ref</span>=<span class="string">&quot;ruleForm&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">label-width</span>=<span class="string">&quot;70px&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">&quot;demo-ruleForm&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.username&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.password&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>你输入的用户名为&#123;&#123;ruleForm.username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>你输入的密码为&#123;&#123;ruleForm.password&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;Login_ui&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                ruleForm: &#123;</span><br><span class="line"><span class="javascript">                    labelPosition: <span class="string">&#x27;right&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    username: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    password: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">    .el-form &#123;</span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">350px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g73yedzp1jj31b30u04i9.jpg" alt="使用element_ui"></p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h4 id="beforeCreate"><a href="#beforeCreate" class="headerlink" title="beforeCreate"></a>beforeCreate</h4><blockquote>
<p>这个时候，this变量还不能使用，在data下的数据，和methods下的方法，watcher中的事件都不能获得到；</p>
</blockquote>
<h4 id="created"><a href="#created" class="headerlink" title="created"></a>created</h4><blockquote>
<p>这个时候可以操作vue实例中的数据和各种方法，但是还不能对”dom”节点进行操作；</p>
</blockquote>
<h4 id="mounted"><a href="#mounted" class="headerlink" title="mounted"></a>mounted</h4><blockquote>
<p>这个时候挂载完毕，这时dom节点被渲染到文档内，一些需要dom的操作在此时才能正常进行。<br>注意：mounted在整个实例的生命周期中只执行一次。</p>
</blockquote>
<h4 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h4><blockquote>
<p>是把所有需要依赖其他值计算的值写成对象的key值。</p>
</blockquote>
<h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><blockquote>
<p>把监听的值写成对象的key值</p>
</blockquote>
<ol>
<li><code>var vm = new Vue(&#123;&#125;)</code>表示开始创建一个Vue实例对象</li>
<li><code>Init Events &amp; Lifecycle</code>表示，刚初始化了一个Vue空的实例对象，这时候，该对象上，只有默认的一些生命周期函数和默认的事件，其他都没创建</li>
<li>在<code>beforeCreate</code>生命周期函数执行时，data和methods中的数据都还没初始化</li>
<li><code>Init injections &amp; reactivity</code>内部初始化</li>
<li>在<code>created</code>中，data和methods都已经初始化好了。所以最早要使用他们只能在<code>created</code>中</li>
<li>create开始到beforeMount 表示Vue开始编辑模版，把Vue代码中的指令进行执行，最终在内存中生存一个编译好的最终模版字符串，然后渲染为内存中的DOM，此时只是在内存中渲染好了模版，并没有挂载到真正的页面中</li>
<li><code>beforeMount</code> 执行这个函数的时候，模版只是在内存中编译完成，但是没有挂载到页面中，所以此时页面还是旧的</li>
<li><code>Create vm.$el and replace &quot;el&quot; with it</code>：把内存中的模版替换到浏览器页面</li>
<li><code>mounted</code>：执行完该函数，整个Vue实例已经初始化完毕，进入运行阶段</li>
<li><code>beforeUpdate</code>：data中数据更新了，但是页面还没更新</li>
<li><code>updated</code>：页面和data数据同步最新了</li>
<li><code>Virtual Dom re-render and patch</code>：根据data中的数据，在内存中渲染一份最新的DOM树，当它更新之后，会重新渲染到真实页面中去，就相当于完成了data(Model)-&gt; view(视图层)的更新</li>
<li><code>beforeDestroy</code>：Vue进入销毁阶段，但是data和methods还是可用的</li>
<li><code>destroyed</code>：组件以及被销毁了，里面的东西都不能用了</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g73z74deibj30u023ztt5.jpg" alt="生命周期"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 创建 Vue 实例，得到 ViewModel</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">      data: &#123;</span><br><span class="line"><span class="javascript">        msg: <span class="string">&#x27;ok&#x27;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">show</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">&#x27;执行了show方法&#x27;</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 第一个生命周期函数，表示实例完全被创建出来之前，会执行它</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(this.msg)</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// this.show()</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 注意： 在 beforeCreate 生命周期函数执行的时候，data 和 methods 中的 数据都还没有没初始化</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 第二个生命周期函数</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(this.msg)</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// this.show()</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//  在 created 中，data 和 methods 都已经被初始化好了！</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 如果要调用 methods 中的方法，或者操作 data 中的数据，最早，只能在 created 中操作</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">beforeMount</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 第3个生命周期函数，表示 模板已经在内存中编辑完成了，但是尚未把 模板渲染到 页面中</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(document.getElementById(&#x27;h3&#x27;).innerText)</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 在 beforeMount 执行的时候，页面中的元素，还没有被真正替换过来，只是之前写的一些模板字符串</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 第4个生命周期函数，内存中的模板，已经真实的挂载到了页面中，用户已经可以看到渲染好的页面了</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(document.getElementById(&#x27;h3&#x27;).innerText)</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 注意： mounted 是 实例创建期间的最后一个生命周期函数，当执行完 mounted 就表示，实例已经被完全创建好了，此时，如果没有其它操作的话，这个实例，就静静的 躺在我们的内存中，一动不动</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="javascript">      <span class="comment">// 接下来的是运行中的两个事件</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">beforeUpdate</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 这时候，表示 我们的界面还没有被更新【数据被更新了吗？  数据肯定被更新了】</span></span></span><br><span class="line">        /* console.log(&#x27;界面上元素的内容：&#x27; + document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;data 中的 msg 数据是：&#x27;</span> + <span class="built_in">this</span>.msg) */</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 得出结论： 当执行 beforeUpdate 的时候，页面中的显示的数据，还是旧的，此时 data 数据是最新的，页面尚未和 最新的数据保持同步</span></span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">updated</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;界面上元素的内容：&#x27;</span> + <span class="built_in">document</span>.getElementById(<span class="string">&#x27;h3&#x27;</span>).innerText)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;data 中的 msg 数据是：&#x27;</span> + <span class="built_in">this</span>.msg)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// updated 事件执行的时候，页面和 data 数据已经保持同步了，都是最新的</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="组件声明"><a href="#组件声明" class="headerlink" title="组件声明"></a>组件声明</h2><p>在<code>/src/main.js</code>入口js中进行声明<strong>全局组件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入子组件</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld&#x27;</span></span><br><span class="line"><span class="comment">// 创建全局组件</span></span><br><span class="line">Vue.component(<span class="string">&#x27;hello-world&#x27;</span>, HelloWorld);</span><br><span class="line"><span class="comment">// 使用：在App.vue中直接使用&lt;hello-world/&gt;</span></span><br></pre></td></tr></table></figure>

<p>父组件，子组件之间互相调用</p>
<p><code>App.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;「测试游记」&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 定义组件名称</span></span></span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        components: &#123; <span class="comment">//声明子组件</span></span></span><br><span class="line">            HelloWorld,</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                title: <span class="string">&#x27;测试游记&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>HelloWorld.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        props: &#123; <span class="comment">//从父组件获取msg</span></span></span><br><span class="line"><span class="javascript">            msg: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">            title: <span class="built_in">Number</span>,</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g73z1ltw7cj31b30u0qib.jpg" alt="调用"></p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><ul>
<li>创建单页面应用</li>
<li>官方路由组件，实现前端路由功能</li>
</ul>
<h3 id="在项目路径下安装"><a href="#在项目路径下安装" class="headerlink" title="在项目路径下安装"></a>在项目路径下安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cnpm install vue-router</span></span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br></pre></td></tr></table></figure>

<h3 id="借鉴官方操作"><a href="#借鉴官方操作" class="headerlink" title="借鉴官方操作"></a>借鉴官方操作</h3><p><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/dev/examples/basic/app.js">https://github.com/vuejs/vue-router/blob/dev/examples/basic/app.js</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g740bkqkgej31b30u0quk.jpg" alt="官方实例"></p>
<p>在<code>/src/router/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0.安装并导入vue-router</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. Use plugin. 使用组件</span></span><br><span class="line"><span class="comment">// This installs &lt;router-view&gt; and &lt;router-link&gt;,</span></span><br><span class="line"><span class="comment">// and injects $router and $route to all router-enabled child components</span></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Define route components 定义组件或导入组件</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&#x27;../components/HelloWorld.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> greeting <span class="keyword">from</span> <span class="string">&#x27;../components/greeting.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ProjectsList <span class="keyword">from</span> <span class="string">&#x27;../components/ProjectsList.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> HomeWokr0917 <span class="keyword">from</span> <span class="string">&#x27;../components/HomeWork0917.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> HomeWokr0917_1 <span class="keyword">from</span> <span class="string">&#x27;../components/HomeWork0917_1.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;../components/Login.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Login_ui <span class="keyword">from</span> <span class="string">&#x27;../components/Login_ui.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Create the router 创建路由</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: HelloWorld&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">&#x27;/greeting&#x27;</span>, <span class="attr">component</span>: greeting&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">&#x27;/projectslist&#x27;</span>, <span class="attr">component</span>: ProjectsList&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: Login&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">&#x27;/login_ui&#x27;</span>, <span class="attr">component</span>: Login_ui&#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.导出路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<p>修改<code>/src/main.js</code>，添加下面内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入vue router对象</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App), <span class="comment">//渲染App根组件</span></span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改<code>/src/App.vue</code>的<code>template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;「测试游记」&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>访问<code>\</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74061hn8aj31b30u0h0t.jpg" alt="主页"></p>
<p>访问<code>http://localhost:8080/login</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7406hb0bsj31b30u0dwb.jpg" alt="登录页"></p>
<p>在<code>App.vue</code>中添加：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login_ui&quot;</span>&gt;</span>登录-ui<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/greeting&quot;</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/projectslist&quot;</span>&gt;</span>项目<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g740ahq22kj31b30u0nek.jpg" alt="导航栏"></p>
<h3 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: HelloWorld, <span class="attr">name</span>: <span class="string">&#x27;index&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;index&#x27;&#125;&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span>&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>在组件中可以通过<code>this.$router</code>来获取查询字符串参数</p>
<p>访问<code>http://localhost:8080/greeting?name=zx&amp;age=18</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g740j8gzumj31b30u07qb.jpg" alt="查询"></p>
<p>修改<code>/src/components/greeting.vue</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">&#x27;Hello Python&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;zhongxin&#x27;</span>,</span><br><span class="line">        dream: <span class="string">&#x27;小目标&#x27;</span>,</span><br><span class="line">        isNotFlag: <span class="literal">false</span>,</span><br><span class="line">        username: <span class="built_in">this</span>.$route.query.name,</span><br><span class="line">        age: <span class="built_in">this</span>.$route.query.age,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g740l6h1f3j31b30u01ai.jpg" alt="动态修改"></p>
<h3 id="路径参数"><a href="#路径参数" class="headerlink" title="路径参数"></a>路径参数</h3><p>修改<code>/src/router/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;/greeting/:username/:age&#x27;</span>, <span class="attr">component</span>: greeting&#125;,</span><br></pre></td></tr></table></figure>

<p>修改<code>/src/components/greeting.vue</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        message: <span class="string">&#x27;Hello Python&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;zhongxin&#x27;</span>,</span><br><span class="line">        dream: <span class="string">&#x27;小目标&#x27;</span>,</span><br><span class="line">        isNotFlag: <span class="literal">false</span>,</span><br><span class="line">        username: <span class="built_in">this</span>.$route.params.username,</span><br><span class="line">        age: <span class="built_in">this</span>.$route.params.age,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g740own76ej31b30u0x1i.jpg" alt="image-20190918220105014"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E4%BA%94)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E4%BA%94)/" itemprop="url">测试开发进阶(十五)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:34+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E4%BA%94)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(十五)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-十五"><a href="#测试开发进阶-十五" class="headerlink" title="测试开发进阶(十五)"></a>测试开发进阶(十五)</h1><p><strong>欢迎关注我呀～「测试游记」「zx94_11」</strong></p>
<h2 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h2><blockquote>
<p>ajax技术的目的是让javascript发送http请求，与后台通信，获取数据和信息。</p>
</blockquote>
<ul>
<li>同步</li>
<li>异步</li>
</ul>
<ul>
<li>局部刷新</li>
<li>无刷新</li>
</ul>
<blockquote>
<p>ajax可以实现局部刷新，也叫做无刷新，无刷新指的是整个页面不刷新，只是局部刷新，ajax可以自己发送http请求，不用通过浏览器的地址栏，所以页面整体不会刷新，ajax获取到后台数据，更新页面显示数据的部分，就做到了页面局部刷新。</p>
</blockquote>
<p>常用参数：</p>
<ol>
<li>url 请求地址</li>
<li>type 请求方式，默认是’GET’，常用的还有’POST’</li>
<li>dataType 设置返回的数据格式，常用的是’json’格式，也可以设置为’html’</li>
<li>data 设置发送给服务器的数据</li>
<li>success 设置请求成功后的回调函数</li>
<li>error 设置请求失败后的回调函数</li>
<li>async 设置是否异步，默认值是’true’，表示异步</li>
</ol>
<h2 id="集合实例"><a href="#集合实例" class="headerlink" title="集合实例"></a>集合实例</h2><h3 id="使用ajax发送账号密码信息"><a href="#使用ajax发送账号密码信息" class="headerlink" title="使用ajax发送账号密码信息"></a>使用ajax发送账号密码信息</h3><p>首先使用Flask编写一份简单的后台代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  测试数据</span></span><br><span class="line">user_info = &#123;</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&#x27;python01&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;lemonban&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;post&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>():</span></span><br><span class="line">    data = request.form</span><br><span class="line">    <span class="comment"># 判断账号，密码是否正确</span></span><br><span class="line">    <span class="keyword">if</span> user_info.get(<span class="string">&#x27;user&#x27;</span>) == data.get(<span class="string">&#x27;user&#x27;</span>) <span class="keyword">and</span> user_info.get(<span class="string">&#x27;pwd&#x27;</span>) == data.get(<span class="string">&#x27;pwd&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="string">&quot;1&quot;</span>, <span class="string">&quot;data&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;成功&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="string">&quot;0&quot;</span>, <span class="string">&quot;data&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;密码有误&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p><code>request.form</code>获取到前端传递过来的内容，判断一下账号密码是否正确</p>
<ul>
<li>正确：以<code>json</code>格式返回<code>&#123;&#39;code&#39;: &quot;1&quot;, &quot;data&quot;: None, &quot;msg&quot;: &quot;成功&quot;&#125;</code></li>
<li>错误：以<code>json</code>格式返回<code>&#123;&#39;code&#39;: &quot;0&quot;, &quot;data&quot;: None, &quot;msg&quot;: &quot;密码有误&quot;&#125;</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> 案例一，表单发送ajax请求登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    账号: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    密码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;dl&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>前端html由两个输入框，一个按钮组成。现在点击<code>登录</code>按钮触发<code>ajax</code>请求</p>
<p>现在<code>main.js</code>中写上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>表示：<strong>页面加载完毕后执行的js代码</strong></p>
<p>然后在写登录按钮的<code>点击事件</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#dl&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>从html上拿到账号和密码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = $(<span class="string">&#x27;#username&#x27;</span>).val();</span><br><span class="line"><span class="keyword">var</span> pwd = $(<span class="string">&#x27;#password&#x27;</span>).val();</span><br></pre></td></tr></table></figure>

<p>发送ajax请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">&#x27;post&#x27;</span>, <span class="comment">//请求类型</span></span><br><span class="line">    url: <span class="string">&#x27;/login&#x27;</span>, <span class="comment">//请求地址</span></span><br><span class="line">    data: &#123; <span class="comment">//请求参数</span></span><br><span class="line">        <span class="string">&quot;user&quot;</span>: user,</span><br><span class="line">        <span class="string">&quot;pwd&quot;</span>: pwd</span><br><span class="line">    &#125;,</span><br><span class="line">    dataType: <span class="string">&#x27;json&#x27;</span>,<span class="comment">//预期后台返回类型</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>可以编写<code>.done</code>和<code>.fail</code>来处理ajax发送成功和失败后的操作</p>
<p>现在做成，成功且状态码正确弹框提示「登录成功」，成功但状态码错误弹框提示「登录失败」，ajax发送失败提示「请求失败」</p>
<p>其中<code>data</code>是请求后返回的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.done(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123; <span class="comment">//data:请求返回的参数</span></span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="keyword">if</span> (data.code === <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">&#x27;登录失败&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;请求失败&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>整体代码为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#dl&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> user = $(<span class="string">&#x27;#username&#x27;</span>).val();</span><br><span class="line">    <span class="keyword">var</span> pwd = $(<span class="string">&#x27;#password&#x27;</span>).val();</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&#x27;post&#x27;</span>, <span class="comment">//请求类型</span></span><br><span class="line">        url: <span class="string">&#x27;/login&#x27;</span>, <span class="comment">//请求地址</span></span><br><span class="line">        data: &#123; <span class="comment">//请求参数</span></span><br><span class="line">            <span class="string">&quot;user&quot;</span>: user,</span><br><span class="line">            <span class="string">&quot;pwd&quot;</span>: pwd</span><br><span class="line">        &#125;,</span><br><span class="line">        dataType: <span class="string">&#x27;json&#x27;</span>,<span class="comment">//预期后台返回类型</span></span><br><span class="line">    &#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123; <span class="comment">//data:请求返回的参数</span></span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">        <span class="keyword">if</span> (data.code === <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">            alert(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            alert(<span class="string">&#x27;登录失败&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">&#x27;请求失败&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6q61zq05aj31go0cegp0.jpg" alt="输入正确账号密码"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6q6297zzhj31gs0cgwhv.jpg" alt="输入错误账号密码"></p>
<p>关闭flask服务后</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6q630tctoj31hc0ck423.jpg" alt="关闭后台后"></p>
<h3 id="使用ajax获取并修改下拉框"><a href="#使用ajax获取并修改下拉框" class="headerlink" title="使用ajax获取并修改下拉框"></a>使用ajax获取并修改下拉框</h3><p>事先准备好两段数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">project_data = &#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">                <span class="string">&quot;data&quot;</span>: [&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;前程贷&quot;</span>, <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1001&quot;</span>&#125;,</span><br><span class="line">                         &#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;智慧金融&quot;</span>, <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1002&quot;</span>&#125;,</span><br><span class="line">                         &#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;生鲜到家&quot;</span>, <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1003&quot;</span>&#125;,</span><br><span class="line">                         &#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;柠檬班app&quot;</span>, <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1004&quot;</span>&#125;],</span><br><span class="line">                <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;四个项目&quot;</span>,</span><br><span class="line">                &#125;</span><br><span class="line"><span class="comment"># 接口数据</span></span><br><span class="line">interface_data = &#123;</span><br><span class="line">    <span class="string">&quot;1001&quot;</span>: &#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">             <span class="string">&quot;data&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;前程贷登录1001&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;前程贷注册1001&quot;</span>&#125;],</span><br><span class="line">             <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;2个接口&quot;</span>, &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;1002&quot;</span>: &#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">             <span class="string">&quot;data&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;智慧-登录1002&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;智慧-注册1002&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;智慧-贷款1004&quot;</span>&#125;, ],</span><br><span class="line">             <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;3个接口&quot;</span>, &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;1003&quot;</span>: &#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">             <span class="string">&quot;data&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;生鲜-登录1003&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;生鲜-注册1003&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;生鲜下单1003&quot;</span>&#125;, ],</span><br><span class="line">             <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;3个接口&quot;</span>, &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;1004&quot;</span>: &#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">             <span class="string">&quot;data&quot;</span>: [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;app登录1004&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;app注册1004&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;app报名1004&quot;</span>&#125;,</span><br><span class="line">                      &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;app缴费1004&quot;</span>&#125;,</span><br><span class="line">                      ],</span><br><span class="line">             <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;4个接口&quot;</span>, &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6q654bu8qj30oa094aco.jpg" alt="效果"></p>
<p>现在需要使用<code>get</code>来获取项目内容,所以<code>flask</code>部分代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取项目列表</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/pro_list&#x27;</span>, methods=[<span class="string">&#x27;get&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pro_list</span>():</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(project_data)</span><br></pre></td></tr></table></figure>

<p>所以我使用<code>ajax</code>发送<code>get</code>请求访问<code>/pro_list</code>再把他写到下拉框里面就可以了</p>
<p>下拉框的修改采用字符串拼接的方式：<code>var option = &#39;&lt;option value=&quot;&#39; + res[i].id + &#39;&quot;&gt;&#39; + res[i].title + &#39;&lt;/option&gt;&#39;;</code>用<code>for</code>循环将它从数据中读取出来一个个填入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当页面加载完毕之后，发送ajax请求获取项目和接口</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/pro_list&#x27;</span>,</span><br><span class="line">    type: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (data.code === <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 成功后 将项目数据加载到页面</span></span><br><span class="line">        <span class="keyword">var</span> res = data.data;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> res) &#123;</span><br><span class="line">            <span class="keyword">var</span> option = <span class="string">&#x27;&lt;option value=&quot;&#x27;</span> + res[i].id + <span class="string">&#x27;&quot;&gt;&#x27;</span> + res[i].title + <span class="string">&#x27;&lt;/option&gt;&#x27;</span>;</span><br><span class="line">            $(<span class="string">&#x27;#pro&#x27;</span>).append(option)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(data.msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;请求失败&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>接口部分下拉框是跟随项目的修改而改变的，所以需要使用<code>change</code>并获取到项目的<code>value</code>内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取接口列表</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/interface&#x27;</span>, methods=[<span class="string">&#x27;post&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">interface</span>():</span></span><br><span class="line">    inter_id = request.form.get(<span class="string">&#x27;pro_id&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> inter_id:</span><br><span class="line">        res_data = interface_data.get(inter_id)</span><br><span class="line">        <span class="keyword">if</span> res_data:</span><br><span class="line">            <span class="keyword">return</span> jsonify(res_data)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;0&quot;</span>, <span class="string">&quot;data&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;没有该项目&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;0&quot;</span>, <span class="string">&quot;data&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;请求参数不能为空&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>后台代码中可以从<code>request.form.get(&#39;pro_id&#39;)</code>看出，ajax需要传递一个<code>pro_id</code>的属性</p>
<p><code>&#39;pro_id&#39;: $(this).val()</code>就可以直接拿到下拉框的<code>value</code>值了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当页面上的项目选项选择了之后，发送请求获取该项目的接口</span></span><br><span class="line">$(<span class="string">&#x27;#pro&#x27;</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        url: <span class="string">&#x27;/interface&#x27;</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            <span class="string">&#x27;pro_id&#x27;</span>: $(<span class="built_in">this</span>).val(),</span><br><span class="line">        &#125;,</span><br><span class="line">        dataType: <span class="string">&#x27;json&#x27;</span></span><br><span class="line">    &#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (data.code === <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// 情况接口选择框中的数据</span></span><br><span class="line">            $(<span class="string">&#x27;#interface&#x27;</span>).empty();</span><br><span class="line">            <span class="comment">// 成功后 将项目数据加载到页面</span></span><br><span class="line">            <span class="keyword">var</span> res = data.data;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            <span class="keyword">for</span> (i <span class="keyword">in</span> res) &#123;</span><br><span class="line">                <span class="keyword">var</span> option = <span class="string">&#x27;&lt;option value=&quot;&quot;&gt;&#x27;</span> + res[i].name + <span class="string">&#x27;&lt;/option&gt;&#x27;</span>;</span><br><span class="line">                $(<span class="string">&#x27;#interface&#x27;</span>).append(option)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>所以一份ajax请求为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">&#x27;xxx&#x27;</span>, <span class="comment">// 类型 get post ...</span></span><br><span class="line">    url: <span class="string">&#x27;xxx&#x27;</span>, <span class="comment">//地址 同域名下</span></span><br><span class="line">    data: &#123;<span class="string">&#x27;xxx&#x27;</span>: <span class="string">&#x27;xxx&#x27;</span>&#125;, <span class="comment">// post等发送数据时要使用</span></span><br><span class="line">    dataType: <span class="string">&#x27;xxx&#x27;</span>,<span class="comment">//预期后台返回类型</span></span><br><span class="line">    </span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123; <span class="comment">//data-&gt;接口返回的内容</span></span><br><span class="line">    <span class="comment">//成功后done</span></span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 失败后fail</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AD)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AD)/" itemprop="url">测试开发进阶(十六)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:34+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E5%8D%81%E5%85%AD)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(十六)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-十六"><a href="#测试开发进阶-十六" class="headerlink" title="测试开发进阶(十六)"></a>测试开发进阶(十六)</h1><p><strong>欢迎关注我呀～「测试游记」「zx94_11」</strong></p>
<h2 id="后续部分"><a href="#后续部分" class="headerlink" title="后续部分"></a>后续部分</h2><h3 id="到底什么是测试开发"><a href="#到底什么是测试开发" class="headerlink" title="到底什么是测试开发"></a>到底什么是测试开发</h3><ul>
<li>一定不仅是测试</li>
</ul>
<blockquote>
<ol>
<li>非常敏锐的开发视角</li>
<li>极其强大的开发能力</li>
</ol>
</blockquote>
<ul>
<li>一定不是开发</li>
</ul>
<blockquote>
<ol>
<li>无需严谨的校验</li>
<li>无需完美的用户体验</li>
</ol>
</blockquote>
<h3 id="测试开发平台是产品吗"><a href="#测试开发平台是产品吗" class="headerlink" title="测试开发平台是产品吗"></a>测试开发平台是产品吗</h3><p>对于一个<strong>不是产品</strong>的东西，我们测开（或者领导）对它的要求是什么？</p>
<ul>
<li>效率</li>
</ul>
<blockquote>
<p>两周内开发出一个平台</p>
</blockquote>
<ul>
<li>至少能实现基本自动化测试</li>
<li>无需花里胡哨的功能</li>
<li>无需严谨的校验</li>
<li>能用轮子的尽量用轮子</li>
<li>能少写的一段代码就少写一段</li>
</ul>
<h3 id="测试开发的价值，理念"><a href="#测试开发的价值，理念" class="headerlink" title="测试开发的价值，理念"></a>测试开发的价值，理念</h3><ul>
<li>看得懂大神写的代码，也能从中获取启发</li>
<li>能改大神的代码，去除糟粕，取其精华</li>
</ul>
<h3 id="测试开发课程到底学什么？"><a href="#测试开发课程到底学什么？" class="headerlink" title="测试开发课程到底学什么？"></a>测试开发课程到底学什么？</h3><ul>
<li>编程思维重于一切</li>
<li>轮子</li>
<li>快速开发的理念「敏捷开发」</li>
</ul>
<h2 id="Vue框架"><a href="#Vue框架" class="headerlink" title="Vue框架"></a>Vue框架</h2><ul>
<li>前端三大主流框架之一</li>
</ul>
<blockquote>
<p>Angular.js</p>
<p>React.js</p>
<p>Vue.js</p>
</blockquote>
<ul>
<li>简单小巧</li>
</ul>
<blockquote>
<p>使用gzip压缩后，只有20kb左右</p>
<p>入门容易</p>
</blockquote>
<ul>
<li>自动进行响应式更新</li>
</ul>
<blockquote>
<p>只需关注前端业务逻辑，无需操作DOM</p>
</blockquote>
<ul>
<li>高级特性</li>
</ul>
<blockquote>
<p>解耦视图和数据</p>
<p>可复用组建</p>
<p>前端路由</p>
<p>状态管理</p>
<p>虚拟DOM</p>
</blockquote>
<h3 id="MVVM模式"><a href="#MVVM模式" class="headerlink" title="MVVM模式"></a>MVVM模式</h3><ul>
<li>类似于MVC(Java)和Django(MVT)</li>
</ul>
<blockquote>
<p>M</p>
<ul>
<li>模型</li>
<li>从后端获取的数据</li>
</ul>
<p>V</p>
<ul>
<li>视图</li>
<li>界面展示</li>
</ul>
<p>VM</p>
<ul>
<li>视图模型</li>
<li>核心控制</li>
</ul>
</blockquote>
<h2 id="Vue-demo"><a href="#Vue-demo" class="headerlink" title="Vue-demo"></a>Vue-demo</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>「测试游记」<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">            data:&#123;</span><br><span class="line"><span class="javascript">                msg:<span class="string">&#x27;Hello Python&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vv3ycdfgj30lq0act9l.jpg" alt="展示" style="zoom:50%;" />

<img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vv509tr2j30mq0vwq51.jpg" alt="相应式更新" style="zoom:50%;" />

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// Vue实例创建,会控制id为app元素中的所有内容</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// Vue的实例 MVVM中的VM</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">&#x27;#app&#x27;</span>, <span class="comment">// 控制的区域</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// data代表数据 -&gt; MVVM中的M</span></span></span><br><span class="line">        data:&#123;</span><br><span class="line"><span class="javascript">            msg:<span class="string">&#x27;Hello Python&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MVVM模式中的V--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h2><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vvjyo4m4j31320f40sm.jpg" alt="Component Tree"></p>
<ul>
<li>模块化</li>
</ul>
<blockquote>
<p>以不同的组件，来划分不同的功能模块</p>
</blockquote>
<ul>
<li>复用</li>
<li>高效</li>
<li>解耦</li>
</ul>
<h2 id="前端工程化，组件化"><a href="#前端工程化，组件化" class="headerlink" title="前端工程化，组件化"></a>前端工程化，组件化</h2><p>安装Node.js:<a target="_blank" rel="noopener" href="http://nodejs.cn/download/">http://nodejs.cn/download/</a></p>
<p>查看版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> node -v</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm -v <span class="comment"># 相当于python中的pip</span></span></span><br></pre></td></tr></table></figure>



<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vvqb0qkcj316y0u0tgl.jpg" alt="查看版本"></p>
<p>使用淘宝npm镜像:<a target="_blank" rel="noopener" href="http://npm.taobao.org/">http://npm.taobao.org/</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install -g cnpm --registry=https://registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure>

<h2 id="安装vue-cli脚手架"><a href="#安装vue-cli脚手架" class="headerlink" title="安装vue-cli脚手架"></a>安装vue-cli脚手架</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 注意Linux或Mac 可能需要使用sudo -i进入管理员模式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cnpm install -g @vue/cli</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -g:全局</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vvurm7hhj316y0u0tro.jpg" alt="安装vue-cli脚手架"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vw2qjefuj31bi0u01b1.jpg" alt="查看安装结果"></p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vue create 项目名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 选择default</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vw62m9vgj316y0u0123.jpg" alt="image-20190911212004424"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vw9qku3ij316y0u07gy.jpg" alt="创建"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm run serve <span class="comment">#开启项目</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vwimcpenj316y0u0do7.jpg" alt="开启"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vwiwx9i4j31b30u0tpu.jpg" alt="开启"></p>
<p>node_modules：系统库</p>
<p>public/：单界面</p>
<p>src ：需要压缩的部分</p>
<p>/src/assets:资源（字体，图片等）</p>
<p>/src/components:组件</p>
<p>main.js：相当于一个main函数，最先加载</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入Vue.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 导入App.vue根组件</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App), <span class="comment">//渲染App根组件</span></span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>App.vue:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--template用于展示给用户，相当于MVVM中的V--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--在父组件中给子组件传值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;Welcome to Your Vue.js App&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 定义组件名称</span></span></span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        components: &#123; <span class="comment">//声明子组件</span></span></span><br><span class="line">            HelloWorld</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>/src/components/HelloWorld.vue被当作子组件传入</p>
<p>修改<code>App.vue</code>，<code>&lt;HelloWorld msg=&quot;「测试游记」&quot;/&gt;</code>把msg传入<code>HelloWorld.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--template用于展示给用户，相当于MVVM中的V--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--在父组件中给子组件传值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;「测试游记」&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改<code>HelloWorld.vue</code>中的内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>查看页面</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vx4ta6qzj31060u07dk.jpg" alt="页面展示"></p>
<p><code>HelloWorld</code>组件里面的msg内容改变的原因：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        props: &#123; <span class="comment">//从父组件获取msg</span></span></span><br><span class="line"><span class="javascript">            msg: <span class="built_in">String</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="创建一个组件"><a href="#创建一个组件" class="headerlink" title="创建一个组件"></a>创建一个组件</h2><p>在<code>/src/components</code>新建一个<code>greeting.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;greeting&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>填充</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line">        插值表达式：</span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;greeting&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="comment">// &#123;&#125; -&gt; 对象</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                message: <span class="string">&#x27;Hello Python&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在<code>App.vue</code>里面声明</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> greeting <span class="keyword">from</span> <span class="string">&#x27;./components/greeting.vue&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 定义组件名称</span></span></span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        components: &#123; <span class="comment">//声明子组件</span></span></span><br><span class="line">            HelloWorld,</span><br><span class="line">            greeting</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import greeting from &#x27;./components/greeting.vue&#x27;</span><br><span class="line">components: &#123; //声明子组件</span><br><span class="line">            HelloWorld,</span><br><span class="line">            greeting</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vxhrwqgfj31060u0ajr.jpg" alt="插值"></p>
<p>修改颜色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.msg</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: red;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6vxjd5wz5j31060u0wo6.jpg" alt="修改颜色"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81)/" itemprop="url">测试开发进阶(二十)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二十)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二十"><a href="#测试开发进阶-二十" class="headerlink" title="测试开发进阶(二十)"></a>测试开发进阶(二十)</h1><h2 id="Django基础"><a href="#Django基础" class="headerlink" title="Django基础"></a>Django基础</h2><h3 id="1-为什么要使用框架来开发"><a href="#1-为什么要使用框架来开发" class="headerlink" title="1.为什么要使用框架来开发"></a>1.为什么要使用框架来开发</h3><ul>
<li>站在巨人的肩膀上</li>
<li>提升开发效率</li>
<li>只关注业务逻辑的实现，不关心底层建设</li>
</ul>
<h3 id="2-Django-vs-Flask"><a href="#2-Django-vs-Flask" class="headerlink" title="2.Django vs Flask"></a>2.Django vs Flask</h3><ul>
<li>Django</li>
</ul>
<blockquote>
<ul>
<li>大而全</li>
<li>入门简单</li>
<li>最流行</li>
<li>类似于精装修的房子</li>
</ul>
</blockquote>
<ul>
<li>Flaks</li>
</ul>
<blockquote>
<ul>
<li>轻量级</li>
<li>定制化程度高</li>
<li>流行</li>
<li>高手的玩偶</li>
<li>类似于毛坯房</li>
</ul>
</blockquote>
<h3 id="3-Django是什么"><a href="#3-Django是什么" class="headerlink" title="3.Django是什么"></a>3.Django是什么</h3><p><em>Django makes it easier to build better Web apps more quickly and with less code.</em></p>
<h3 id="4-特点"><a href="#4-特点" class="headerlink" title="4.特点"></a>4.特点</h3><ul>
<li>提供创建项目工程自动化工具</li>
<li>数据库ORM支持</li>
<li>模版</li>
<li>表单</li>
<li>Admin管理站点</li>
<li>文件管理</li>
<li>认证权限</li>
<li>session机制</li>
<li>缓存</li>
</ul>
<h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><h3 id="命令行创建"><a href="#命令行创建" class="headerlink" title="命令行创建"></a>命令行创建</h3><ol>
<li>安装Django</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip install Django</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建项目</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> django-admin startproject 项目名</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>运行项目</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python manage.py runserver</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py runserver ip:端口</span></span><br></pre></td></tr></table></figure>

<h3 id="使用Pycharm创建项目"><a href="#使用Pycharm创建项目" class="headerlink" title="使用Pycharm创建项目"></a>使用Pycharm创建项目</h3><p>注意：使用Pycharm专业版</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a8xphz3vj318w0u0n8f.jpg" alt="image-20190924071941486"></p>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a95o5rclj31b30u0nca.jpg" alt="启动1"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a96fvfu8j326m0gidk9.jpg" alt="启动2"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a968dxchj31b30u0wv2.jpg" alt="启动3"></p>
<h3 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h3><p>修改<code>settings.py</code>中的</p>
<ul>
<li><code>LANGUAGE_CODE</code> 为 <code>zh-hans</code></li>
<li><code>TIME_ZONE</code> 为 <code>Asia/Shanghai</code></li>
</ul>
<p>页面展示的内容就会变成中文</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a97aoyvrj31b30u0tpc.jpg" alt="中文展示"></p>
<h2 id="创建子应用"><a href="#创建子应用" class="headerlink" title="创建子应用"></a>创建子应用</h2><ul>
<li>业务功能模块复用</li>
<li>将工程项目拆分为不同的子功能模块，以子应用的形式存在</li>
<li>各功能模块间可以保持相对的独立</li>
<li>可以将该模块代码整体复制过去</li>
</ul>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python manage.pt startapp 子应用</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a9aupo76j317u0mce2f.jpg" alt="使用Pycharm创建"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a9borp1kj326w0ok43j.jpg" alt="创建子应用"></p>
<h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><p>在全局配置文件<code>settings.py</code>中<code>INSTALLED_APPS</code>添加<code>&#39;projects.apps.ProjectsConfig&#39;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="comment"># 注册子应用</span></span><br><span class="line">    <span class="comment"># 子应用名.apps.子应用名首字母大写Config</span></span><br><span class="line">    <span class="string">&#x27;projects.apps.ProjectsConfig&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="子应用创建一个视图"><a href="#子应用创建一个视图" class="headerlink" title="子应用创建一个视图"></a>子应用创建一个视图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># projects/views.py</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」&lt;/h1&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LearnDjango/urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> projects.views <span class="keyword">import</span> index</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;index/&#x27;</span>, index),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>刷新页面后可以发现首页消失</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a9gl87jhj31b30u0185.jpg" alt="刷新"></p>
<p>根据提示访问：<code>http://127.0.0.1:8000/index/</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7a9h8ynkxj31b30u0gyt.jpg" alt="index页面"></p>
<p><code>LearnDjango/urls.py</code>：</p>
<blockquote>
<p>全局路由配置</p>
<ol>
<li>urlpatterns为固定名称的列表</li>
<li>列表中的一个元素，就代表一条路由</li>
<li>从上到下进行匹配，如果能匹配上，Django会导入和调用path函数第二个参数指定的视图(或子路由)</li>
<li>如果匹配不上会自动抛出404异常</li>
<li></li>
</ol>
</blockquote>
<h3 id="使用子路由"><a href="#使用子路由" class="headerlink" title="使用子路由"></a>使用子路由</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># projects/urls.py</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@Describe: urls</span></span><br><span class="line"><span class="string">@Author: zhongxin</span></span><br><span class="line"><span class="string">@Time: 2019-09-24 07:42</span></span><br><span class="line"><span class="string">@Email: 490336534@qq.com</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> index</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, index),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LearnDjango/urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;index/&#x27;</span>, include(<span class="string">&#x27;projects.urls&#x27;</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>每个应用(模块)都会维护一个子路由(当前应用的路由消息)</p>
<p>跟主路由一样，也是由上到下进行匹配</p>
<p>能匹配上，则执行path第二个参数指定的视图，匹配不上抛出404异常</p>
</blockquote>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h4 id="函数视图"><a href="#函数视图" class="headerlink" title="函数视图"></a>函数视图</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」&lt;/h1&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>上面就是一个<code>函数视图</code></p>
<p>视图函数第一个参数<code>request</code>是HttpRequest对象，包含前端用户的所有请求信息</p>
<p><strong>必须返回</strong>一个HttpResponse对象或者子对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」GET请求&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」POST请求&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」其他请求&lt;/h1&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>使用<code>postman</code>进行测试</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aa54mtvej319s0u016o.jpg" alt="GET请求"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aa5bx7jpj319s0u0k5l.jpg" alt="POST请求"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aa5k6tdnj319s0u07io.jpg" alt="其他请求"></p>
<h4 id="类视图"><a href="#类视图" class="headerlink" title="类视图"></a>类视图</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># projects/views.py</span></span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    index 主页类视图</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」类视图GET请求&lt;/h1&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」类视图POST请求&lt;/h1&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># projects/urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> projects <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aaabz8s8j319s0u0k65.jpg" alt="类视图GET请求"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aaaj9w6oj319s0u07ja.jpg" alt="类视图POST请求"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aab2ze6nj319s0u0wt9.jpg" alt="类视图其他请求"></p>
<p>可以看到其他请求返回了<code>405</code></p>
<h3 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h3><p>新建<code>templates/demo.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>「测试游记」<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>「测试游记」模版<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改视图<code>return render(request,&#39;demo.html&#39;)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    index 主页类视图</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;demo.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h1&gt;「测试游记」类视图POST请求&lt;/h1&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>查看页面</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7aae606buj31b30u0qg9.jpg" alt="页面"></p>
<h2 id="MVT"><a href="#MVT" class="headerlink" title="MVT"></a>MVT</h2><p>M：模型(Model) 与MVC中的M功能相同，负责和数据库交互，进行数据处理</p>
<p>V：视图(View) 与MVC中的C功能相同，接收请求，进行业务处理，返回响应</p>
<p>T：模版(Template)与MVC中的V功能相同，负责构造要返回的html页面</p>
<p><code>数据库</code>  &lt;——–&gt;<code>M模型</code> &lt;–请求/返回数据–&gt;<code>V视图</code> &lt;–请求/返回模版内容–&gt;<code>T模版</code>&lt;–展示–&gt;<code>客户端</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C)/" itemprop="url">测试开发进阶(二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二"><a href="#测试开发进阶-二" class="headerlink" title="测试开发进阶(二)"></a>测试开发进阶(二)</h1><h2 id="结构化工程"><a href="#结构化工程" class="headerlink" title="结构化工程"></a>结构化工程</h2><p><a target="_blank" rel="noopener" href="https://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html">https://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html</a></p>
<ul>
<li>readme： 对项目的整体介绍，同时也是一份使用手册</li>
<li>LICENS：阐述该项目的许可说明和授权</li>
<li>setup.py：通过setup把核心代码打包</li>
<li>api_test：存放项目的核心代码</li>
<li>requirements.txt：项目依赖的第三方库</li>
<li>docs：包的参考文档</li>
<li>tests：代码的测试</li>
<li>makefile：同于项目的管理，根据项目需求添加其他的文件和目录</li>
</ul>
<h2 id="数据类型扩展"><a href="#数据类型扩展" class="headerlink" title="数据类型扩展"></a>数据类型扩展</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>数值</p>
<ul>
<li><p>整数</p>
</li>
<li><p>浮点数</p>
</li>
<li><p>布尔类型</p>
</li>
<li><p>decimal</p>
</li>
<li><p>复数</p>
</li>
</ul>
<p>序列类型</p>
<ul>
<li>字符串</li>
<li>元祖</li>
<li>列表</li>
</ul>
<blockquote>
<p>元祖在定义的时候就确认了存放的空间，内存固定，占用空间较小</p>
<p>列表的空间可以动态变化，内存占用的空间比元祖大的多</p>
<p><strong>在数据固定的情况下使用元祖</strong></p>
</blockquote>
<p>散列</p>
<ul>
<li>字典</li>
<li>集合</li>
</ul>
<h3 id="命名元祖"><a href="#命名元祖" class="headerlink" title="命名元祖"></a>命名元祖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br></pre></td></tr></table></figure>

<p>普通元祖：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tu = (<span class="string">&#x27;zx&#x27;</span>, <span class="string">&#x27;1994&#x27;</span>, <span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">print(tu[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>命名元祖：</p>
<p>使用<code>namedtuple</code>相当于创建了一个类，<code>s1</code>相当于实例话了一个包含<code>name</code>,<code>age</code>,<code>gender</code>三个属性的类。</p>
<p><code>__main__</code>：当前模块下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"></span><br><span class="line">student = namedtuple(<span class="string">&#x27;Student&#x27;</span>, [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;gender&#x27;</span>])</span><br><span class="line">print(<span class="built_in">type</span>(student)) <span class="comment"># &lt;class &#x27;type&#x27;&gt; 一个类	</span></span><br><span class="line"></span><br><span class="line">s1 = student(<span class="string">&#x27;zx&#x27;</span>, <span class="string">&#x27;1994&#x27;</span>, <span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">print(<span class="built_in">type</span>(s1)) <span class="comment"># &lt;class &#x27;__main__.Student&#x27;&gt;</span></span><br><span class="line">print(s1.name) <span class="comment"># zx</span></span><br><span class="line">print(s1[<span class="number">0</span>]) <span class="comment"># zx</span></span><br></pre></td></tr></table></figure>

<h3 id="推导式"><a href="#推导式" class="headerlink" title="推导式"></a>推导式</h3><h4 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h4><p>普通列表创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">urls = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">101</span>,<span class="number">10</span>):</span><br><span class="line">    urls.append(<span class="string">f&#x27;http://....?page=<span class="subst">&#123;i&#125;</span>&#x27;</span>)</span><br><span class="line">print(urls)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[&#x27;http://....?page=0&#x27;, &#x27;http://....?page=10&#x27;, &#x27;http://....?page=20&#x27;, &#x27;http://....?page=30&#x27;, &#x27;http://....?page=40&#x27;, &#x27;http://....?page=50&#x27;, &#x27;http://....?page=60&#x27;, &#x27;http://....?page=70&#x27;, &#x27;http://....?page=80&#x27;, &#x27;http://....?page=90&#x27;, &#x27;http://....?page=100&#x27;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>列表推导式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urls = [<span class="string">f&#x27;http://....?page=<span class="subst">&#123;i&#125;</span>&#x27;</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">101</span>,<span class="number">10</span>)]</span><br><span class="line">print(urls)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[&#x27;http://....?page=0&#x27;, &#x27;http://....?page=10&#x27;, &#x27;http://....?page=20&#x27;, &#x27;http://....?page=30&#x27;, &#x27;http://....?page=40&#x27;, &#x27;http://....?page=50&#x27;, &#x27;http://....?page=60&#x27;, &#x27;http://....?page=70&#x27;, &#x27;http://....?page=80&#x27;, &#x27;http://....?page=90&#x27;, &#x27;http://....?page=100&#x27;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>三目运算</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> a &gt; <span class="number">5</span>:</span><br><span class="line">    print(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">4</span></span><br><span class="line">res = <span class="number">5</span> <span class="keyword">if</span> a &gt; <span class="number">5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="comment"># (判断语句成立)if(判断语句)else(判断语句不成立)</span></span><br><span class="line">print(res) <span class="comment"># 0</span></span><br><span class="line">res = <span class="number">5</span> <span class="keyword">if</span> a &gt; <span class="number">5</span> <span class="keyword">else</span> (<span class="string">&#x27;=&#x27;</span> <span class="keyword">if</span> a &gt; <span class="number">5</span> <span class="keyword">else</span> <span class="string">&quot;!&quot;</span>)</span><br><span class="line">print(res) <span class="comment"># !</span></span><br></pre></td></tr></table></figure>
<p>结合列表推导式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>] <span class="comment"># [0, 2, 4, 6, 8]</span></span><br><span class="line">[i <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -<span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) ] <span class="comment"># [0, -1, 2, -1, 4, -1, 6, -1, 8, -1]</span></span><br></pre></td></tr></table></figure>

<p>####字典推导式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;i <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125; </span><br><span class="line"><span class="comment"># 集合&#123;1, 2, 3&#125;</span></span><br><span class="line"></span><br><span class="line">dic = &#123;i: <span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125; </span><br><span class="line"><span class="comment"># 字典&#123;1: 1, 2: 1, 3: 1&#125;</span></span><br><span class="line"></span><br><span class="line">dic = &#123;k: v <span class="keyword">for</span> k <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">for</span> v <span class="keyword">in</span> [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]&#125;</span><br><span class="line"><span class="comment"># &#123;1: 1, 2: 1, 3: 1&#125; 错误 ❌❌❌</span></span><br><span class="line">dic = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>])&#125;</span><br><span class="line"><span class="comment"># &#123;1: 3, 2: 2, 3: 1&#125; 正确 ✅✅✅</span></span><br><span class="line"><span class="comment"># 其实就是：</span></span><br><span class="line"><span class="built_in">dict</span>(<span class="built_in">zip</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]))</span><br></pre></td></tr></table></figure>

<h4 id="生成器表达式"><a href="#生成器表达式" class="headerlink" title="生成器表达式"></a>生成器表达式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tu = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="comment"># &lt;generator object &lt;genexpr&gt; at 0x11433d138&gt;</span></span><br><span class="line"><span class="built_in">next</span>(tu) <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">next</span>(tu) <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">next</span>(tu) <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">next</span>(tu) <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">next</span>(tu) <span class="comment"># 4</span></span><br><span class="line"><span class="built_in">next</span>(tu) </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;/Users/zhongxin/Desktop/py/zx/02/0807_2.py&quot;, line 33, in &lt;module&gt;</span></span><br><span class="line"><span class="string">    print(next(tu))</span></span><br><span class="line"><span class="string">StopIteration</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="迭代器和生成器"><a href="#迭代器和生成器" class="headerlink" title="迭代器和生成器"></a>迭代器和生成器</h3><p>生成器的作用：当我们要存储大量数据的时候，使用生成器可以节约内存</p>
<p>创建生成器的方式：</p>
<ol>
<li>生成器表达式</li>
<li>yield</li>
</ol>
<blockquote>
<p>只能用于函数中，当一个函数中出现yield这个关键字，那么这个函数就是一个生成器函数。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yield 后面不写东西</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>):</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">res = gen() <span class="comment"># &lt;generator object gen at 0x114203138&gt;	</span></span><br><span class="line"><span class="built_in">next</span>(res) <span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yield 后面写i</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen1</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">res = gen()</span><br><span class="line"><span class="built_in">next</span>(res) <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">next</span>(res) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen3</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>):</span><br><span class="line">        print(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>--*******&#x27;</span>)</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">        print(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>--#######&#x27;</span>)</span><br><span class="line">res = gen3()</span><br><span class="line">print(res)</span><br><span class="line">print(<span class="built_in">next</span>(res))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">第一次next打印内容</span></span><br><span class="line"><span class="string">0--*******</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">print(<span class="built_in">next</span>(res))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">第一次next打印内容</span></span><br><span class="line"><span class="string">0--*******</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">第二次next打印内容</span></span><br><span class="line"><span class="string">0--#######</span></span><br><span class="line"><span class="string">1--*******</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="可迭代对象和迭代器"><a href="#可迭代对象和迭代器" class="headerlink" title="可迭代对象和迭代器"></a>可迭代对象和迭代器</h4><ul>
<li>可迭代对象</li>
</ul>
<blockquote>
<p>对象内部实现了迭代协议的称之为可迭代对象</p>
<p>​    迭代协议：该对象实现了<code>__iter__</code>方法</p>
<ul>
<li><p>可迭代对象都可以使用<code>for</code>循环进行遍历</p>
</li>
<li><p>能够使用<code>for</code>循环进行遍历的都是可迭代对象</p>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> li:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>

<ul>
<li>迭代器</li>
</ul>
<blockquote>
<p>要求：</p>
<ol>
<li>对象实现了迭代协议</li>
<li>内部还要实现<code>__next_</code>方法</li>
</ol>
<blockquote>
<p>next()方法</p>
</blockquote>
<p>通过iter()可以将可迭代对象转化为迭代器</p>
</blockquote>
<p>生成器是一种特殊的迭代器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line">item = <span class="built_in">iter</span>(li)</span><br><span class="line">print(item) <span class="comment"># &lt;list_iterator object at 0x1032c8390&gt;</span></span><br><span class="line">print(<span class="built_in">next</span>(item)) <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<p>迭代器和生成器的区别：</p>
<ol>
<li>生成器相比迭代器多了三种方法：<code>send()</code>,<code>close()</code>,<code>throw()</code></li>
</ol>
<ul>
<li>send()：与生成器内部进行数据交互</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span>():</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">10</span>:</span><br><span class="line">        j = <span class="keyword">yield</span> i</span><br><span class="line">        print(j)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">g = gen()</span><br><span class="line">print(g) <span class="comment"># &lt;generator object gen at 0x114203138&gt;</span></span><br><span class="line">print(<span class="built_in">next</span>(g)) <span class="comment"># 0</span></span><br><span class="line">print(<span class="built_in">next</span>(g)) <span class="comment"># None 1</span></span><br><span class="line">print(g.send(<span class="number">8</span>)) <span class="comment"># 8 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen1</span>():</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">10</span>:</span><br><span class="line">        j = <span class="keyword">yield</span> i</span><br><span class="line">        <span class="keyword">if</span> j <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            i = j</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">g = gen1()</span><br><span class="line">print(<span class="built_in">next</span>(g)) <span class="comment"># 0</span></span><br><span class="line">print(g.send(<span class="number">8</span>)) <span class="comment"># 9</span></span><br><span class="line">print(g.send(<span class="number">5</span>)) <span class="comment"># 6</span></span><br><span class="line">print(g.send(<span class="number">10</span>))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;/Users/zhongxin/Desktop/py/zx/02/0807_5.py&quot;, line 26, in &lt;module&gt;</span></span><br><span class="line"><span class="string">    print(g.send(10))</span></span><br><span class="line"><span class="string">StopIteration</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>



          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%80)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%80)/" itemprop="url">测试开发进阶(二十一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%80)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二十一)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二十一"><a href="#测试开发进阶-二十一" class="headerlink" title="测试开发进阶(二十一)"></a>测试开发进阶(二十一)</h1><p><strong>欢迎关注我的公众号「测试游记」</strong></p>
<h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h2><h3 id="前后端不分离"><a href="#前后端不分离" class="headerlink" title="前后端不分离"></a>前后端不分离</h3><ul>
<li>后端需要控制数据的展示</li>
<li>前后端耦合比较高</li>
<li>多终端复用性差</li>
<li>任务区分不明显</li>
</ul>
<h3 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h3><ul>
<li>当前主流</li>
<li>后端只对数据进行处理，只提供数据</li>
<li>前端效率，页面由前端负责</li>
<li>解耦和</li>
<li>前后端同时开始开发，缩小业务上线周期</li>
</ul>
<h2 id="接收参数"><a href="#接收参数" class="headerlink" title="接收参数"></a>接收参数</h2><h3 id="url传参"><a href="#url传参" class="headerlink" title="url传参"></a>url传参</h3><p>访问：<code>http://127.0.0.1:8000/index?a=1&amp;b=2</code></p>
<p>调试代码</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c1u8unnkj31a80c6tb2.jpg" alt="调试"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c1uiqkfij31bd0u0gv8.jpg" alt="调试"></p>
<ul>
<li><code>request.GET</code>返回一个类字典的内容</li>
<li>查询字符串参数，如果有多个相同的key，使用<code>request.GET.get(&#39;xxx&#39;)</code>获取的是最后一个值</li>
<li>使用<code>request.GET.getlist(&#39;xxx&#39;)</code>可以获取到多个相同key值的参数</li>
</ul>
<p>访问：<code>http://127.0.0.1:8000/index/?a=1&amp;b=2&amp;a=3</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c20k9653j31bd0u0aju.jpg" alt="request.GET"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c20s0c9pj31bd0u0gtt.jpg" alt="request.GET.get(&#39;xxx&#39;)"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c218ng56j31bd0u0n60.jpg" alt="request.GET.getlist(&#39;xxx&#39;)"></p>
<h3 id="form表单"><a href="#form表单" class="headerlink" title="form表单"></a>form表单</h3><p>使用<code>Postman</code>发起请求</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c24ug0f4j319s0u0na5.jpg" alt="postman发请求"></p>
<p>调试代码</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c257yl4ij31aa0gqdjd.jpg" alt="调试"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c25hey1xj31bd0u07e0.jpg" alt="调试"></p>
<p>与<code>GET</code>类似</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request.POST.get(<span class="string">&#x27;a&#x27;</span>) <span class="comment"># &#x27;3&#x27;</span></span><br><span class="line">request.POST.getlist(<span class="string">&#x27;a&#x27;</span>) <span class="comment"># [&#x27;1&#x27;,&#x27;3&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c26ow4c0j31bd0u0wmp.jpg" alt="get"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c271x4bdj31bd0u0n5y.jpg" alt="getlist"></p>
<h3 id="json格式"><a href="#json格式" class="headerlink" title="json格式"></a>json格式</h3><p>使用<code>postman</code>发送json格式</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c2ahvi0zj319s0u0an0.jpg" alt="json格式"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c2b896s1j31bd0u0aia.jpg" alt="body"></p>
<p>转化为python内容，使用<code>json</code>模块的<code>loads</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c2dvogugj31ho0sq0yv.jpg" alt="转化"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">r_dict = json.loads(request.body.decode())</span><br></pre></td></tr></table></figure>

<h3 id="url路径参数"><a href="#url路径参数" class="headerlink" title="url路径参数"></a>url路径参数</h3><p>在<code>projects/urls.py</code>的<code>urlpatterns</code>中添加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;&lt;int:pk&gt;/&#x27;</span>, views.IndexView.as_view()),</span><br></pre></td></tr></table></figure>

<p><code>int    </code>为路径参数类型转换器</p>
<p><code>:</code>左边被转换器，右边为参数别名</p>
<ul>
<li>int</li>
<li>slug</li>
<li>uuid</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;demo.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>访问：<code>http://127.0.0.1:8000/index/100/</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c31jtlpqj31nu0ryjxl.jpg" alt="路径参数"></p>
<h2 id="返回Json"><a href="#返回Json" class="headerlink" title="返回Json"></a>返回Json</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># projects/views.py</span></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexView</span>(<span class="params">View</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;zx&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(data)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c3hcevdtj319s0u07hk.jpg" alt="测试"></p>
<h2 id="ORM框架"><a href="#ORM框架" class="headerlink" title="ORM框架"></a>ORM框架</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li>把类和数据表进行映射</li>
<li>通过类和对象就能操作它所对应表格中的数据「增删改查」(CRUD)</li>
</ul>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ul>
<li>配置数据库连接信息</li>
</ul>
<ol>
<li>创建数据库和用户</li>
<li>配置数据库</li>
<li>安装mysqlclient</li>
</ol>
<ul>
<li>在models.py中定义模型类</li>
<li>迁移</li>
<li>通过类和对象操作完成数据库增删改查操作</li>
</ul>
<p>使用<code>Navicat</code>连接<code>mysql</code>后创建一个数据库</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c3xdfme0j30tg0fejv6.jpg" alt="Navicat"></p>
<p>新建一个用户</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c45bu6ckj31b30u07nr.jpg" alt="新建用户"></p>
<p>修改权限</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c47klh4jj31b30u0kdp.jpg" alt="修改权限"></p>
<p><strong>需要使用专业版！</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c3tofojgj30zc0u0tjl.jpg" alt="连接数据库"></p>
<p>点击<code>Download missing driver files</code>安装数据库连接软件</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c459bxw8j30z10u0tn7.jpg" alt="连接测试"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c48rfur1j30io0rg0w4.jpg" alt="显示databases"></p>
<p>安装连接库</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7c439lob3j31080u07fw.jpg" alt="image-20190925220311323"></p>
<p>修改<code>LearnDjango/settings.py</code>配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>, <span class="comment"># 指定引擎</span></span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;my_django&#x27;</span>, <span class="comment"># databases名</span></span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;my_django&#x27;</span>, <span class="comment"># 数据库用户名</span></span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="comment">#数据库密码</span></span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="comment"># 主机IP</span></span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span> <span class="comment">#连接端口</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%83)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%83)/" itemprop="url">测试开发进阶(二十七)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%83)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二十七)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二十七"><a href="#测试开发进阶-二十七" class="headerlink" title="测试开发进阶(二十七)"></a>测试开发进阶(二十七)</h1><p><strong>欢迎关注我的公众号「测试游记」</strong></p>
<h2 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h2><h3 id="PrimaryKeyRelatedField"><a href="#PrimaryKeyRelatedField" class="headerlink" title="PrimaryKeyRelatedField"></a>PrimaryKeyRelatedField</h3><p><code>interfaces/serializer.py</code>中创建序列化器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> interfaces.models <span class="keyword">import</span> Interfaces</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InterfaceModelSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Interfaces</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">IN[2]: from interfaces.serializer import InterfaceModelSerializer</span><br><span class="line">IN[3]: InterfaceModelSerializer()</span><br><span class="line"></span><br><span class="line">Out[4]: </span><br><span class="line">InterfaceModelSerializer():</span><br><span class="line">    id = IntegerField(label=&#x27;ID&#x27;, read_only=True)</span><br><span class="line">    name = CharField(help_text=&#x27;项目名称&#x27;, label=&#x27;项目名称&#x27;, max_length=200, validators=[&lt;UniqueValidator(queryset=Interfaces.objects.all())&gt;])</span><br><span class="line">    tester = CharField(help_text=&#x27;测试人员&#x27;, label=&#x27;测试人员&#x27;, max_length=50)</span><br><span class="line">    desc = CharField(allow_blank=True, allow_null=True, help_text=&#x27;简要描述&#x27;, label=&#x27;简要描述&#x27;, required=False, style=&#123;&#x27;base_template&#x27;: &#x27;textarea.html&#x27;&#125;)</span><br><span class="line">    project = PrimaryKeyRelatedField(help_text=&#x27;所属项目&#x27;, label=&#x27;所属项目&#x27;, queryset=Projects.objects.all())</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="数据库模型中的外键字段默认会生产PrimaryKeyRelatedField序列化器字段"><a href="#数据库模型中的外键字段默认会生产PrimaryKeyRelatedField序列化器字段" class="headerlink" title="数据库模型中的外键字段默认会生产PrimaryKeyRelatedField序列化器字段"></a>数据库模型中的外键字段默认会生产PrimaryKeyRelatedField序列化器字段</h4><h4 id="序列化输出的值为外键ID值"><a href="#序列化输出的值为外键ID值" class="headerlink" title="序列化输出的值为外键ID值"></a>序列化输出的值为外键ID值</h4></blockquote>
<p>序列化输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from interfaces.models import Interfaces</span><br><span class="line">one_interface = Interfaces.objects.get(id=1)</span><br><span class="line">one_interface</span><br><span class="line">Out[7]: &lt;Interfaces: Interfaces object (1)&gt;</span><br><span class="line">interface_serializer = InterfaceModelSerializer(one_interface)</span><br><span class="line">interface_serializer.data</span><br><span class="line">Out[9]: &#123;&#x27;id&#x27;: 1, &#x27;name&#x27;: &#x27;登录接口&#x27;, &#x27;tester&#x27;: &#x27;zx&#x27;, &#x27;desc&#x27;: &#x27;66&#x27;, &#x27;project&#x27;: 1&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82miheb2gj31eg0aa410.jpg" alt="序列化输出"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82mjiwi3dj313q08wabl.jpg" alt="数据库"></p>
<h3 id="字符串关联字段StringRelatedField"><a href="#字符串关联字段StringRelatedField" class="headerlink" title="字符串关联字段StringRelatedField"></a>字符串关联字段StringRelatedField</h3><p>重写<code>project</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">project = serializers.StringRelatedField(label=<span class="string">&#x27;所属项目&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from interfaces.models import Interfaces</span><br><span class="line">from interfaces.serializer import InterfaceModelSerializer</span><br><span class="line">one = Interfaces.objects.get(id=1)</span><br><span class="line">one_s = InterfaceModelSerializer(one)</span><br><span class="line">one_s.data</span><br><span class="line">Out[6]: &#123;&#x27;id&#x27;: 1, &#x27;project&#x27;: &#x27;测试游记&#x27;, &#x27;name&#x27;: &#x27;登录接口&#x27;, &#x27;tester&#x27;: &#x27;zx&#x27;, &#x27;desc&#x27;: &#x27;66&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82molqip3j31j20boaco.jpg" alt="字符串关联字段"></p>
<blockquote>
<h4 id="StringRelatedField-此字段将被序列化为关联对象字符串表达形式-str-方法返回值"><a href="#StringRelatedField-此字段将被序列化为关联对象字符串表达形式-str-方法返回值" class="headerlink" title="StringRelatedField 此字段将被序列化为关联对象字符串表达形式(__str__方法返回值)"></a>StringRelatedField 此字段将被序列化为关联对象字符串表达形式(<code>__str__</code>方法返回值)</h4></blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">project = serializers.SlugRelatedField(slug_field=<span class="string">&#x27;tester&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="指定字段数据SlugRelatedField"><a href="#指定字段数据SlugRelatedField" class="headerlink" title="指定字段数据SlugRelatedField"></a>指定字段数据SlugRelatedField</h3><blockquote>
<p>SlugRelatedField 此字段被序列化为关联对象的指定字段数据</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">project = serializers.SlugRelatedField(slug_field=<span class="string">&#x27;name&#x27;</span>,read_only=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from interfaces.serializer import InterfaceModelSerializer</span><br><span class="line">from interfaces.models import Interfaces</span><br><span class="line">one = Interfaces.objects.get(id=1)</span><br><span class="line">one_s = InterfaceModelSerializer(one)</span><br><span class="line">one_s.data</span><br><span class="line">Out[6]: &#123;&#x27;id&#x27;: 1, &#x27;project&#x27;: &#x27;测试游记&#x27;, &#x27;name&#x27;: &#x27;登录接口&#x27;, &#x27;tester&#x27;: &#x27;zx&#x27;, &#x27;desc&#x27;: &#x27;66&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82n1p6wodj31k408wq5e.jpg" alt="SlugRelatedField"></p>
<h3 id="关联对象的序列化器"><a href="#关联对象的序列化器" class="headerlink" title="关联对象的序列化器"></a>关联对象的序列化器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> projects.serializer <span class="keyword">import</span> ProjectModelSerializer</span><br><span class="line">project = ProjectModelSerializer(label=<span class="string">&#x27;所属项目&#x27;</span>, read_only=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from interfaces.serializer import InterfaceModelSerializer</span><br><span class="line">from interfaces.models import Interfaces</span><br><span class="line">one = Interfaces.objects.get(id=1)</span><br><span class="line">one_s = InterfaceModelSerializer(one)</span><br><span class="line">one_s.data</span><br><span class="line">Out[6]: &#123;&#x27;id&#x27;: 1, &#x27;project&#x27;: OrderedDict([(&#x27;id&#x27;, 1), (&#x27;name&#x27;, &#x27;测试游记&#x27;), (&#x27;tester&#x27;, &#x27;zx&#x27;), (&#x27;programer&#x27;, &#x27;zhong&#x27;), (&#x27;publish_app&#x27;, &#x27;公众号&#x27;), (&#x27;desc&#x27;, &#x27;666&#x27;)]), &#x27;name&#x27;: &#x27;登录接口&#x27;, &#x27;tester&#x27;: &#x27;zx&#x27;, &#x27;desc&#x27;: &#x27;66&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82n3ikj73j31xm0gk0wh.jpg" alt="对象序列化器"></p>
<h3 id="反向指定"><a href="#反向指定" class="headerlink" title="反向指定"></a>反向指定</h3><blockquote>
<h3 id="父表中默认不会生产关联字段-从表-可以手动指定，字段名默认为子表模型类名「小写-set」"><a href="#父表中默认不会生产关联字段-从表-可以手动指定，字段名默认为子表模型类名「小写-set」" class="headerlink" title="父表中默认不会生产关联字段(从表),可以手动指定，字段名默认为子表模型类名「小写_set」"></a>父表中默认不会生产关联字段(从表),可以手动指定，字段名默认为子表模型类名「小写_set」</h3></blockquote>
<p><code>projects.serializer.ProjectModelSerializer</code>中添加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interfaces_set = serializers.StringRelatedField(many=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from projects.serializer import ProjectModelSerializer</span><br><span class="line">from projects.models import Projects</span><br><span class="line">p = Projects.objects.get(id=1)</span><br><span class="line">ProjectModelSerializer(p).data</span><br><span class="line">Out[5]: &#123;&#x27;id&#x27;: 1, &#x27;name&#x27;: &#x27;测试游记&#x27;, &#x27;interfaces_set&#x27;: [&#x27;Interfaces object (1)&#x27;, &#x27;Interfaces object (2)&#x27;], &#x27;tester&#x27;: &#x27;zx&#x27;, &#x27;programer&#x27;: &#x27;zhong&#x27;, &#x27;publish_app&#x27;: &#x27;公众号&#x27;, &#x27;desc&#x27;: &#x27;666&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82naxo90tj31t80gujvd.jpg" alt="反向指定"></p>
<h2 id="优化视图-请求"><a href="#优化视图-请求" class="headerlink" title="优化视图-请求"></a>优化视图-请求</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br></pre></td></tr></table></figure>

<p>当视图继承<code>APIView</code>之后，请求实例方法中的第二个参数<code>request</code>为<code>Request对象</code>，是对Django中的<code>HttpRequest对象</code>进行的拓展</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82nv4dgsaj313m0u0dxz.jpg" alt="Request对象"></p>
<h3 id="发送json"><a href="#发送json" class="headerlink" title="发送json"></a>发送json</h3><p><code>http :8000/project/ &lt; projects.json</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82nwubc28j31fq0u0k1h.jpg" alt="request.data"></p>
<h3 id="发送form表单"><a href="#发送form表单" class="headerlink" title="发送form表单"></a>发送form表单</h3><p><code>http -f :8000/project/ &lt; projects.form</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=测试游记项目&amp;leader=icon&amp;tester=zhongxin&amp;programer=zhong3&amp;publish_app=公众号&amp;desc=无</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82nzy5p6ij31fq0u0n83.jpg" alt="request.data"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82o03ht0cj31fq0u0dqs.jpg" alt="request.POST"></p>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><ul>
<li>对Django中的HttpRequest进行拓展</li>
</ul>
<blockquote>
<p>根据请求头中的Content-Type自动进行解析</p>
<p>无论前端发送那种格式数据，都可以以相同的方式读取</p>
</blockquote>
<ul>
<li>request.data</li>
</ul>
<blockquote>
<p>类似于Django中的request.POST和request.FILES</p>
<p>可以对POST，PUT，PATCH的请求体进行解析</p>
<p>支持form表单传参，支持json格式传参</p>
</blockquote>
<ul>
<li>request.query_params</li>
</ul>
<blockquote>
<p>类似Django中的request.GET</p>
<p>获取查询字符串参数</p>
</blockquote>
<ul>
<li>支持Django.request中所有的对象和方法</li>
</ul>
<h2 id="优化视图-渲染"><a href="#优化视图-渲染" class="headerlink" title="优化视图-渲染"></a>优化视图-渲染</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br></pre></td></tr></table></figure>

<p><code>LearnDjango/settings.py</code>中添加：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定默认渲染类</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">&quot;DEFAULT_RENDERER_CLASSES&quot;</span>: (</span><br><span class="line">        <span class="comment"># json渲染器为第一优先级</span></span><br><span class="line">        <span class="string">&quot;rest_framework.renderers.JSONRenderer&quot;</span>,</span><br><span class="line">        <span class="comment"># 可浏览的API渲染为第二优先级</span></span><br><span class="line">        <span class="string">&quot;rest_framework.renderers.BrowsableAPIRenderer&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改<code>projects.views.ProjectDetail#get</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">    project = self.get_object(pk)</span><br><span class="line">    serializer = ProjectSerializer(instance=project)</span><br><span class="line">    <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure>
<h3 id="渲染1"><a href="#渲染1" class="headerlink" title="渲染1"></a>渲染1</h3><p><code> http :8000/project/1/</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(LearnDjango) zhongxindeMacBook-Pro:apitest zhongxin$ http :8000/project/1/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Allow: GET, PUT, DELETE, HEAD, OPTIONS</span><br><span class="line">Content-Length: 120</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Date: Fri, 18 Oct 2019 13:34:44 GMT</span><br><span class="line">Server: WSGIServer/0.2 CPython/3.7.1</span><br><span class="line">Vary: Accept, Origin, Cookie</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;desc&quot;: &quot;666&quot;,</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;leader&quot;: &quot;zx_94&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;测试游记&quot;,</span><br><span class="line">    &quot;programer&quot;: &quot;zhong&quot;,</span><br><span class="line">    &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">    &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82ojmzujrj316y0u0156.jpg" alt="返回json"></p>
<h3 id="渲染2"><a href="#渲染2" class="headerlink" title="渲染2"></a>渲染2</h3><p>浏览器中输入：<code>http://127.0.0.1:8000/project/1/</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82oifeql5j31b30u0neu.jpg" alt="返回web界面"></p>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><p>参数</p>
<ul>
<li>data</li>
</ul>
<blockquote>
<p>序列化处理后的数据</p>
<p>一般为serializer.data「python基本数据类型：字典，嵌套字典的列表」</p>
</blockquote>
<ul>
<li>status</li>
</ul>
<blockquote>
<p>状态码，默认200</p>
</blockquote>
<ul>
<li>template_name</li>
</ul>
<blockquote>
<p>模版名称，使用HTMLRenderer渲染时需要指明</p>
</blockquote>
<ul>
<li>headers</li>
</ul>
<blockquote>
<p>用于存放响应头信息的字典</p>
</blockquote>
<ul>
<li>content_type</li>
</ul>
<blockquote>
<p>响应头中的Content-Type</p>
<p>通常此参数无需设置，会自动根据前端所需类型数据来设置该参数</p>
</blockquote>
<h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82omty9k0j30u00wqai5.jpg" alt="状态码"></p>
<p>修改<code>get</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">    project = self.get_object(pk)</span><br><span class="line">    serializer = ProjectSerializer(instance=project)</span><br><span class="line">    <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_200_OK)</span><br></pre></td></tr></table></figure>

<h2 id="支持分页，排序的父类GenericAPIView"><a href="#支持分页，排序的父类GenericAPIView" class="headerlink" title="支持分页，排序的父类GenericAPIView"></a>支持分页，排序的父类GenericAPIView</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> GenericAPIView</span><br></pre></td></tr></table></figure>

<ol>
<li>在视图类中指定过滤引擎</li>
<li>指定需要排序的字段</li>
<li>指定查询集</li>
<li>指定模型序列化器</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectsList</span>(<span class="params">GenericAPIView</span>):</span></span><br><span class="line">    <span class="comment"># 1.在视图类中指定过滤引擎</span></span><br><span class="line">    <span class="comment"># OrderingFilter排序</span></span><br><span class="line">    filter_backends = [filters.OrderingFilter]</span><br><span class="line">    <span class="comment"># 2.指定需要排序的字段</span></span><br><span class="line">    ordering_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>]</span><br><span class="line">    <span class="comment"># 3.指定查询集</span></span><br><span class="line">    queryset = Projects.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 4.指定模型序列化器</span></span><br><span class="line">    serializer_class = ProjectModelSerializer</span><br></pre></td></tr></table></figure>

<p>查看<code>rest_framework.generics.GenericAPIView#get_queryset</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Get the list of items for this view.</span></span><br><span class="line"><span class="string">    This must be an iterable, and may be a queryset.</span></span><br><span class="line"><span class="string">    Defaults to using `self.queryset`.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This method should always be used rather than accessing `self.queryset`</span></span><br><span class="line"><span class="string">    directly, as `self.queryset` gets evaluated only once, and those results</span></span><br><span class="line"><span class="string">    are cached for all subsequent requests.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    You may want to override this if you need to provide different</span></span><br><span class="line"><span class="string">    querysets depending on the incoming request.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    (Eg. return a list of items that is specific to the user)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> self.queryset <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, (</span><br><span class="line">        <span class="string">&quot;&#x27;%s&#x27; should either include a `queryset` attribute, &quot;</span></span><br><span class="line">        <span class="string">&quot;or override the `get_queryset()` method.&quot;</span></span><br><span class="line">        % self.__class__.__name__</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    queryset = self.queryset</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(queryset, QuerySet):</span><br><span class="line">        <span class="comment"># Ensure queryset is re-evaluated on each request.</span></span><br><span class="line">        queryset = queryset.<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">return</span> queryset</span><br></pre></td></tr></table></figure>

<p>所以：<code>project_qs = Projects.objects.all()</code>和<code>project_qs = self.get_queryset()</code>一致</p>
<p>查看<code>rest_framework.generics.GenericAPIView#get_serializer</code>和<code>rest_framework.generics.GenericAPIView#get_serializer_class</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_serializer</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Return the serializer instance that should be used for validating and</span></span><br><span class="line"><span class="string">    deserializing input, and for serializing output.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    serializer_class = self.get_serializer_class()</span><br><span class="line">    kwargs[<span class="string">&#x27;context&#x27;</span>] = self.get_serializer_context()</span><br><span class="line">    <span class="keyword">return</span> serializer_class(*args, **kwargs)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Return the class to use for the serializer.</span></span><br><span class="line"><span class="string">    Defaults to using `self.serializer_class`.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    You may want to override this if you need to provide different</span></span><br><span class="line"><span class="string">    serializations depending on the incoming request.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    (Eg. admins get full serialization, others get basic serialization)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> self.serializer_class <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, (</span><br><span class="line">        <span class="string">&quot;&#x27;%s&#x27; should either include a `serializer_class` attribute, &quot;</span></span><br><span class="line">        <span class="string">&quot;or override the `get_serializer_class()` method.&quot;</span></span><br><span class="line">        % self.__class__.__name__</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> self.serializer_class</span><br></pre></td></tr></table></figure>

<p>所以：<code>serializer = ProjectSerializer(instance=project_qs, many=True)</code>和<code>serializer = self.get_serializer(instance=project_qs, many=True)</code>一致</p>
<h2 id="本轮优化后的视图"><a href="#本轮优化后的视图" class="headerlink" title="本轮优化后的视图"></a>本轮优化后的视图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"><span class="keyword">from</span> projects.models <span class="keyword">import</span> Projects</span><br><span class="line"><span class="keyword">from</span> projects.serializer <span class="keyword">import</span> ProjectSerializer, ProjectModelSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> GenericAPIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status, filters</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectsList</span>(<span class="params">GenericAPIView</span>):</span></span><br><span class="line">    <span class="comment"># 1.在视图类中指定过滤引擎</span></span><br><span class="line">    <span class="comment"># OrderingFilter排序</span></span><br><span class="line">    filter_backends = [filters.OrderingFilter]</span><br><span class="line">    <span class="comment"># 2.指定需要排序的字段</span></span><br><span class="line">    ordering_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>, <span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">    <span class="comment"># 3.指定查询集</span></span><br><span class="line">    queryset = Projects.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 4.指定模型序列化器</span></span><br><span class="line">    serializer_class = ProjectModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, reuqest</span>):</span></span><br><span class="line">        project_qs = self.get_queryset()</span><br><span class="line">        project_qs = self.filter_queryset(project_qs)</span><br><span class="line">        serializer = self.get_serializer(instance=project_qs, many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_200_OK)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        serializer = ProjectSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.errors)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_201_CREATED)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectDetail</span>(<span class="params">APIView</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_object</span>(<span class="params">self, pk</span>):</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> Projects.objects.get(<span class="built_in">id</span>=pk)</span><br><span class="line">        <span class="keyword">except</span> Projects.DoesNotExist:</span><br><span class="line">            <span class="keyword">raise</span> Http404</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        project = self.get_object(pk)</span><br><span class="line">        serializer = ProjectSerializer(instance=project)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_200_OK)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        project = self.get_object(pk)</span><br><span class="line">        serializer = ProjectSerializer(instance=project, data=request.data)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.errors)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_201_CREATED)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span>(<span class="params">self, request, pk</span>):</span></span><br><span class="line">        project = self.get_object(pk)</span><br><span class="line">        project.delete()</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;&#125;, status=status.HTTP_204_NO_CONTENT)</span><br></pre></td></tr></table></figure>

<h3 id="正序"><a href="#正序" class="headerlink" title="正序"></a>正序</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82pnfhomyj31b30u0h7f.jpg" alt="正排序"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">zhongxindeMacBook-Pro:~ zhongxin$ http :8000/project/?ordering=id</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Allow: GET, POST, HEAD, OPTIONS</span><br><span class="line">Content-Length: 711</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Date: Fri, 18 Oct 2019 14:14:51 GMT</span><br><span class="line">Server: WSGIServer/0.2 CPython/3.7.1</span><br><span class="line">Vary: Accept, Origin, Cookie</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;666&quot;,</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;interfaces_set&quot;: [</span><br><span class="line">            &quot;Interfaces object (1)&quot;,</span><br><span class="line">            &quot;Interfaces object (2)&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;6666&quot;,</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记1&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong1&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号1&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;666&quot;,</span><br><span class="line">        &quot;id&quot;: 3,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;「测试游记」-创建&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zx&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;「测试游记」&quot;,</span><br><span class="line">        &quot;id&quot;: 7,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;1015项目&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong2&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号2&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;无&quot;,</span><br><span class="line">        &quot;id&quot;: 8,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记项目&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong3&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zhongxin&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">zhongxindeMacBook-Pro:~ zhongxin$ </span><br></pre></td></tr></table></figure>

<h3 id="倒序"><a href="#倒序" class="headerlink" title="倒序"></a>倒序</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">zhongxindeMacBook-Pro:~ zhongxin$ http :8000/project/?ordering=-id</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Allow: GET, POST, HEAD, OPTIONS</span><br><span class="line">Content-Length: 711</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Date: Fri, 18 Oct 2019 14:15:51 GMT</span><br><span class="line">Server: WSGIServer/0.2 CPython/3.7.1</span><br><span class="line">Vary: Accept, Origin, Cookie</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;无&quot;,</span><br><span class="line">        &quot;id&quot;: 8,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记项目&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong3&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zhongxin&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;「测试游记」&quot;,</span><br><span class="line">        &quot;id&quot;: 7,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;1015项目&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong2&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号2&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;666&quot;,</span><br><span class="line">        &quot;id&quot;: 3,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;「测试游记」-创建&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zx&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;6666&quot;,</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;interfaces_set&quot;: [],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记1&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong1&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号1&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;desc&quot;: &quot;666&quot;,</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;interfaces_set&quot;: [</span><br><span class="line">            &quot;Interfaces object (1)&quot;,</span><br><span class="line">            &quot;Interfaces object (2)&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;name&quot;: &quot;测试游记&quot;,</span><br><span class="line">        &quot;programer&quot;: &quot;zhong&quot;,</span><br><span class="line">        &quot;publish_app&quot;: &quot;公众号&quot;,</span><br><span class="line">        &quot;tester&quot;: &quot;zx&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82pnt3r3hj31b30u0aud.jpg" alt="倒排序"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%89)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%89)/" itemprop="url">测试开发进阶(二十三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B8%89)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二十三)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二十三"><a href="#测试开发进阶-二十三" class="headerlink" title="测试开发进阶(二十三)"></a>测试开发进阶(二十三)</h1><p><strong>欢迎关注我的公众号：「测试游记」</strong></p>
<h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><h3 id="c-create"><a href="#c-create" class="headerlink" title="c(create)"></a>c(create)</h3><ul>
<li>使用模型内构造方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span>(<span class="params">self, **kwargs</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Create a new object with the given kwargs, saving it to the database</span></span><br><span class="line"><span class="string">    and returning the created object.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    obj = self.model(**kwargs)</span><br><span class="line">    self._for_write = <span class="literal">True</span></span><br><span class="line">    obj.save(force_insert=<span class="literal">True</span>, using=self.db)</span><br><span class="line">    <span class="keyword">return</span> obj</span><br></pre></td></tr></table></figure>

<p>从代码中可以看出自带了<code>save</code>操作</p>
<h3 id="r-retrieve"><a href="#r-retrieve" class="headerlink" title="r(retrieve)"></a>r(retrieve)</h3><ul>
<li>获取一个数据表的所有数据</li>
</ul>
<blockquote>
<p>返回所有记录组成的模型和对象集合(queryset查询集)</p>
</blockquote>
<ul>
<li>获取指定记录</li>
</ul>
<blockquote>
<p>get</p>
<p>filter</p>
<p>exclude</p>
</blockquote>
<h4 id="获取一个数据的所有记录"><a href="#获取一个数据的所有记录" class="headerlink" title="获取一个数据的所有记录"></a>获取一个数据的所有记录</h4><blockquote>
<p>QuerySet查询集，就相当于一个列表(存放所有项目对象的列表)</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7sr7p92hrj31g40u0k3b.jpg" alt="all"></p>
<p>对QuerySet查询集进行遍历</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7sr9o0trkj31a30u011d.jpg" alt="遍历"></p>
<h4 id="获取单个数据"><a href="#获取单个数据" class="headerlink" title="获取单个数据"></a>获取单个数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.get(<span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 通过.可以获取到具体的内容</span></span><br><span class="line">Projects.objects.get(<span class="built_in">id</span>=<span class="number">1</span>).name</span><br><span class="line">Projects.objects.get(<span class="built_in">id</span>=<span class="number">1</span>).leader</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srcegc8rj31ht0u0124.jpg" alt="get"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srdpjy7pj31g40u0tga.jpg" alt="具体内容"></p>
<ol>
<li>get返回多条记录会报错</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srfw9oz3j313o0u0th1.jpg" alt="错误1"></p>
<ol start="2">
<li>get查询的记录不存在会报出异常</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srgjnxe9j31g40u07bz.jpg" alt="错误2"></p>
<h4 id="获取某一些记录。filter-或者exclude"><a href="#获取某一些记录。filter-或者exclude" class="headerlink" title="获取某一些记录。filter()或者exclude()"></a>获取某一些记录。filter()或者exclude()</h4><p><code>filter</code>查询返回的是一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srkc3cxmj31g40u07g4.jpg" alt="filter"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(leader=<span class="string">&#x27;zx_94&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srktynq3j31g40u04aj.jpg" alt="filter2"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(leader__contains=<span class="string">&#x27;zx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>使用<code>leader__contains</code>获取符合条件的查询集「模糊查询」</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srnxnw2pj314g0u0wpq.jpg" alt="leader__contains"></p>
<p>还有一些其他的操作，可以根据名称或SQL常识进行使用</p>
<p>以<code>i</code>开头(不是单词的一部分，例如<code>in</code>，<code>is</code>等)表示「忽略大小写」</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srqhrafcj30s20k2tck.jpg" alt="其他"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srr9y24ej30s20k2tcr.jpg" alt="其他2"></p>
<p><code>exclude</code>反向查询</p>
<p>下面可以获取到<code>id ！= 1</code>的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.exclude(<span class="built_in">id</span>=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srm1sxn0j31590u0gw8.jpg" alt="image-20191010074604404"></p>
<h4 id="关联查询"><a href="#关联查询" class="headerlink" title="关联查询"></a>关联查询</h4><p>查询语句：<code>外键字段__从表的字段名__条件</code></p>
<p>在<code>tb_interfaces</code>表中添加一条内容</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7srxmfc6kj317807ugmy.jpg" alt="添加内容"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(interfaces__name=<span class="string">&#x27;登录接口&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7sryme6jxj31g40u07gf.jpg" alt="查询"></p>
<p>通过<code>interfaces</code>的<code>name</code>「登录接口」来找到关联表中的具体内容</p>
<p>查看SQL语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> connection</span><br><span class="line">print(connection.queries[-<span class="number">1</span>])</span><br><span class="line">&#123;<span class="string">&#x27;sql&#x27;</span>: <span class="string">&quot;SELECT `tb_projects`.`id`, `tb_projects`.`name`, `tb_projects`.`leader`, `tb_projects`.`tester`, `tb_projects`.`programer`, `tb_projects`.`publish_app`, `tb_projects`.`desc` FROM `tb_projects` INNER JOIN `tb_interfaces` ON (`tb_projects`.`id` = `tb_interfaces`.`project_id`) WHERE `tb_interfaces`.`name` = &#x27;登录接口&#x27;  LIMIT 21&quot;</span>, <span class="string">&#x27;time&#x27;</span>: <span class="string">&#x27;0.001&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="比较查询"><a href="#比较查询" class="headerlink" title="比较查询"></a>比较查询</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(id__gt=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ss73gjocj316b0u07h7.jpg" alt="比较查询"></p>
<blockquote>
<p><code>__gt</code>:大于</p>
<p><code>__gte</code>:大于等于</p>
<p><code>__lt</code>:小于</p>
<p><code>__lte</code>:小于等于</p>
</blockquote>
<h4 id="多条件-或-查询"><a href="#多条件-或-查询" class="headerlink" title="多条件 或 查询"></a>多条件 或 查询</h4><p>以下语句表示查询<code>leader=&#39;zx&#39;</code>或<code>id=1</code>的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(Q(leader=<span class="string">&#x27;zx&#x27;</span>) | Q(<span class="built_in">id</span>=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<h3 id="多条件-与-查询"><a href="#多条件-与-查询" class="headerlink" title="多条件 与 查询"></a>多条件 与 查询</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(leader=<span class="string">&#x27;zx&#x27;</span>, <span class="built_in">id</span>=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h4 id="查询集的操作"><a href="#查询集的操作" class="headerlink" title="查询集的操作"></a>查询集的操作</h4><blockquote>
<p>查询集相当于一个列表，支持列表中的大多数操作（索引，正向切片，for)<br>查询集是对数据库操作的一种优化<br>查询集会缓存结果</p>
</blockquote>
<h3 id="u-update"><a href="#u-update" class="headerlink" title="u(update)"></a>u(update)</h3><p>先获取，后修改，再保存</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p = Projects.objects.get(<span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line">p.leader = <span class="string">&#x27;zx&#x27;</span></span><br><span class="line">p.save()</span><br></pre></td></tr></table></figure>

<h3 id="d-delete"><a href="#d-delete" class="headerlink" title="d(delete)"></a>d(delete)</h3><p>获取后，删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = Projects.objects.get(<span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line">p.delete()</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>从小到大</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(id__gte=<span class="number">3</span>).order_by(<span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>从大到小</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(id__gte=<span class="number">3</span>).order_by(<span class="string">&#x27;-name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>当前一个字段相同，以后一个来排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Projects.objects.<span class="built_in">filter</span>(id__gte=<span class="number">3</span>).order_by(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;-publish_app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="阅读官方文档"><a href="#阅读官方文档" class="headerlink" title="阅读官方文档"></a>阅读官方文档</h2><p><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/">https://docs.djangoproject.com/en/2.2/</a></p>
<p>「<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/intro/">Tutorials</a>」入门：<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/intro/">https://docs.djangoproject.com/en/2.2/intro/</a></p>
<p>「<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/topics/">Topic guides</a>」专题：<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/topics/">https://docs.djangoproject.com/en/2.2/topics/</a></p>
<p>「<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/ref/">Reference guides</a> 」接口：<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/ref/">https://docs.djangoproject.com/en/2.2/ref/</a></p>
<p>「<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/howto/">How-to guides</a> 」进阶内容：<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/en/2.2/howto/">https://docs.djangoproject.com/en/2.2/howto/</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7tgdymn19j31dk0lkjwu.jpg" alt="官方文档"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B9%9D)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="测试游记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B9%9D)/" itemprop="url">测试开发进阶(二十九)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T20:10:33+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/03/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6(%E4%BA%8C%E5%8D%81%E4%B9%9D)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/03/03/测试开发进阶(二十九)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="测试开发进阶-二十九"><a href="#测试开发进阶-二十九" class="headerlink" title="测试开发进阶(二十九)"></a>测试开发进阶(二十九)</h1><p><strong>欢迎关注我的公众号「测试游记」</strong></p>
<h2 id="再次优化"><a href="#再次优化" class="headerlink" title="再次优化"></a>再次优化</h2><p>查看<code>rest_framework.generics.CreateAPIView</code></p>
<p><code>rest_framework.generics.ListAPIView</code></p>
<p>可以看到很多重复的代码</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88eh1f4hkj323t0u0178.jpg" alt="image-20191023202028076"></p>
<p><code>rest_framework.generics.ListCreateAPIView</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListCreateAPIView</span>(<span class="params">mixins.ListModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                        mixins.CreateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                        GenericAPIView</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Concrete view for listing a queryset or creating a model instance.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.create(request, *args, **kwargs)</span><br></pre></td></tr></table></figure>

<p>所以直接继承</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> projects.models <span class="keyword">import</span> Projects</span><br><span class="line"><span class="keyword">from</span> projects.serializer <span class="keyword">import</span> ProjectModelSerializer</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectsList</span>(<span class="params">generics.ListCreateAPIView</span>):</span></span><br><span class="line">    ordering_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>]</span><br><span class="line">    queryset = Projects.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = ProjectModelSerializer</span><br><span class="line">    filter_backends = [DjangoFilterBackend]</span><br><span class="line">    filterset_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>, <span class="string">&#x27;tester&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectDetail</span>(<span class="params">generics.RetrieveUpdateDestroyAPIView</span>):</span></span><br><span class="line">    queryset = Projects.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = ProjectModelSerializer</span><br></pre></td></tr></table></figure>

<h3 id="现有问题"><a href="#现有问题" class="headerlink" title="现有问题"></a>现有问题</h3><ul>
<li>两个类视图，不能合并</li>
<li>有相同的get方法</li>
<li>两个类视图所对应的url地址不一致</li>
</ul>
<h2 id="再次优化-1"><a href="#再次优化-1" class="headerlink" title="再次优化"></a>再次优化</h2><p>优化思路：使用动作来触发，而不是请求方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br></pre></td></tr></table></figure>

<p><code>viewsets</code>不再支持<code>get/post/put/delete</code>等请求方法，而只支持action动作</p>
<p>但是<code>ViewSet</code>类中没有提供<code>get_object()</code>,<code>get_serializer</code>等方法</p>
<p>继承<code>viewsets.GenericViewSet</code></p>
<p>将两个类合成一个类</p>
<p>修改url</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> projects <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;project/&#x27;</span>, views.ProjectsViewSet.as_view(&#123;</span><br><span class="line">        <span class="string">&#x27;get&#x27;</span>: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;post&#x27;</span>: <span class="string">&#x27;create&#x27;</span></span><br><span class="line">    &#125;), name=<span class="string">&#x27;projects_list&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;project/&lt;int:pk&gt;/&#x27;</span>, views.ProjectsViewSet.as_view(&#123;</span><br><span class="line">        <span class="string">&#x27;get&#x27;</span>: <span class="string">&#x27;retrieve&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;put&#x27;</span>: <span class="string">&#x27;update&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;delete&#x27;</span>: <span class="string">&#x27;destroy&#x27;</span></span><br><span class="line">    &#125;), name=<span class="string">&#x27;project_detail&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88fkq05bsj323q0u0dut.jpg" alt="viewsets.ModelViewSet"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> projects.models <span class="keyword">import</span> Projects</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"><span class="keyword">from</span> projects.serializer <span class="keyword">import</span> ProjectModelSerializer</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectsViewSet</span>(<span class="params">viewsets.ModelViewSet</span>):</span></span><br><span class="line">    ordering_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>]</span><br><span class="line">    queryset = Projects.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = ProjectModelSerializer</span><br><span class="line">    filter_backends = [DjangoFilterBackend]</span><br><span class="line">    filterset_fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;leader&#x27;</span>, <span class="string">&#x27;tester&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>Django中</p>
<ul>
<li>View</li>
</ul>
<p>DRF中</p>
<ul>
<li>APIView</li>
<li>GenericAPIView</li>
<li>mixins扩展类</li>
<li>CreateAPIView(合并拓展类)</li>
</ul>
<p>视图集</p>
<blockquote>
<p>action和请求方法的映射</p>
</blockquote>
<ul>
<li>ViewSet</li>
<li>GenericViewSet </li>
<li>CreateViewSet</li>
</ul>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br></pre></td></tr></table></figure>

<ol>
<li>创建SimpleRouter路由对象</li>
<li>注册路由</li>
</ol>
<blockquote>
<p>第一个参数prefix为路由前缀，一般添加为应用名称即可<br>第二个参数viewset为视图集「不要加as_view」</p>
</blockquote>
<ol start="3">
<li>将自动生成的路由添加到列表中</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> projects <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.创建SimpleRouter路由对象</span></span><br><span class="line">router = routers.SimpleRouter()</span><br><span class="line"><span class="comment"># 2.注册路由</span></span><br><span class="line"><span class="comment"># 第一个参数prefix为路由前缀，一般添加为应用名称即可</span></span><br><span class="line"><span class="comment"># 第二个参数viewset为视图集「不要加as_view」</span></span><br><span class="line">router.register(<span class="string">r&#x27;projects&#x27;</span>,views.ProjectsViewSet)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">        <span class="comment"># 将自动生成的路由添加到列表中</span></span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>,include(router.urls))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="action"><a href="#action" class="headerlink" title="action"></a>action</h2><h3 id="自定义action"><a href="#自定义action" class="headerlink" title="自定义action"></a>自定义action</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.decorators <span class="keyword">import</span> action</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">action</span>(<span class="params">methods=<span class="literal">None</span>, detail=<span class="literal">None</span>, url_path=<span class="literal">None</span>, url_name=<span class="literal">None</span>, **kwargs</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Mark a ViewSet method as a routable action.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Set the `detail` boolean to determine if this action should apply to</span></span><br><span class="line"><span class="string">    instance/detail requests or collection/list requests.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    methods = [<span class="string">&#x27;get&#x27;</span>] <span class="keyword">if</span> (methods <span class="keyword">is</span> <span class="literal">None</span>) <span class="keyword">else</span> methods</span><br><span class="line">    methods = [method.lower() <span class="keyword">for</span> method <span class="keyword">in</span> methods]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> detail <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, (</span><br><span class="line">        <span class="string">&quot;@action() missing required argument: &#x27;detail&#x27;&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># name and suffix are mutually exclusive</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwargs <span class="keyword">and</span> <span class="string">&#x27;suffix&#x27;</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">&quot;`name` and `suffix` are mutually exclusive arguments.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">        func.mapping = MethodMapper(func, methods)</span><br><span class="line"></span><br><span class="line">        func.detail = detail</span><br><span class="line">        func.url_path = url_path <span class="keyword">if</span> url_path <span class="keyword">else</span> func.__name__</span><br><span class="line">        func.url_name = url_name <span class="keyword">if</span> url_name <span class="keyword">else</span> func.__name__.replace(<span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        func.kwargs = kwargs</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Set descriptive arguments for viewsets</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> kwargs <span class="keyword">and</span> <span class="string">&#x27;suffix&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">            func.kwargs[<span class="string">&#x27;name&#x27;</span>] = pretty_name(func.__name__)</span><br><span class="line">        func.kwargs[<span class="string">&#x27;description&#x27;</span>] = func.__doc__ <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> func</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br></pre></td></tr></table></figure>

<p>可以使用action装饰器来声明自定义的动作</p>
<p>默认情况下,实例方法名就是动作名</p>
<p><code>methods</code>参数用于指定该动作支持的请求方法，默认为get</p>
<p><code>detail</code>用于指定该动作要处理的是否为详情资源对象「url是否需要传递pk值」</p>
<p>在<code>url.py</code>中添加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;project/names/&#x27;</span>, views.ProjectsViewSet.as_view(&#123;</span><br><span class="line">    <span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;names&#x27;</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>新增序列化器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProjectNameSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Projects</span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在<code>view</code>中添加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@action(<span class="params">methods=[<span class="string">&#x27;get&#x27;</span>], detail=<span class="literal">False</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">names</span>(<span class="params">self, request, *args, **kwargs</span>):</span></span><br><span class="line">    queryset = self.get_queryset()</span><br><span class="line">    serializer = ProjectNameSerializer(instance=queryset, many=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure>

<p>同理添加Interface</p>
<p>需要通过<code>projects/1/interfaces/</code>来拿到<code>id=1</code>的<code>interfaces</code>信息</p>
<p>添加序列化器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InterfacesNameSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Interfaces</span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;tester&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InterfacesByProjectIdSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    interfaces_set = InterfacesNameSerializer(read_only=<span class="literal">True</span>, many=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Projects</span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;interfaces_sets&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>添加自定义action</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@action(<span class="params">detail=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">interfaces</span>(<span class="params">self, reques, *args, **kwargs</span>):</span></span><br><span class="line">    instance = self.get_queryset()</span><br><span class="line">    serializer = InterfacesByProjectIdSerializer(instance=instance)</span><br><span class="line">    <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure>

<h3 id="查看路由"><a href="#查看路由" class="headerlink" title="查看路由"></a>查看路由</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88hbs56wvj31220io0w3.jpg" alt="路由"></p>
<p>添加<code>url_path</code>和<code>url_name</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@action(<span class="params">methods=[<span class="string">&#x27;get&#x27;</span>], detail=<span class="literal">False</span>, url_path=<span class="string">&#x27;nm&#x27;</span>, url_name=<span class="string">&#x27;url_name&#x27;</span></span>)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88hfjb3cfj30u805875b.jpg" alt="修改名称"></p>
<blockquote>
<p>url_path url的路径名<br>url_name url的别名「应用名称-url_name」</p>
</blockquote>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> http :8000/projects/names/</span>		</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88hkaeyd8j31bi0u0ne5.jpg" alt="image-20191023220718885"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%7C%7C%20archive">
              
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zx490336534" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">测试游记</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

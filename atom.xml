<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>测试游记</title>
  
  
  <link href="http://zx490336534.github.io/atom.xml" rel="self"/>
  
  <link href="http://zx490336534.github.io/"/>
  <updated>2021-03-03T14:29:02.849Z</updated>
  <id>http://zx490336534.github.io/</id>
  
  <author>
    <name>测试游记</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java自动化测试(Hybrid应用自动化 35)</title>
    <link href="http://zx490336534.github.io/article/cb028af5.html"/>
    <id>http://zx490336534.github.io/article/cb028af5.html</id>
    <published>2020-10-17T12:22:40.216Z</published>
    <updated>2021-03-03T14:29:02.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-Hybrid应用自动化-35"><a href="#Java自动化测试-Hybrid应用自动化-35" class="headerlink" title="Java自动化测试(Hybrid应用自动化 35)"></a>Java自动化测试(Hybrid应用自动化 35)</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>准备android4.4+版本以上的手机/模拟器</li><li>在app源码中将webview调试模式打开</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webview.setWebContentsDebuggingEnabled(<span class="keyword">true</span>);</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><ul><li>安装UC开发者工具</li></ul><h2 id="查看ChromeDriver版本"><a href="#查看ChromeDriver版本" class="headerlink" title="查看ChromeDriver版本"></a>查看ChromeDriver版本</h2><p>进入<code>设置</code>-&gt;<code>应用</code>，点击<code>显示系统进程</code></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjslu6oar3j30sg1bm45n.jpg" alt="显示系统进程"></p><p>找到<code>Android System WebView</code>,它的版本也就是<code>75.0.3770.143</code></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjslurkg7ej30u01cktia.jpg" alt="Android System WebView"></p><blockquote><p>在chromedriver中找到对应的版本</p><p><a href="https://npm.taobao.org/mirrors/chromedriver/?utm_source=testingpai.com">https://npm.taobao.org/mirrors/chromedriver/?utm_source=testingpai.com</a></p></blockquote><h2 id="使用UC-开发者调试工具定位页面"><a href="#使用UC-开发者调试工具定位页面" class="headerlink" title="使用UC 开发者调试工具定位页面"></a>使用UC 开发者调试工具定位页面</h2><blockquote><p><a href="https://dev.ucweb.com/docs/pwa/docs-zh/xy3whu">https://dev.ucweb.com/docs/pwa/docs-zh/xy3whu</a></p></blockquote><h3 id="修改设置"><a href="#修改设置" class="headerlink" title="修改设置"></a>修改设置</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjsmtrtlehj312f0u0n8g.jpg" alt="设置"></p><h3 id="查看当前页面"><a href="#查看当前页面" class="headerlink" title="查看当前页面"></a>查看当前页面</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjsmulb91fj31a40u01dl.jpg" alt="查看Home"></p><h2 id="进入网页"><a href="#进入网页" class="headerlink" title="进入网页"></a>进入网页</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>{</span><br><span class="line">    androidDriver.findElement(MobileBy.xpath(<span class="string">"//*[@text='柠檬社区']"</span>)).click();</span><br><span class="line">    System.out.println(androidDriver.getContextHandles());<span class="comment">//[NATIVE_APP, WEBVIEW_com.lemon.lemonban]</span></span><br><span class="line">    <span class="comment">//切换到WEBVIEW_com.lemon.lemonban</span></span><br><span class="line">    androidDriver.context(<span class="string">"WEBVIEW_com.lemon.lemonban"</span>);</span><br><span class="line">    <span class="comment">//进入web页面点击注册按钮</span></span><br><span class="line">    androidDriver.findElement(MobileBy.xpath(<span class="string">"//span[contains(text(),'注册')]"</span>)).click();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h2><p>由于腾讯系QQ/微信是基于腾讯自研的X5内核，不是谷歌原生webview，所以调试会有差异</p><p>微信小程序只能够支持手机，模拟器是不行的。</p><h3 id="Step1-打开微信小程序webview开关"><a href="#Step1-打开微信小程序webview开关" class="headerlink" title="Step1:打开微信小程序webview开关"></a>Step1:打开微信小程序webview开关</h3><blockquote><p><a href="https://debugx5.qq.com/">https://debugx5.qq.com/</a></p><p><a href="http://debugmm.qq.com/?forcex5=true">http://debugmm.qq.com/?forcex5=true</a></p></blockquote><h3 id="Step2-UC开发者工具识别小程序的web元素信息"><a href="#Step2-UC开发者工具识别小程序的web元素信息" class="headerlink" title="Step2:UC开发者工具识别小程序的web元素信息"></a>Step2:UC开发者工具识别小程序的web元素信息</h3><h3 id="Step3-确认微信小程序对应的进程名"><a href="#Step3-确认微信小程序对应的进程名" class="headerlink" title="Step3:确认微信小程序对应的进程名"></a>Step3:确认微信小程序对应的进程名</h3><h3 id="Step4-X5内核启动参数配置"><a href="#Step4-X5内核启动参数配置" class="headerlink" title="Step4:X5内核启动参数配置"></a>Step4:X5内核启动参数配置</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持X5内核应用自动化配置</span></span><br><span class="line">desiredCapabilities.setCapability(<span class="string">"recreateChromeDriverSession"</span>, <span class="keyword">true</span>);</span><br><span class="line"><span class="comment">// ChromeOptions 使用来定制启动选项，因为在appium中切换context识别webview的时候，</span></span><br><span class="line"><span class="comment">// 把com.tencent.mm:toolsmp的webview识别成com.tencent.mm的webview</span></span><br><span class="line"><span class="comment">// 为了规避这个问题，加上androidProcess: com.tencent.mm:toolsmp</span></span><br><span class="line">ChromeOptions options = <span class="keyword">new</span> ChromeOptions();</span><br><span class="line">options.setExperimentalOption(<span class="string">"androidProcess"</span>,<span class="string">"com.tencent.mm:appbrand0"</span>);</span><br><span class="line">desiredCapabilities.setCapability(ChromeOptions.CAPABILITY,options);</span><br><span class="line"><span class="comment">// 初始化会默认将chrome浏览器打开，需要将Browser置为空</span></span><br><span class="line">desiredCapabilities.setBrowserName(<span class="string">""</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="Step5-编写脚本实现自动化测试用例"><a href="#Step5-编写脚本实现自动化测试用例" class="headerlink" title="Step5:编写脚本实现自动化测试用例"></a>Step5:编写脚本实现自动化测试用例</h3><blockquote><p>注意：不清除微信的数据的方法</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">capabilities.setCapability(<span class="string">"noReset"</span>, <span class="keyword">true</span>);</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-Hybrid应用自动化-35&quot;&gt;&lt;a href=&quot;#Java自动化测试-Hybrid应用自动化-35&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(Hybrid应用自动化 35)&quot;&gt;&lt;/a&gt;Java自动化测试(Hybrid应用自动化 35)&lt;/h1&gt;&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;准备android4.4+版本以上的手机/模拟器&lt;/li&gt;
&lt;li&gt;在app源码中将webview调试模式打开&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;webview.setWebContentsDebuggingEnabled(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(App特殊元素定位 34)</title>
    <link href="http://zx490336534.github.io/article/f873292f.html"/>
    <id>http://zx490336534.github.io/article/f873292f.html</id>
    <published>2020-10-13T13:28:31.956Z</published>
    <updated>2021-03-03T14:29:02.784Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-App特殊元素定位-34"><a href="#Java自动化测试-App特殊元素定位-34" class="headerlink" title="Java自动化测试(App特殊元素定位 34)"></a>Java自动化测试(App特殊元素定位 34)</h1><h2 id="手势操作-滑动"><a href="#手势操作-滑动" class="headerlink" title="手势操作-滑动"></a>手势操作-滑动</h2><blockquote><p>滑动操作 = 点击屏幕某一点 + 移动 + 松开</p></blockquote><span id="more"></span><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// 滑动操作 = 点击屏幕某一点 + 移动 + 松开</span></span><br><span class="line">    <span class="comment">// 点击 (365,170) 拖动(365,966)</span></span><br><span class="line">    TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    PointOption startPoint = PointOption.point(<span class="number">365</span>, <span class="number">170</span>);</span><br><span class="line">    PointOption endPoint = PointOption.point(<span class="number">365</span>, <span class="number">966</span>);</span><br><span class="line">    touchAction.press(startPoint).moveTo(endPoint).release().perform();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>如上操作不会出现下拉刷新的情况</p><h2 id="滑动决定因素：距离-时间"><a href="#滑动决定因素：距离-时间" class="headerlink" title="滑动决定因素：距离/时间"></a>滑动决定因素：距离/时间</h2><ul><li>滑动距离</li><li>滑动时间</li></ul><p>现在增加滑动的时间</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Duration duration = Duration.ofMillis(<span class="number">2000</span>);</span><br><span class="line">WaitOptions waitOptions = WaitOptions.waitOptions(duration);</span><br><span class="line">touchAction.press(startPoint).waitAction(waitOptions).moveTo(endPoint).release().perform();</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjo2pqc5s0g30ea0msb2d.gif" alt="下拉刷新"></p><p>为了使它更通用使用屏幕的分辨率来计算坐标</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> width = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line"><span class="keyword">int</span> height = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">PointOption startPoint = PointOption.point(width / <span class="number">2</span>, height / <span class="number">4</span>);</span><br><span class="line">PointOption endPoint = PointOption.point(width / <span class="number">2</span>, <span class="number">3</span> * height / <span class="number">4</span>);</span><br></pre></td></tr></tbody></table></figure><p>对滑动进行封装</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向下滑动</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> times：等待时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeDown</span><span class="params">(<span class="keyword">long</span> times)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> width = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    <span class="keyword">int</span> height = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    PointOption startPoint = PointOption.point(width / <span class="number">2</span>, height / <span class="number">4</span>);</span><br><span class="line">    PointOption endPoint = PointOption.point(width / <span class="number">2</span>, <span class="number">3</span> * height / <span class="number">4</span>);</span><br><span class="line">    Duration duration = Duration.ofMillis(times);</span><br><span class="line">    WaitOptions waitOptions = WaitOptions.waitOptions(duration);</span><br><span class="line">    touchAction.press(startPoint).waitAction(waitOptions).moveTo(endPoint).release().perform();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向上滑动</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> times：等待时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeUp</span><span class="params">(<span class="keyword">long</span> times)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> width = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    <span class="keyword">int</span> height = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    PointOption startPoint = PointOption.point(width / <span class="number">2</span>, <span class="number">3</span> * height / <span class="number">4</span>);</span><br><span class="line">    PointOption endPoint = PointOption.point(width / <span class="number">2</span>, height / <span class="number">4</span>);</span><br><span class="line">    Duration duration = Duration.ofMillis(times);</span><br><span class="line">    WaitOptions waitOptions = WaitOptions.waitOptions(duration);</span><br><span class="line">    touchAction.press(startPoint).waitAction(waitOptions).moveTo(endPoint).release().perform();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向左滑动</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> times：等待时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeLeft</span><span class="params">(<span class="keyword">long</span> times)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> width = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    <span class="keyword">int</span> height = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    PointOption startPoint = PointOption.point(width / <span class="number">4</span>, height / <span class="number">2</span>);</span><br><span class="line">    PointOption endPoint = PointOption.point(<span class="number">3</span> * width / <span class="number">4</span>, height / <span class="number">2</span>);</span><br><span class="line">    Duration duration = Duration.ofMillis(times);</span><br><span class="line">    WaitOptions waitOptions = WaitOptions.waitOptions(duration);</span><br><span class="line">    touchAction.press(startPoint).waitAction(waitOptions).moveTo(endPoint).release().perform();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向右滑动</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> times：等待时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeRight</span><span class="params">(<span class="keyword">long</span> times)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> width = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    <span class="keyword">int</span> height = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    PointOption startPoint = PointOption.point(<span class="number">3</span> * width / <span class="number">4</span>, height / <span class="number">2</span>);</span><br><span class="line">    PointOption endPoint = PointOption.point(width / <span class="number">4</span>, height / <span class="number">2</span>);</span><br><span class="line">    Duration duration = Duration.ofMillis(times);</span><br><span class="line">    WaitOptions waitOptions = WaitOptions.waitOptions(duration);</span><br><span class="line">    touchAction.press(startPoint).waitAction(waitOptions).moveTo(endPoint).release().perform();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="手势操作-多点触摸"><a href="#手势操作-多点触摸" class="headerlink" title="手势操作-多点触摸"></a>手势操作-多点触摸</h2><p><code>MultiTouchAction</code>可以模拟用户多点触摸操作</p><ul><li>add:添加</li><li>perform:执行</li></ul><p>实现<code>放大</code>操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">    <span class="comment">//手指1</span></span><br><span class="line">    TouchAction action1 = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    <span class="comment">//手指2</span></span><br><span class="line">    TouchAction action2 = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">    <span class="keyword">int</span> y = androidDriver.manage().window().getSize().getHeight();</span><br><span class="line">    <span class="keyword">int</span> x = androidDriver.manage().window().getSize().getWidth();</span><br><span class="line">    PointOption pointA = PointOption.point(x / <span class="number">5</span>, y / <span class="number">5</span>);</span><br><span class="line">    PointOption pointB = PointOption.point(x * <span class="number">2</span> / <span class="number">5</span>, y * <span class="number">2</span> / <span class="number">5</span>);</span><br><span class="line">    PointOption pointC = PointOption.point(x * <span class="number">3</span> / <span class="number">5</span>, y * <span class="number">3</span> / <span class="number">5</span>);</span><br><span class="line">    PointOption pointD = PointOption.point(x * <span class="number">4</span> / <span class="number">5</span>, y * <span class="number">4</span> / <span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 放大 B-&gt;A C-&gt;D</span></span><br><span class="line">    action1.press(pointB).moveTo(pointA).release();</span><br><span class="line">    action2.press(pointC).moveTo(pointD).release();</span><br><span class="line">    MultiTouchAction multiTouchAction = <span class="keyword">new</span> MultiTouchAction(androidDriver);</span><br><span class="line">    multiTouchAction.add(action1);</span><br><span class="line">    multiTouchAction.add(action2);</span><br><span class="line">    multiTouchAction.perform();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-App特殊元素定位-34&quot;&gt;&lt;a href=&quot;#Java自动化测试-App特殊元素定位-34&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(App特殊元素定位 34)&quot;&gt;&lt;/a&gt;Java自动化测试(App特殊元素定位 34)&lt;/h1&gt;&lt;h2 id=&quot;手势操作-滑动&quot;&gt;&lt;a href=&quot;#手势操作-滑动&quot; class=&quot;headerlink&quot; title=&quot;手势操作-滑动&quot;&gt;&lt;/a&gt;手势操作-滑动&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;滑动操作 = 点击屏幕某一点 + 移动 + 松开&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(Android app界面元素 33)</title>
    <link href="http://zx490336534.github.io/article/86e4f985.html"/>
    <id>http://zx490336534.github.io/article/86e4f985.html</id>
    <published>2020-10-08T00:54:48.356Z</published>
    <updated>2021-03-03T14:29:02.806Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-Android-app界面元素-33"><a href="#Java自动化测试-Android-app界面元素-33" class="headerlink" title="Java自动化测试(Android app界面元素 33)"></a>Java自动化测试(Android app界面元素 33)</h1><h2 id="App分类"><a href="#App分类" class="headerlink" title="App分类"></a>App分类</h2><h3 id="Native-App"><a href="#Native-App" class="headerlink" title="Native App"></a>Native App</h3><p>原生App</p><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>直接依托于操作系统，交互性最强，性能最好，功能最为强大</p><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>开发成本高，更新缓慢，审核周期慢，维护成本高</p><span id="more"></span><h3 id="Hybrid-App"><a href="#Hybrid-App" class="headerlink" title="Hybrid App"></a>Hybrid App</h3><p>混合型App</p><h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><p>开发成本较低，可以跨平台，调试方便，维护成本低，功能可复用，性能和体验要比web app好，更新较自由</p><h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>相比原生性能仍有较大损耗，不适用于交互性较强的app</p><h3 id="Web-App"><a href="#Web-App" class="headerlink" title="Web App"></a>Web App</h3><p>使用浏览器展示</p><h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><p>开发成本低，可以跨平台，调试方便，更新无需通知用户，不需要手动升级，无需安装App，不会占用手机存储空间</p><h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><p>无法获取系统级别的通知/提醒/动效等，用户留存率低，体验差，设计受限较多</p><h3 id="如何区分"><a href="#如何区分" class="headerlink" title="如何区分"></a>如何区分</h3><p>开启<code>显示布局界面</code>，当看到出现<code>方框</code>则使用的是原生</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjhn91yla7j30sg1bm45f.jpg" alt="定位"></p><h2 id="ActivityName-amp-PackageName"><a href="#ActivityName-amp-PackageName" class="headerlink" title="ActivityName &amp; PackageName"></a>ActivityName &amp; PackageName</h2><h3 id="PackageName「包名」"><a href="#PackageName「包名」" class="headerlink" title="PackageName「包名」"></a>PackageName「包名」</h3><p>应用的唯一身份标示，系统通过包名识别不同的应用，如两个相同包名的应用在安装时会提示覆盖</p><h3 id="ActivityName「类名」"><a href="#ActivityName「类名」" class="headerlink" title="ActivityName「类名」"></a>ActivityName「类名」</h3><p>Activity：android四大组件之一，就是一个和用户交互的界面</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys activity | grep <span class="string">"mFocusedActivity"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Android8以上</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb shell dumpsys activity | grep <span class="string">"mResumedActivity"</span></span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjhnuilwmgj311q0u0dyo.jpg" alt="查找当前Activity"></p><p>启动入口appActivity和Activity的区别：</p><p><code>appActivity</code>在App中是唯一的，它的作用是用来启动app的</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> aapt dump badging D:\apk\base.apk | find <span class="string">"launchable-activity"</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="App页面布局"><a href="#App页面布局" class="headerlink" title="App页面布局"></a>App页面布局</h2><h3 id="布局类型"><a href="#布局类型" class="headerlink" title="布局类型"></a>布局类型</h3><ul><li>框架布局</li></ul><p>所有控件都被放置在左上的区域</p><p>下一个子控件会重叠覆盖上一个控件</p><ul><li>线性布局</li></ul><p>控件的排序方式：垂直/水平</p><ul><li>绝对布局</li></ul><p>采用坐标轴的方式定位控件</p><p>左上角(0,0) </p><p>往右<code>x+</code></p><p>往下<code>y+</code></p><ul><li>相对布局</li></ul><p>根据参照物的位置，来确定控件的位置</p><ul><li>表格布局</li></ul><p>通过表格的行列布局控件位置</p><h2 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h2><p>打开<code>uiautomatorviewer</code></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /Users/zhongxin/Library/Android/sdk/tools/bin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sh uiautomatorviewer</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjho0t5rixj313u0u0b29.jpg" alt="uiautomatorviewer"></p><h3 id="id定位"><a href="#id定位" class="headerlink" title="id定位"></a>id定位</h3><p><code>resource-id</code>定位，App是允许「resource-id」相同，如果有相同的resource-id，那么获取第一个元素</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">androidDriver.findElement(MobileBy.id(<span class="string">"com.lemon.lemonban:id/category_title"</span>)).click();</span><br></pre></td></tr></tbody></table></figure><h3 id="text定位"><a href="#text定位" class="headerlink" title="text定位"></a>text定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">androidDriver.findElement(MobileBy.AndroidUIAutomator(<span class="string">"new UiSelector().text(\"全程班\")"</span>)).click();</span><br></pre></td></tr></tbody></table></figure><h3 id="className定位"><a href="#className定位" class="headerlink" title="className定位"></a>className定位</h3><p>类似web tagName找到元素类型</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">androidDriver.findElement(MobileBy.className(<span class="string">"android.widget.TextView"</span>)).click();</span><br></pre></td></tr></tbody></table></figure><h3 id="Xpath定位"><a href="#Xpath定位" class="headerlink" title="Xpath定位"></a>Xpath定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">androidDriver.findElement(MobileBy.xpath(<span class="string">"//android.widget.TextView[@text='全程班']"</span>)).click();</span><br><span class="line">androidDriver.findElement(MobileBy.xpath(<span class="string">"//android.widget.FrameLayout[@resource-id='com.lemon.lemonban:id/navigation_tiku']"</span>)).click();</span><br></pre></td></tr></tbody></table></figure><h3 id="坐标定位"><a href="#坐标定位" class="headerlink" title="坐标定位"></a>坐标定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TouchAction touchAction = <span class="keyword">new</span> TouchAction(androidDriver);</span><br><span class="line">PointOption pointOption = PointOption.point(<span class="number">445</span>, <span class="number">1539</span>);</span><br><span class="line">touchAction.press(pointOption).release().perform();</span><br></pre></td></tr></tbody></table></figure><h3 id="toast元素定位"><a href="#toast元素定位" class="headerlink" title="toast元素定位"></a>toast元素定位</h3><p><code>Toast</code>是一种简单的消息提示框。当视图显示给用户，在应用程序中显示为浮动。和Dialog不一样的是，它永远不会获得焦点，无法被点击。</p><ul><li>获取方式1:隐式等待</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">androidDriver.manage().timeouts().implicitlyWait(<span class="number">8</span>, TimeUnit.SECONDS);</span><br><span class="line">androidDriver.findElement(MobileBy.xpath(<span class="string">"//*[contains(@text,'错误的账号信息')]"</span>));</span><br></pre></td></tr></tbody></table></figure><ul><li>获取方式2:显式等待</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebDriverWait wait = <span class="keyword">new</span> WebDriverWait(androidDriver, <span class="number">5</span>);</span><br><span class="line">WebElement element = wait.until(ExpectedConditions.presenceOfElementLocated(MobileBy.xpath(<span class="string">"//*[contains(@text,'错误的账号信息')]"</span>)));</span><br><span class="line">element.getText();</span><br></pre></td></tr></tbody></table></figure><h2 id="使用Appium定位"><a href="#使用Appium定位" class="headerlink" title="使用Appium定位"></a>使用Appium定位</h2><h3 id="1-填写连接信息"><a href="#1-填写连接信息" class="headerlink" title="1.填写连接信息"></a>1.填写连接信息</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjhp3t9j59j31gg0u0wsc.jpg" alt="填写连接信息"></p><h3 id="2-启动会话"><a href="#2-启动会话" class="headerlink" title="2. 启动会话"></a>2. 启动会话</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gjhp1bfh6tj31gg0u0x3g.jpg" alt="Appium"></p><h2 id="调试代码"><a href="#调试代码" class="headerlink" title="调试代码"></a>调试代码</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.day03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.appium.java_client.MobileBy;</span><br><span class="line"><span class="keyword">import</span> io.appium.java_client.TouchAction;</span><br><span class="line"><span class="keyword">import</span> io.appium.java_client.android.AndroidDriver;</span><br><span class="line"><span class="keyword">import</span> io.appium.java_client.touch.offset.PointOption;</span><br><span class="line"><span class="keyword">import</span> org.apache.tools.ant.taskdefs.Touch;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.apache.bcel.ExceptionConstants;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebElement;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.ExpectedConditions;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.WebDriverWait;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.AfterTest;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeTest;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElementLocator</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> AndroidDriver androidDriver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> MalformedURLException </span>{</span><br><span class="line">        DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">        capabilities.setCapability(<span class="string">"platformName"</span>, <span class="string">"Android"</span>);</span><br><span class="line">        capabilities.setCapability(<span class="string">"deviceName"</span>, <span class="string">"127.0.0.1:62001"</span>);</span><br><span class="line">        capabilities.setCapability(<span class="string">"appPackage"</span>, <span class="string">"com.lemon.lemonban"</span>);</span><br><span class="line">        capabilities.setCapability(<span class="string">"appActivity"</span>, <span class="string">"com.lemon.lemonban.activity.WelcomeActivity"</span>);</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">"http://127.0.0.1:4723/wd/hub"</span>);</span><br><span class="line">        androidDriver = <span class="keyword">new</span> AndroidDriver(url, capabilities);</span><br><span class="line">        androidDriver.manage().timeouts().implicitlyWait(<span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="comment">//        androidDriver.findElement(MobileBy.id("com.lemon.lemonban:id/category_title")).click();</span></span><br><span class="line"><span class="comment">//        androidDriver.findElement(MobileBy.AndroidUIAutomator("new UiSelector().text(\"全程班\")")).click();</span></span><br><span class="line"><span class="comment">//        androidDriver.findElement(MobileBy.className("android.widget.TextView")).click();</span></span><br><span class="line"><span class="comment">//        androidDriver.findElement(MobileBy.xpath("//android.widget.TextView[@text='全程班']")).click();</span></span><br><span class="line"><span class="comment">//        androidDriver.findElement(MobileBy.xpath("//android.widget.FrameLayout[@resource-id='com.lemon.lemonban:id/navigation_tiku']")).click();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        TouchAction touchAction = new TouchAction(androidDriver);</span></span><br><span class="line"><span class="comment">//        PointOption pointOption = PointOption.point(445, 1539);</span></span><br><span class="line"><span class="comment">//        touchAction.press(pointOption).release().perform();</span></span><br><span class="line"></span><br><span class="line">        androidDriver.manage().timeouts().implicitlyWait(<span class="number">8</span>, TimeUnit.SECONDS);</span><br><span class="line">        androidDriver.findElement(MobileBy.xpath(<span class="string">"//*[contains(@text,'错误的账号信息')]"</span>));</span><br><span class="line"></span><br><span class="line">        WebDriverWait wait = <span class="keyword">new</span> WebDriverWait(androidDriver, <span class="number">5</span>);</span><br><span class="line">        WebElement element = wait.until(ExpectedConditions.presenceOfElementLocated(MobileBy.xpath(<span class="string">"//*[contains(@text,'错误的账号信息')]"</span>)));</span><br><span class="line">        String text = element.getText();</span><br><span class="line">        System.out.println(text);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        androidDriver.quit();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-Android-app界面元素-33&quot;&gt;&lt;a href=&quot;#Java自动化测试-Android-app界面元素-33&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(Android app界面元素 33)&quot;&gt;&lt;/a&gt;Java自动化测试(Android app界面元素 33)&lt;/h1&gt;&lt;h2 id=&quot;App分类&quot;&gt;&lt;a href=&quot;#App分类&quot; class=&quot;headerlink&quot; title=&quot;App分类&quot;&gt;&lt;/a&gt;App分类&lt;/h2&gt;&lt;h3 id=&quot;Native-App&quot;&gt;&lt;a href=&quot;#Native-App&quot; class=&quot;headerlink&quot; title=&quot;Native App&quot;&gt;&lt;/a&gt;Native App&lt;/h3&gt;&lt;p&gt;原生App&lt;/p&gt;
&lt;h4 id=&quot;优点&quot;&gt;&lt;a href=&quot;#优点&quot; class=&quot;headerlink&quot; title=&quot;优点&quot;&gt;&lt;/a&gt;优点&lt;/h4&gt;&lt;p&gt;直接依托于操作系统，交互性最强，性能最好，功能最为强大&lt;/p&gt;
&lt;h4 id=&quot;缺点&quot;&gt;&lt;a href=&quot;#缺点&quot; class=&quot;headerlink&quot; title=&quot;缺点&quot;&gt;&lt;/a&gt;缺点&lt;/h4&gt;&lt;p&gt;开发成本高，更新缓慢，审核周期慢，维护成本高&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(adb常用命令 32)</title>
    <link href="http://zx490336534.github.io/article/d988ab56.html"/>
    <id>http://zx490336534.github.io/article/d988ab56.html</id>
    <published>2020-09-26T07:23:50.336Z</published>
    <updated>2021-03-03T14:29:02.829Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-adb常用命令-32"><a href="#Java自动化测试-adb常用命令-32" class="headerlink" title="Java自动化测试(adb常用命令 32)"></a>Java自动化测试(adb常用命令 32)</h1><h1 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h1><p>adb「Android Bebug Bridge」是用来连接安卓和PC的桥梁</p><p>常用操作：</p><ul><li>安装卸载apk</li><li>推送拷贝文件</li><li>查看设备硬件信息</li><li>查看应用程序占用资源</li><li>在设备执行shell命令<span id="more"></span><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2></li></ul><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb <span class="built_in">help</span></span></span><br></pre></td></tr></tbody></table></figure><h3 id="检测连接到电脑的安卓设备"><a href="#检测连接到电脑的安卓设备" class="headerlink" title="检测连接到电脑的安卓设备"></a>检测连接到电脑的安卓设备</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb devices</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb connect 127.0.0.1:62001</span></span><br></pre></td></tr></tbody></table></figure><h3 id="从手机上拉取信息到电脑上"><a href="#从手机上拉取信息到电脑上" class="headerlink" title="从手机上拉取信息到电脑上"></a>从手机上拉取信息到电脑上</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb pull &lt;手机路径&gt; &lt;本地路径&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="从电脑上提交信息到手机上"><a href="#从电脑上提交信息到手机上" class="headerlink" title="从电脑上提交信息到手机上"></a>从电脑上提交信息到手机上</h3><p>路径不能有中文和特殊字符</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb push &lt;本地路径&gt; &lt;手机路径&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb install &lt;本地软件路径&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="卸载软件"><a href="#卸载软件" class="headerlink" title="卸载软件"></a>卸载软件</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb uninstall &lt;包名&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="登录设备进入shell"><a href="#登录设备进入shell" class="headerlink" title="登录设备进入shell"></a>登录设备进入shell</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell</span></span><br></pre></td></tr></tbody></table></figure><h3 id="终止adb服务"><a href="#终止adb服务" class="headerlink" title="终止adb服务"></a>终止adb服务</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb kill-server</span></span><br></pre></td></tr></tbody></table></figure><h3 id="启动adb服务"><a href="#启动adb服务" class="headerlink" title="启动adb服务"></a>启动adb服务</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb start-server</span></span><br></pre></td></tr></tbody></table></figure><h3 id="启动App"><a href="#启动App" class="headerlink" title="启动App"></a>启动App</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell am start -n &lt;包名&gt;/&lt;入口&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="清除应用数据和缓存"><a href="#清除应用数据和缓存" class="headerlink" title="清除应用数据和缓存"></a>清除应用数据和缓存</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell pm clear &lt;包名&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="坐标点击"><a href="#坐标点击" class="headerlink" title="坐标点击"></a>坐标点击</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell input tap x坐标 y坐标</span></span><br></pre></td></tr></tbody></table></figure><h3 id="列出所有包名"><a href="#列出所有包名" class="headerlink" title="列出所有包名"></a>列出所有包名</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell pm list packages</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> -s 系统apk路径及包名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> -3 用户apk路径及包名</span></span><br></pre></td></tr></tbody></table></figure><h3 id="打印日志"><a href="#打印日志" class="headerlink" title="打印日志"></a>打印日志</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb logcat</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb logcat &gt; &lt;本地路径&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell screencap -p /sdcard/Pictures/Screenshots/a.png</span></span><br></pre></td></tr></tbody></table></figure><h2 id="appium打印内容解析-了解"><a href="#appium打印内容解析-了解" class="headerlink" title="appium打印内容解析(了解)"></a>appium打印内容解析(了解)</h2><h3 id="启动Appium的欢迎信息"><a href="#启动Appium的欢迎信息" class="headerlink" title="启动Appium的欢迎信息"></a>启动Appium的欢迎信息</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[Appium] Welcome to Appium v1.17.1</span><br><span class="line">[Appium] Non-default server args:</span><br><span class="line">[Appium]   address: 127.0.0.1</span><br><span class="line">[Appium]   allowInsecure: {</span><br><span class="line">[Appium]   }</span><br><span class="line">[Appium]   denyInsecure: {</span><br><span class="line">[Appium]   }</span><br><span class="line">[Appium] Appium REST http interface listener started on 127.0.0.1:4723</span><br><span class="line">[HTTP] --&gt; POST /wd/hub/session</span><br><span class="line">[HTTP] {"desiredCapabilities":{"appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","platformName":"Android","deviceName":"127.0.0.1:62001"},"capabilities":{"firstMatch":[{"appium:appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appium:appPackage":"com.lemon.lemonban","appium:deviceName":"127.0.0.1:62001","platformName":"android"}]}}</span><br><span class="line">[W3C] Calling AppiumDriver.createSession() with args: [{"appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","platformName":"Android","deviceName":"127.0.0.1:62001"},null,{"firstMatch":[{"appium:appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appium:appPackage":"com.lemon.lemonban","appium:deviceName":"127.0.0.1:62001","platformName":"android"}]}]</span><br><span class="line">[BaseDriver] Event 'newSessionRequested' logged at 1601112368099 (17:26:08 GMT+0800 (中国标准时间))</span><br><span class="line">[Appium] </span><br><span class="line">[Appium] ======================================================================</span><br><span class="line">[Appium]   DEPRECATION WARNING:</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   The 'automationName' capability was not provided in the desired </span><br><span class="line">[Appium]   capabilities for this Android session</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   Setting 'automationName=UiAutomator2' by default and using the </span><br><span class="line">[Appium]   UiAutomator2 Driver</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   The next major version of Appium (2.x) will **require** the </span><br><span class="line">[Appium]   'automationName' capability to be set for all sessions on all </span><br><span class="line">[Appium]   platforms</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   In previous versions (Appium &lt;= 1.13.x), the default was </span><br><span class="line">[Appium]   'automationName=UiAutomator1'</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   If you wish to use that automation instead of UiAutomator2, please </span><br><span class="line">[Appium]   add 'automationName=UiAutomator1' to your desired capabilities</span><br><span class="line">[Appium] </span><br><span class="line">[Appium]   For more information about drivers, please visit </span><br><span class="line">[Appium]   http://appium.io/docs/en/about-appium/intro/ and explore the </span><br><span class="line">[Appium]   'Drivers' menu</span><br><span class="line">[Appium] </span><br><span class="line">[Appium] ======================================================================</span><br><span class="line">[Appium] </span><br><span class="line">[Appium] Appium v1.17.1 creating new AndroidUiautomator2Driver (v1.44.2) session</span><br><span class="line">[BaseDriver] W3C capabilities and MJSONWP desired capabilities were provided</span><br><span class="line">[BaseDriver] Creating session with W3C capabilities: {</span><br><span class="line">[BaseDriver]   "alwaysMatch": {</span><br><span class="line">[BaseDriver]     "platformName": "android",</span><br><span class="line">[BaseDriver]     "appium:appActivity": "com.lemon.lemonban.activity.WelcomeActivity",</span><br><span class="line">[BaseDriver]     "appium:appPackage": "com.lemon.lemonban",</span><br><span class="line">[BaseDriver]     "appium:deviceName": "127.0.0.1:62001"</span><br><span class="line">[BaseDriver]   },</span><br><span class="line">[BaseDriver]   "firstMatch": [</span><br><span class="line">[BaseDriver]     {}</span><br><span class="line">[BaseDriver]   ]</span><br><span class="line">[BaseDriver] }</span><br><span class="line">[BaseDriver] Session created with session id: 56b02400-065d-4d7e-8a8f-a074c85ef643</span><br><span class="line">[UiAutomator2] Starting 'com.lemon.lemonban' directly on the device</span><br></pre></td></tr></tbody></table></figure><h3 id="使用环境变量中配置的adb-exe"><a href="#使用环境变量中配置的adb-exe" class="headerlink" title="使用环境变量中配置的adb.exe"></a>使用环境变量中配置的adb.exe</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Found 1 'build-tools' folders under '/Users/zhongxin/Library/Android/sdk' (newest first):</span><br><span class="line">[ADB]     /Users/zhongxin/Library/Android/sdk/build-tools/30.0.2</span><br><span class="line">[ADB] Using 'adb' from '/Users/zhongxin/Library/Android/sdk/platform-tools/adb'</span><br><span class="line"></span><br><span class="line">[AndroidDriver] Retrieving device list</span><br><span class="line">[ADB] Trying to find a connected android device</span><br><span class="line">[ADB] Getting connected devices...</span><br><span class="line">[ADB] Connected devices: [{"udid":"127.0.0.1:62001","state":"device"}]</span><br><span class="line">[AndroidDriver] Using device: 127.0.0.1:62001</span><br></pre></td></tr></tbody></table></figure><h3 id="连接设备，并检测设备API版本号"><a href="#连接设备，并检测设备API版本号" class="headerlink" title="连接设备，并检测设备API版本号"></a>连接设备，并检测设备API版本号</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Using 'adb' from '/Users/zhongxin/Library/Android/sdk/platform-tools/adb'</span><br><span class="line">[ADB] Setting device id to 127.0.0.1:62001</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell getprop ro.build.version.sdk'</span><br><span class="line">[ADB] Current device property 'ro.build.version.sdk': 25</span><br><span class="line">[ADB] Device API level: 25</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[AndroidDriver] No app sent in, not parsing package/activity</span><br></pre></td></tr></tbody></table></figure><h3 id="等待设备连接"><a href="#等待设备连接" class="headerlink" title="等待设备连接"></a>等待设备连接</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 wait-for-device'</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell echo ping'</span><br><span class="line"></span><br><span class="line">[AndroidDriver] Pushing settings apk to device...</span><br><span class="line">[ADB] Getting install status for io.appium.settings</span><br></pre></td></tr></tbody></table></figure><h3 id="检测Appium-Setting安装状态"><a href="#检测Appium-Setting安装状态" class="headerlink" title="检测Appium Setting安装状态"></a>检测Appium Setting安装状态</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package io.appium.settings'</span><br><span class="line">[ADB] 'io.appium.settings' is installed</span><br><span class="line"></span><br><span class="line">[ADB] Getting package info for 'io.appium.settings'</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package io.appium.settings'</span><br><span class="line">[ADB] The version name of the installed 'io.appium.settings' is greater or equal to the application version name ('3.1.0' &gt;= '3.1.0')</span><br><span class="line">[ADB] There is no need to install/upgrade '/Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/io.appium.settings/apks/settings_apk-debug.apk'</span><br><span class="line">[ADB] Getting IDs of all 'io.appium.settings' processes</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell 'pgrep --help; echo $?''</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell 'pgrep ^appium\\.settings$ || pgrep ^io\\.appium\\.setti$''</span><br><span class="line">[AndroidDriver] io.appium.settings is already running. There is no need to reset its permissions.</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell appops set io.appium.settings android\:mock_location allow'</span><br><span class="line">[Logcat] Starting logcat capture</span><br></pre></td></tr></tbody></table></figure><h3 id="端口转发Appium-Server端口8200连接到设备部中UiAutomator2-Server-6790"><a href="#端口转发Appium-Server端口8200连接到设备部中UiAutomator2-Server-6790" class="headerlink" title="端口转发Appium Server端口8200连接到设备部中UiAutomator2 Server 6790"></a>端口转发Appium Server端口8200连接到设备部中UiAutomator2 Server 6790</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[UiAutomator2] Forwarding UiAutomator2 Server port 6790 to 8200</span><br><span class="line">[ADB] Forwarding system: 8200 to device: 6790</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 forward tcp\:8200 tcp\:6790'</span><br></pre></td></tr></tbody></table></figure><h3 id="检测uiautomator2-server-uiautomator2-server-test安装状态"><a href="#检测uiautomator2-server-uiautomator2-server-test安装状态" class="headerlink" title="检测uiautomator2.server\uiautomator2.server.test安装状态"></a>检测uiautomator2.server\uiautomator2.server.test安装状态</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Getting install status for io.appium.uiautomator2.server</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package io.appium.uiautomator2.server'</span><br><span class="line">[ADB] 'io.appium.uiautomator2.server' is installed</span><br><span class="line">[ADB] Getting package info for 'io.appium.uiautomator2.server'</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package io.appium.uiautomator2.server'</span><br><span class="line">[ADB] The version name of the installed 'io.appium.uiautomator2.server' is greater or equal to the application version name ('4.5.5' &gt;= '4.5.5')</span><br><span class="line">[UiAutomator2] io.appium.uiautomator2.server installation state: sameVersionInstalled</span><br></pre></td></tr></tbody></table></figure><h3 id="验证uiautomator2-server-uiautomator2-server-test证书"><a href="#验证uiautomator2-server-uiautomator2-server-test证书" class="headerlink" title="验证uiautomator2.server\uiautomator2.server.test证书"></a>验证uiautomator2.server\uiautomator2.server.test证书</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Checking app cert for /Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-v4.5.5.apk</span><br><span class="line">[ADB] Using 'apksigner.jar' from '/Users/zhongxin/Library/Android/sdk/build-tools/30.0.2/lib/apksigner.jar'</span><br><span class="line">[ADB] Starting apksigner: /Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/bin/java -Xmx1024M -Xss1m -jar /Users/zhongxin/Library/Android/sdk/build-tools/30.0.2/lib/apksigner.jar verify --print-certs /Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-v4.5.5.apk</span><br><span class="line">[ADB] apksigner stdout: Signer #1 certificate DN: EMAILADDRESS=android@android.com, CN=Android, OU=Android, O=Android, L=Mountain View, ST=California, C=US</span><br><span class="line">[ADB] Signer #1 certificate SHA-256 digest: a40da80a59d170caa950cf15c18c454d47a39b26989d8b640ecd745ba71bf5dc</span><br><span class="line">[ADB] Signer #1 certificate SHA-1 digest: 61ed377e85d386a8dfee6b864bd85b0bfaa5af81</span><br><span class="line">[ADB] Signer #1 certificate MD5 digest: e89b158e4bcf988ebd09eb83f5378e87</span><br><span class="line">[ADB] </span><br><span class="line">[ADB] '/Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-v4.5.5.apk' is signed with the default certificate</span><br><span class="line">[ADB] Getting install status for io.appium.uiautomator2.server.test</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package io.appium.uiautomator2.server.test'</span><br><span class="line">[ADB] 'io.appium.uiautomator2.server.test' is installed</span><br><span class="line">[ADB] Checking app cert for /Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-debug-androidTest.apk</span><br><span class="line">[ADB] Starting apksigner: /Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/bin/java -Xmx1024M -Xss1m -jar /Users/zhongxin/Library/Android/sdk/build-tools/30.0.2/lib/apksigner.jar verify --print-certs /Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-debug-androidTest.apk</span><br><span class="line">[ADB] apksigner stdout: Signer #1 certificate DN: EMAILADDRESS=android@android.com, CN=Android, OU=Android, O=Android, L=Mountain View, ST=California, C=US</span><br><span class="line">[ADB] Signer #1 certificate SHA-256 digest: a40da80a59d170caa950cf15c18c454d47a39b26989d8b640ecd745ba71bf5dc</span><br><span class="line">[ADB] Signer #1 certificate SHA-1 digest: 61ed377e85d386a8dfee6b864bd85b0bfaa5af81</span><br><span class="line">[ADB] Signer #1 certificate MD5 digest: e89b158e4bcf988ebd09eb83f5378e87</span><br><span class="line">[ADB] </span><br><span class="line">[ADB] '/Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-debug-androidTest.apk' is signed with the default certificate</span><br><span class="line">[UiAutomator2] Server packages are not going to be (re)installed</span><br><span class="line">[UiAutomator2] Waiting up to 30000ms for services to be available</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell pm list instrumentation'</span><br><span class="line">[UiAutomator2] Instrumentation target 'io.appium.uiautomator2.server.test/androidx.test.runner.AndroidJUnitRunner' is available</span><br><span class="line">[UiAutomator2] No app capability. Assuming it is already on the device</span><br></pre></td></tr></tbody></table></figure><h3 id="检测柠檬班App安装状态"><a href="#检测柠檬班App安装状态" class="headerlink" title="检测柠檬班App安装状态"></a>检测柠檬班App安装状态</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Getting install status for com.lemon.lemonban</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys package com.lemon.lemonban'</span><br><span class="line">[ADB] 'com.lemon.lemonban' is installed</span><br></pre></td></tr></tbody></table></figure><h3 id="强制关闭和清空柠檬班app的缓存"><a href="#强制关闭和清空柠檬班app的缓存" class="headerlink" title="强制关闭和清空柠檬班app的缓存"></a>强制关闭和清空柠檬班app的缓存</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell am force-stop com.lemon.lemonban'</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell pm clear com.lemon.lemonban'</span><br><span class="line">[AndroidDriver] Performed fast reset on the installed 'com.lemon.lemonban' application (stop and clear)</span><br><span class="line">[UiAutomator2] Performing shallow cleanup of automation leftovers</span><br><span class="line">[UiAutomator2] No obsolete sessions have been detected (Error: socket hang up)</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell am force-stop io.appium.uiautomator2.server.test'</span><br><span class="line">[UiAutomator2] Starting UIAutomator2 server 4.5.5</span><br><span class="line">[UiAutomator2] Using UIAutomator2 server from '/Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-v4.5.5.apk' and test from '/Applications/Appium.app/Contents/Resources/app/node_modules/appium/node_modules/appium-uiautomator2-server/apks/appium-uiautomator2-server-debug-androidTest.apk'</span><br><span class="line">[UiAutomator2] Waiting up to 30000ms for UiAutomator2 to be online...</span><br><span class="line">[ADB] Creating ADB subprocess with args: ["-P",5037,"-s","127.0.0.1:62001","shell","am","instrument","-w","io.appium.uiautomator2.server.test/androidx.test.runner.AndroidJUnitRunner"]</span><br><span class="line">[Instrumentation] io.appium.uiautomator2.server.test.AppiumUiAutomator2Server:</span><br><span class="line">[WD Proxy] Matched '/status' to command name 'getStatus'</span><br><span class="line">[WD Proxy] Proxying [GET /status] to [GET http://127.0.0.1:8200/wd/hub/status] with no body</span><br><span class="line">[WD Proxy] Got response with unknown status: {"code":"ECONNRESET"}</span><br><span class="line">[WD Proxy] Matched '/status' to command name 'getStatus'</span><br><span class="line">[WD Proxy] Proxying [GET /status] to [GET http://127.0.0.1:8200/wd/hub/status] with no body</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"None","value":{"ready":true,"message":"UiAutomator2 Server is ready to accept commands"}}</span><br><span class="line">[UiAutomator2] The initialization of the instrumentation process took 2035ms</span><br><span class="line">[WD Proxy] Matched '/session' to command name 'createSession'</span><br><span class="line">[WD Proxy] Proxying [POST /session] to [POST http://127.0.0.1:8200/wd/hub/session] with body: {"capabilities":{"firstMatch":[{"platform":"LINUX","webStorageEnabled":false,"takesScreenshot":true,"javascriptEnabled":true,"databaseEnabled":false,"networkConnectionEnabled":true,"locationContextEnabled":false,"warnings":{},"desired":{"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001"},"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001","deviceUDID":"127.0.0.1:62001"}],"alwaysMatch":{}}}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","capabilities":{"firstMatch":[{"platform":"LINUX","webStorageEnabled":false,"takesScreenshot":true,"javascriptEnabled":true,"databaseEnabled":false,"networkConnectionEnabled":true,"locationContextEnabled":false,"warnings":{},"desired":{"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001"},"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001","deviceUDID":"127.0.0.1:62001"}],"alwaysMatch":{}}}}</span><br><span class="line">[WD Proxy] Determined the downstream protocol as 'W3C'</span><br><span class="line">[WD Proxy] Proxying [GET /appium/device/info] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597/appium/device/info] with no body</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{"androidId":"784F438584880000","manufacturer":"samsung","model":"SM-N950N","brand":"samsung","apiVersion":"25","platformVersion":"7.1.2","carrierName":"CMCC","realDisplaySize":"900x1600","displayDensity":320,"networks":[{"type":1,"typeName":"WIFI","subtype":0,"subtypeName":"","isConnected":true,"detailedState":"CONNECTED","state":"CONNECTED","extraInfo":"\"WiredSSID\"","isAvailable":true,"isFailover":false,"isRoaming":false,"capabilities":{"transportTypes":"TRANSPORT_WIFI","networkCapabilities":"NET_CAPABILITY_NOT_METERED,NET_CAPABILITY_NOT_RESTRICTED,NET_CAPABILITY_NOT_VPN,NET_CAPABILITY_NOT_ROAMING,NET_CAPABILITY_INTERNET,NET_CAPABILITY_TRUSTED,NET_CAPABILITY_VALIDATED","linkUpstreamBandwidthKbps":1048576,"linkDownBandwidthKbps":1048576,"signalStrength":-55,"networkSpecifier":null,"SSID":null}}],"locale":"zh_CN","timeZone":"Asia\/Shanghai","bluetooth":{"state":"OFF"}}}</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell dumpsys window'</span><br><span class="line">[AndroidDriver] Screen already unlocked, doing nothing</span><br><span class="line">[UiAutomator2] Starting 'com.lemon.lemonban/com.lemon.lemonban.activity.WelcomeActivity and waiting for 'com.lemon.lemonban/com.lemon.lemonban.activity.WelcomeActivity'</span><br></pre></td></tr></tbody></table></figure><h3 id="启动柠檬班App"><a href="#启动柠檬班App" class="headerlink" title="启动柠檬班App"></a>启动柠檬班App</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell am start -W -n com.lemon.lemonban/com.lemon.lemonban.activity.WelcomeActivity -S'</span><br><span class="line">[WD Proxy] Proxying [GET /appium/device/pixel_ratio] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597/appium/device/pixel_ratio] with body: {}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":2}</span><br><span class="line">[WD Proxy] Matched '/appium/device/system_bars' to command name 'getSystemBars'</span><br><span class="line">[WD Proxy] Proxying [GET /appium/device/system_bars] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597/appium/device/system_bars] with body: {}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{"statusBar":48}}</span><br><span class="line">[WD Proxy] Matched '/window/current/size' to command name 'getWindowSize'</span><br><span class="line">[WD Proxy] Proxying [GET /window/current/size] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597/window/current/size] with body: {}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{"height":1600,"width":900}}</span><br><span class="line">[Appium] New AndroidUiautomator2Driver session created successfully, session 56b02400-065d-4d7e-8a8f-a074c85ef643 added to master session list</span><br><span class="line">[BaseDriver] Event 'newSessionStarted' logged at 1601112375537 (17:26:15 GMT+0800 (中国标准时间))</span><br><span class="line">[W3C (56b02400)] Cached the protocol value 'W3C' for the new session 56b02400-065d-4d7e-8a8f-a074c85ef643</span><br><span class="line">[W3C (56b02400)] Responding to client with driver.createSession() result: {"capabilities":{"platform":"LINUX","webStorageEnabled":false,"takesScreenshot":true,"javascriptEnabled":true,"databaseEnabled":false,"networkConnectionEnabled":true,"locationContextEnabled":false,"warnings":{},"desired":{"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001"},"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001","deviceUDID":"127.0.0.1:62001","deviceApiLevel":25,"platformVersion":"7.1.2","deviceScreenSize":"900x1600","deviceScreenDensity":320,"deviceModel":"SM-N950N","deviceManufacturer":"samsung","pixelRatio":2,"statBarHeight":48,"viewportRect":{"left":0,"top":48,"width":900,"height":1552}}}</span><br><span class="line">[HTTP] &lt;-- POST /wd/hub/session 200 7445 ms - 869</span><br><span class="line">[HTTP] </span><br><span class="line">[HTTP] --&gt; GET /wd/hub/session/56b02400-065d-4d7e-8a8f-a074c85ef643</span><br><span class="line">[HTTP] {}</span><br><span class="line">[W3C (56b02400)] Calling AppiumDriver.getSession() with args: ["56b02400-065d-4d7e-8a8f-a074c85ef643"]</span><br><span class="line">[UiAutomator2] Getting session details from server to mix in</span><br><span class="line">[WD Proxy] Matched '/' to command name 'getSession'</span><br><span class="line">[WD Proxy] Proxying [GET /] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597] with body: {}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{}}</span><br><span class="line">[W3C (56b02400)] Responding to client with driver.getSession() result: {"platform":"LINUX","webStorageEnabled":false,"takesScreenshot":true,"javascriptEnabled":true,"databaseEnabled":false,"networkConnectionEnabled":true,"locationContextEnabled":false,"warnings":{},"desired":{"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001"},"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001","deviceUDID":"127.0.0.1:62001","deviceApiLevel":25,"platformVersion":"7.1.2","deviceScreenSize":"900x1600","deviceScreenDensity":320,"deviceModel":"SM-N950N","deviceManufacturer":"samsung","pixelRatio":2,"statBarHeight":48,"viewportRect":{"left":0,"top":48,"width":900,"height":1552}}</span><br><span class="line">[HTTP] &lt;-- GET /wd/hub/session/56b02400-065d-4d7e-8a8f-a074c85ef643 200 8 ms - 801</span><br><span class="line">[HTTP] </span><br><span class="line">[HTTP] --&gt; GET /wd/hub/session/56b02400-065d-4d7e-8a8f-a074c85ef643</span><br><span class="line">[HTTP] {}</span><br><span class="line">[W3C (56b02400)] Calling AppiumDriver.getSession() with args: ["56b02400-065d-4d7e-8a8f-a074c85ef643"]</span><br><span class="line">[UiAutomator2] Getting session details from server to mix in</span><br><span class="line">[WD Proxy] Matched '/' to command name 'getSession'</span><br><span class="line">[WD Proxy] Proxying [GET /] to [GET http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597] with body: {}</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":{}}</span><br><span class="line">[W3C (56b02400)] Responding to client with driver.getSession() result: {"platform":"LINUX","webStorageEnabled":false,"takesScreenshot":true,"javascriptEnabled":true,"databaseEnabled":false,"networkConnectionEnabled":true,"locationContextEnabled":false,"warnings":{},"desired":{"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001"},"platformName":"android","appActivity":"com.lemon.lemonban.activity.WelcomeActivity","appPackage":"com.lemon.lemonban","deviceName":"127.0.0.1:62001","deviceUDID":"127.0.0.1:62001","deviceApiLevel":25,"platformVersion":"7.1.2","deviceScreenSize":"900x1600","deviceScreenDensity":320,"deviceModel":"SM-N950N","deviceManufacturer":"samsung","pixelRatio":2,"statBarHeight":48,"viewportRect":{"left":0,"top":48,"width":900,"height":1552}}</span><br><span class="line">[HTTP] &lt;-- GET /wd/hub/session/56b02400-065d-4d7e-8a8f-a074c85ef643 200 10 ms - 801</span><br><span class="line">[HTTP] </span><br><span class="line">[BaseDriver] Shutting down because we waited 60 seconds for a command</span><br><span class="line">[Appium] Closing session, cause was 'New Command Timeout of 60 seconds expired. Try customizing the timeout using the 'newCommandTimeout' desired capability'</span><br><span class="line">[Appium] Removing session '56b02400-065d-4d7e-8a8f-a074c85ef643' from our master session list</span><br><span class="line">[UiAutomator2] Deleting UiAutomator2 session</span><br><span class="line">[UiAutomator2] Deleting UiAutomator2 server session</span><br><span class="line">[WD Proxy] Matched '/' to command name 'deleteSession'</span><br><span class="line">[WD Proxy] Proxying [DELETE /] to [DELETE http://127.0.0.1:8200/wd/hub/session/9d7c96d1-9a56-41dc-ae9a-82078c4f7597] with no body</span><br><span class="line">[WD Proxy] Got response with status 200: {"sessionId":"9d7c96d1-9a56-41dc-ae9a-82078c4f7597","value":null}</span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 shell am force-stop com.lemon.lemonban'</span><br><span class="line">[Instrumentation] .</span><br><span class="line">[Instrumentation] Time: 63.052</span><br><span class="line">[Instrumentation] </span><br><span class="line">[Instrumentation] OK (1 test)</span><br><span class="line">[Instrumentation] The process has exited with code 0</span><br><span class="line">[Logcat] Stopping logcat capture</span><br><span class="line">[ADB] Removing forwarded port socket connection: 8200 </span><br><span class="line">[ADB] Running '/Users/zhongxin/Library/Android/sdk/platform-tools/adb -P 5037 -s 127.0.0.1\:62001 forward --remove tcp\:8200'</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-adb常用命令-32&quot;&gt;&lt;a href=&quot;#Java自动化测试-adb常用命令-32&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(adb常用命令 32)&quot;&gt;&lt;/a&gt;Java自动化测试(adb常用命令 32)&lt;/h1&gt;&lt;h1 id=&quot;adb&quot;&gt;&lt;a href=&quot;#adb&quot; class=&quot;headerlink&quot; title=&quot;adb&quot;&gt;&lt;/a&gt;adb&lt;/h1&gt;&lt;p&gt;adb「Android Bebug Bridge」是用来连接安卓和PC的桥梁&lt;/p&gt;
&lt;p&gt;常用操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装卸载apk&lt;/li&gt;
&lt;li&gt;推送拷贝文件&lt;/li&gt;
&lt;li&gt;查看设备硬件信息&lt;/li&gt;
&lt;li&gt;查看应用程序占用资源&lt;/li&gt;
&lt;li&gt;在设备执行shell命令&lt;/li&gt;&lt;/ul&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(app自动化环境搭建 31)</title>
    <link href="http://zx490336534.github.io/article/e9b41654.html"/>
    <id>http://zx490336534.github.io/article/e9b41654.html</id>
    <published>2020-09-23T23:18:46.273Z</published>
    <updated>2021-03-03T14:29:02.899Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-app自动化环境搭建-31"><a href="#Java自动化测试-app自动化环境搭建-31" class="headerlink" title="Java自动化测试(app自动化环境搭建 31)"></a>Java自动化测试(app自动化环境搭建 31)</h1><h2 id="Appium"><a href="#Appium" class="headerlink" title="Appium"></a>Appium</h2><blockquote><p>官网：<a href="http://appium.io/">http://appium.io/</a></p><p>github：<a href="https://github.com/appium/appium">https://github.com/appium/appium</a></p><p>Appium is an open source test automation framework for use with native, <a href="http://appium.io/docs/en/writing-running-appium/web/hybrid/">hybrid</a> and mobile web apps.<br>It drives iOS, Android, and Windows apps using the WebDriver protocol.</p></blockquote><p>第三方自动化工具，扩充了Selenium WebDriver协议，在原有的基础上添加了移动端测试API</p><p>是一个开源的，跨平台的自动化测试工具，可以用于app的自动化测试</p><p>支持<code>android</code>，<code>ios</code>，<code>firefox os</code>等操作系统下的app测试</p><span id="more"></span><h2 id="Appium组件"><a href="#Appium组件" class="headerlink" title="Appium组件"></a>Appium组件</h2><h3 id="Appium-Server"><a href="#Appium-Server" class="headerlink" title="Appium Server"></a>Appium Server</h3><p>Appium的核心，实质上是一个web接口服务器，使用node.js实现</p><h3 id="Appium-GUI"><a href="#Appium-GUI" class="headerlink" title="Appium GUI"></a>Appium GUI</h3><p>Appium Desktop前身，已经停止维护，封装的Appium Server 是1.4.16</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1e0b8l2xj30w40u0akx.jpg" alt="Appium GUI"></p><h3 id="Appium-Desktop"><a href="#Appium-Desktop" class="headerlink" title="Appium Desktop"></a>Appium Desktop</h3><p>内嵌了 Appium Server，提供GUI界面，还包括其他工具的整合（如Appium Inspector）</p><h3 id="Appium-Client"><a href="#Appium-Client" class="headerlink" title="Appium Client"></a>Appium Client</h3><p>客户端向Appium Server发起请求，可以用不同语言来实现</p><p>例如java：<a href="https://github.com/appium/java-client">https://github.com/appium/java-client</a></p><h2 id="App自动化测试环境搭建"><a href="#App自动化测试环境搭建" class="headerlink" title="App自动化测试环境搭建"></a>App自动化测试环境搭建</h2><p>配置Android sdk环境</p><ol><li>SDK：软件开发套件</li><li>adb：是android sdk的一个工具，用来连接安卓手机和PC端端桥梁</li></ol><p>在mac上安装：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew cask install android-platform-tools</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'export PATH=$PATH:~/.android-sdk-macosx/platform-tools/'</span> &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.bash_profile</span></span><br></pre></td></tr></tbody></table></figure><p>检查一下是否安装完成：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb version</span></span><br></pre></td></tr></tbody></table></figure><p>  <img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1efk3daej311q0u0qpg.jpg" alt="检查环境"></p><h2 id="模拟器下载"><a href="#模拟器下载" class="headerlink" title="模拟器下载"></a>模拟器下载</h2><blockquote><p><a href="https://www.yeshen.com/">https://www.yeshen.com/</a></p></blockquote><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1ekwvamqj30u01cke81.jpg" alt="模拟器"></p><h2 id="Appium-桌面版下载"><a href="#Appium-桌面版下载" class="headerlink" title="Appium 桌面版下载"></a>Appium 桌面版下载</h2><blockquote><p><a href="https://github.com/appium/appium-desktop/releases/tag/v1.18.0-2">https://github.com/appium/appium-desktop/releases/tag/v1.18.0-2</a></p></blockquote><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1epl0irhj30w40u07f5.jpg" alt="Appium 桌面版"></p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1eq9gemij30w40u0gwm.jpg" alt="启动"></p><h2 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h2><h3 id="配置Maven"><a href="#配置Maven" class="headerlink" title="配置Maven"></a>配置Maven</h3><h4 id="下载-java-client"><a href="#下载-java-client" class="headerlink" title="下载 java-client"></a>下载 java-client</h4><blockquote><p><a href="https://mvnrepository.com/artifact/io.appium/java-client">https://mvnrepository.com/artifact/io.appium/java-client</a></p></blockquote><h3 id="配置设备信息"><a href="#配置设备信息" class="headerlink" title="配置设备信息"></a>配置设备信息</h3><ol><li>设备平台</li><li>设备名称</li><li>APP包名</li><li>App activity名称</li></ol><p>使用<code>adb connect 127.0.0.1:62001</code>连接设备</p><p>其中<code>62001</code>是夜神模拟器的端口</p><h4 id="连接设备"><a href="#连接设备" class="headerlink" title="连接设备"></a>连接设备</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gj1f3ne2vhj311q0u01kx.jpg" alt="连接设备"></p><h4 id="查看包名"><a href="#查看包名" class="headerlink" title="查看包名"></a>查看包名</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> aapt dump badging xxxx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> aapt dump badging /Users/zhongxin/Downloads/app自动化工具包/APK包/lemonban_release_v2.1.2_finally.apk</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> /Applications/NoxAppPlayer.app/Contents/MacOS/aapt dump badging /Users/zhongxin/Downloads/app自动化工具包/APK包/lemonban_release_v2.1.2_finally.apk</span></span><br><span class="line">package: name='com.lemon.lemonban' versionCode='20181113' versionName='2.1.2' platformBuildVersionName='7.1.1'</span><br><span class="line">sdkVersion:'15'</span><br><span class="line">targetSdkVersion:'25'</span><br><span class="line">uses-permission: name='android.permission.ACCESS_NETWORK_STATE'</span><br><span class="line">uses-permission: name='android.permission.INTERNET'</span><br><span class="line">uses-permission: name='android.permission.WRITE_EXTERNAL_STORAGE'</span><br><span class="line">uses-permission: name='android.permission.READ_EXTERNAL_STORAGE'</span><br><span class="line">uses-permission: name='android.permission.CAMERA'</span><br><span class="line">uses-permission: name='android.permission.INTERNET'</span><br><span class="line">uses-permission: name='android.permission.READ_PHONE_STATE'</span><br><span class="line">uses-permission: name='android.permission.ACCESS_NETWORK_STATE'</span><br><span class="line">uses-permission: name='android.permission.CHANGE_WIFI_STATE'</span><br><span class="line">uses-permission: name='android.permission.ACCESS_WIFI_STATE'</span><br><span class="line">uses-permission: name='android.permission.WAKE_LOCK'</span><br><span class="line">uses-permission: name='android.permission.RECEIVE_BOOT_COMPLETED'</span><br><span class="line">uses-permission: name='android.permission.WRITE_EXTERNAL_STORAGE'</span><br><span class="line">uses-permission: name='android.permission.VIBRATE'</span><br><span class="line">uses-permission: name='android.permission.GET_TASKS'</span><br><span class="line">uses-permission: name='android.permission.BLUETOOTH'</span><br><span class="line">uses-permission: name='android.permission.BLUETOOTH_ADMIN'</span><br><span class="line">uses-permission: name='android.permission.ACCESS_FINE_LOCATION'</span><br><span class="line">uses-permission: name='android.permission.ACCESS_COARSE_LOCATION'</span><br><span class="line">uses-permission: name='android.permission.SYSTEM_ALERT_WINDOW'</span><br><span class="line">uses-permission: name='getui.permission.GetuiService.com.lemon.lemonban'</span><br><span class="line">uses-permission: name='android.permission.MOUNT_UNMOUNT_FILESYSTEMS'</span><br><span class="line">application-label:'柠檬班'</span><br><span class="line">application-label-af:'柠檬班'</span><br><span class="line">application-label-am:'柠檬班'</span><br><span class="line">application-label-ar:'柠檬班'</span><br><span class="line">application-label-az-AZ:'柠檬班'</span><br><span class="line">application-label-be-BY:'柠檬班'</span><br><span class="line">application-label-bg:'柠檬班'</span><br><span class="line">application-label-bn-BD:'柠檬班'</span><br><span class="line">application-label-bs-BA:'柠檬班'</span><br><span class="line">application-label-ca:'柠檬班'</span><br><span class="line">application-label-cs:'柠檬班'</span><br><span class="line">application-label-da:'柠檬班'</span><br><span class="line">application-label-de:'柠檬班'</span><br><span class="line">application-label-el:'柠檬班'</span><br><span class="line">application-label-en-AU:'柠檬班'</span><br><span class="line">application-label-en-GB:'柠檬班'</span><br><span class="line">application-label-en-IN:'柠檬班'</span><br><span class="line">application-label-es:'柠檬班'</span><br><span class="line">application-label-es-US:'柠檬班'</span><br><span class="line">application-label-et-EE:'柠檬班'</span><br><span class="line">application-label-eu-ES:'柠檬班'</span><br><span class="line">application-label-fa:'柠檬班'</span><br><span class="line">application-label-fi:'柠檬班'</span><br><span class="line">application-label-fr:'柠檬班'</span><br><span class="line">application-label-fr-CA:'柠檬班'</span><br><span class="line">application-label-gl-ES:'柠檬班'</span><br><span class="line">application-label-gu-IN:'柠檬班'</span><br><span class="line">application-label-hi:'柠檬班'</span><br><span class="line">application-label-hr:'柠檬班'</span><br><span class="line">application-label-hu:'柠檬班'</span><br><span class="line">application-label-hy-AM:'柠檬班'</span><br><span class="line">application-label-in:'柠檬班'</span><br><span class="line">application-label-is-IS:'柠檬班'</span><br><span class="line">application-label-it:'柠檬班'</span><br><span class="line">application-label-iw:'柠檬班'</span><br><span class="line">application-label-ja:'柠檬班'</span><br><span class="line">application-label-ka-GE:'柠檬班'</span><br><span class="line">application-label-kk-KZ:'柠檬班'</span><br><span class="line">application-label-km-KH:'柠檬班'</span><br><span class="line">application-label-kn-IN:'柠檬班'</span><br><span class="line">application-label-ko:'柠檬班'</span><br><span class="line">application-label-ky-KG:'柠檬班'</span><br><span class="line">application-label-lo-LA:'柠檬班'</span><br><span class="line">application-label-lt:'柠檬班'</span><br><span class="line">application-label-lv:'柠檬班'</span><br><span class="line">application-label-mk-MK:'柠檬班'</span><br><span class="line">application-label-ml-IN:'柠檬班'</span><br><span class="line">application-label-mn-MN:'柠檬班'</span><br><span class="line">application-label-mr-IN:'柠檬班'</span><br><span class="line">application-label-ms-MY:'柠檬班'</span><br><span class="line">application-label-my-MM:'柠檬班'</span><br><span class="line">application-label-nb:'柠檬班'</span><br><span class="line">application-label-ne-NP:'柠檬班'</span><br><span class="line">application-label-nl:'柠檬班'</span><br><span class="line">application-label-pa-IN:'柠檬班'</span><br><span class="line">application-label-pl:'柠檬班'</span><br><span class="line">application-label-pt:'柠檬班'</span><br><span class="line">application-label-pt-BR:'柠檬班'</span><br><span class="line">application-label-pt-PT:'柠檬班'</span><br><span class="line">application-label-ro:'柠檬班'</span><br><span class="line">application-label-ru:'柠檬班'</span><br><span class="line">application-label-si-LK:'柠檬班'</span><br><span class="line">application-label-sk:'柠檬班'</span><br><span class="line">application-label-sl:'柠檬班'</span><br><span class="line">application-label-sq-AL:'柠檬班'</span><br><span class="line">application-label-sr:'柠檬班'</span><br><span class="line">application-label-sr-Latn:'柠檬班'</span><br><span class="line">application-label-sv:'柠檬班'</span><br><span class="line">application-label-sw:'柠檬班'</span><br><span class="line">application-label-ta-IN:'柠檬班'</span><br><span class="line">application-label-te-IN:'柠檬班'</span><br><span class="line">application-label-th:'柠檬班'</span><br><span class="line">application-label-tl:'柠檬班'</span><br><span class="line">application-label-tr:'柠檬班'</span><br><span class="line">application-label-uk:'柠檬班'</span><br><span class="line">application-label-ur-PK:'柠檬班'</span><br><span class="line">application-label-uz-UZ:'柠檬班'</span><br><span class="line">application-label-vi:'柠檬班'</span><br><span class="line">application-label-zh:'柠檬班'</span><br><span class="line">application-label-zh-CN:'柠檬班'</span><br><span class="line">application-label-zh-HK:'柠檬班'</span><br><span class="line">application-label-zh-TW:'柠檬班'</span><br><span class="line">application-label-zu:'柠檬班'</span><br><span class="line">application-icon-120:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-160:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-240:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-320:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-480:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-640:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application-icon-65534:'res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">application: label='柠檬班' icon='res/mipmap-anydpi-v26/ic_launcher.xml'</span><br><span class="line">launchable-activity: name='com.lemon.lemonban.activity.WelcomeActivity'  label='' icon=''</span><br><span class="line">feature-group: label=''</span><br><span class="line">  uses-feature: name='android.hardware.bluetooth'</span><br><span class="line">  uses-implied-feature: name='android.hardware.bluetooth' reason='requested android.permission.BLUETOOTH permission, requested android.permission.BLUETOOTH_ADMIN permission, and targetSdkVersion &gt; 4'</span><br><span class="line">  uses-feature: name='android.hardware.camera'</span><br><span class="line">  uses-implied-feature: name='android.hardware.camera' reason='requested android.permission.CAMERA permission'</span><br><span class="line">  uses-feature: name='android.hardware.faketouch'</span><br><span class="line">  uses-implied-feature: name='android.hardware.faketouch' reason='default feature for all apps'</span><br><span class="line">  uses-feature: name='android.hardware.location'</span><br><span class="line">  uses-implied-feature: name='android.hardware.location' reason='requested android.permission.ACCESS_COARSE_LOCATION permission, and requested android.permission.ACCESS_FINE_LOCATION permission'</span><br><span class="line">  uses-feature: name='android.hardware.screen.portrait'</span><br><span class="line">  uses-implied-feature: name='android.hardware.screen.portrait' reason='one or more activities have specified a portrait orientation'</span><br><span class="line">  uses-feature: name='android.hardware.wifi'</span><br><span class="line">  uses-implied-feature: name='android.hardware.wifi' reason='requested android.permission.ACCESS_WIFI_STATE permission, and requested android.permission.CHANGE_WIFI_STATE permission'</span><br><span class="line">main</span><br><span class="line">other-activities</span><br><span class="line">other-receivers</span><br><span class="line">other-services</span><br><span class="line">supports-screens: 'small' 'normal' 'large' 'xlarge'</span><br><span class="line">supports-any-density: 'true'</span><br><span class="line">locales: '--_--' 'af' 'am' 'ar' 'az-AZ' 'be-BY' 'bg' 'bn-BD' 'bs-BA' 'ca' 'cs' 'da' 'de' 'el' 'en-AU' 'en-GB' 'en-IN' 'es' 'es-US' 'et-EE' 'eu-ES' 'fa' 'fi' 'fr' 'fr-CA' 'gl-ES' 'gu-IN' 'hi' 'hr' 'hu' 'hy-AM' 'in' 'is-IS' 'it' 'iw' 'ja' 'ka-GE' 'kk-KZ' 'km-KH' 'kn-IN' 'ko' 'ky-KG' 'lo-LA' 'lt' 'lv' 'mk-MK' 'ml-IN' 'mn-MN' 'mr-IN' 'ms-MY' 'my-MM' 'nb' 'ne-NP' 'nl' 'pa-IN' 'pl' 'pt' 'pt-BR' 'pt-PT' 'ro' 'ru' 'si-LK' 'sk' 'sl' 'sq-AL' 'sr' 'sr-Latn' 'sv' 'sw' 'ta-IN' 'te-IN' 'th' 'tl' 'tr' 'uk' 'ur-PK' 'uz-UZ' 'vi' 'zh' 'zh-CN' 'zh-HK' 'zh-TW' 'zu'</span><br><span class="line">densities: '120' '160' '240' '320' '480' '640' '65534'</span><br><span class="line">(base) zhongxindeMacBook-Pro:~ zhongxin$ </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="代码上连接设备"><a href="#代码上连接设备" class="headerlink" title="代码上连接设备"></a>代码上连接设备</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//配置设备信息</span></span><br><span class="line">        DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">        <span class="comment">//1.设备平台</span></span><br><span class="line">        capabilities.setCapability(<span class="string">"platformName"</span>, <span class="string">"Android"</span>);</span><br><span class="line">        <span class="comment">//2.设备名称</span></span><br><span class="line">        capabilities.setCapability(<span class="string">"deviceName"</span>, <span class="string">"127.0.0.1:62001"</span>);</span><br><span class="line">        <span class="comment">//3.APP包名</span></span><br><span class="line">        capabilities.setCapability(<span class="string">"appPackage"</span>, <span class="string">"com.lemon.lemonban"</span>);</span><br><span class="line">        <span class="comment">//4.App activity名称</span></span><br><span class="line">        capabilities.setCapability(<span class="string">"appActivity"</span>, <span class="string">"com.lemon.lemonban.activity.WelcomeActivity"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-app自动化环境搭建-31&quot;&gt;&lt;a href=&quot;#Java自动化测试-app自动化环境搭建-31&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(app自动化环境搭建 31)&quot;&gt;&lt;/a&gt;Java自动化测试(app自动化环境搭建 31)&lt;/h1&gt;&lt;h2 id=&quot;Appium&quot;&gt;&lt;a href=&quot;#Appium&quot; class=&quot;headerlink&quot; title=&quot;Appium&quot;&gt;&lt;/a&gt;Appium&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;官网：&lt;a href=&quot;http://appium.io/&quot;&gt;http://appium.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;github：&lt;a href=&quot;https://github.com/appium/appium&quot;&gt;https://github.com/appium/appium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Appium is an open source test automation framework for use with native, &lt;a href=&quot;http://appium.io/docs/en/writing-running-appium/web/hybrid/&quot;&gt;hybrid&lt;/a&gt; and mobile web apps.&lt;br&gt;It drives iOS, Android, and Windows apps using the WebDriver protocol.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;第三方自动化工具，扩充了Selenium WebDriver协议，在原有的基础上添加了移动端测试API&lt;/p&gt;
&lt;p&gt;是一个开源的，跨平台的自动化测试工具，可以用于app的自动化测试&lt;/p&gt;
&lt;p&gt;支持&lt;code&gt;android&lt;/code&gt;，&lt;code&gt;ios&lt;/code&gt;，&lt;code&gt;firefox os&lt;/code&gt;等操作系统下的app测试&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(无头浏览器 30)</title>
    <link href="http://zx490336534.github.io/article/133e5506.html"/>
    <id>http://zx490336534.github.io/article/133e5506.html</id>
    <published>2020-09-21T22:54:46.805Z</published>
    <updated>2021-03-03T14:29:02.775Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-无头浏览器-30"><a href="#Java自动化测试-无头浏览器-30" class="headerlink" title="Java自动化测试(无头浏览器 30)"></a>Java自动化测试(无头浏览器 30)</h1><h2 id="什么是chrome无头浏览器"><a href="#什么是chrome无头浏览器" class="headerlink" title="什么是chrome无头浏览器"></a>什么是chrome无头浏览器</h2><p>后台运行浏览器</p><h2 id="设置无头浏览器"><a href="#设置无头浏览器" class="headerlink" title="设置无头浏览器"></a>设置无头浏览器</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ChromeOptions chromeOptions = <span class="keyword">new</span> ChromeOptions();</span><br><span class="line">chromeOptions.addArguments(<span class="string">"--headless"</span>);</span><br><span class="line">driver = <span class="keyword">new</span> ChromeDriver(chromeOptions);</span><br></pre></td></tr></tbody></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-无头浏览器-30&quot;&gt;&lt;a href=&quot;#Java自动化测试-无头浏览器-30&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(无头浏览器 30)&quot;&gt;&lt;/a&gt;Java自动化测试(无头浏览器 30)&lt;/h1&gt;&lt;h2 id=&quot;什么是chrome无头浏览器&quot;&gt;&lt;a href=&quot;#什么是chrome无头浏览器&quot; class=&quot;headerlink&quot; title=&quot;什么是chrome无头浏览器&quot;&gt;&lt;/a&gt;什么是chrome无头浏览器&lt;/h2&gt;&lt;p&gt;后台运行浏览器&lt;/p&gt;
&lt;h2 id=&quot;设置无头浏览器&quot;&gt;&lt;a href=&quot;#设置无头浏览器&quot; class=&quot;headerlink&quot; title=&quot;设置无头浏览器&quot;&gt;&lt;/a&gt;设置无头浏览器&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ChromeOptions chromeOptions = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ChromeOptions();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chromeOptions.addArguments(&lt;span class=&quot;string&quot;&gt;&quot;--headless&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ChromeDriver(chromeOptions);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(web自动化测试框架2 29)</title>
    <link href="http://zx490336534.github.io/article/badd5c71.html"/>
    <id>http://zx490336534.github.io/article/badd5c71.html</id>
    <published>2020-09-16T23:11:50.643Z</published>
    <updated>2021-03-03T14:29:02.872Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-web自动化测试框架2-29"><a href="#Java自动化测试-web自动化测试框架2-29" class="headerlink" title="Java自动化测试(web自动化测试框架2 29)"></a>Java自动化测试(web自动化测试框架2 29)</h1><blockquote><p>项目地址:<a href="https://github.com/zx490336534/java_web_base">https://github.com/zx490336534/java_web_base</a></p></blockquote><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><span id="more"></span><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.common.BaseCase;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.OutputType;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.TakesScreenshot;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScreenShotDemo</span> <span class="keyword">extends</span> <span class="title">BaseCase</span> </span>{</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        WebDriver driver = open(<span class="string">"chrome"</span>);</span><br><span class="line">        driver.get(<span class="string">"htts://www.baidu.com"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        TakesScreenshot screenshot = (TakesScreenshot) driver;</span><br><span class="line">        File file = screenshot.getScreenshotAs(OutputType.FILE);</span><br><span class="line">        System.out.println(file.getAbsoluteFile());</span><br><span class="line">        File destFile = <span class="keyword">new</span> File(<span class="string">"aaa.png"</span>);</span><br><span class="line">        FileUtils.moveFile(file, destFile);</span><br><span class="line">        close(driver);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>强制类型转换<code>driver</code></p><p><code>TakesScreenshot screenshot = (TakesScreenshot) driver;</code></p><p>在执行测试的时候，使用截图的场景为：当执行失败的时候进行截图</p><p>需要使用<code>监听</code>，判断执行是否成功</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.cases.LoginCase;</span><br><span class="line"><span class="keyword">import</span> com.zhongxin.common.BaseCase;</span><br><span class="line"><span class="keyword">import</span> com.zhongxin.utils.ScreenShotUtils;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookCallBack;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookable;</span><br><span class="line"><span class="keyword">import</span> org.testng.ITestResult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScreenShotListener</span> <span class="keyword">implements</span> <span class="title">IHookable</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(IHookCallBack iHookCallBack, ITestResult iTestResult)</span> </span>{</span><br><span class="line">        <span class="comment">// iHookCallBack 用例执行@Test方法的</span></span><br><span class="line">        <span class="comment">// iTestResult @Test方法的结果(@Test对象/方法名/是否抛出异常)</span></span><br><span class="line">        iHookCallBack.runTestMethod(iTestResult);</span><br><span class="line">        Throwable throwable = iTestResult.getThrowable();</span><br><span class="line">        <span class="keyword">if</span> (throwable != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">//throwable不等于异常说明@Test出现异常了，执行截图</span></span><br><span class="line">            Object object = iTestResult.getInstance();</span><br><span class="line">            BaseCase logincase = (BaseCase) object;</span><br><span class="line">            <span class="comment">//获取当前@Test方法名</span></span><br><span class="line">            String methodName = iTestResult.getName();</span><br><span class="line">            <span class="comment">//获取当前@Test类名</span></span><br><span class="line">            String className = iTestResult.getInstanceName();</span><br><span class="line">            String destFilename = className + <span class="string">"_"</span> + methodName + <span class="string">"_"</span> + System.currentTimeMillis() + <span class="string">".png"</span>;</span><br><span class="line">            ScreenShotUtils.screenShot(logincase.driver, destFilename);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在<code>testng.xml</code>中添加</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">suite</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">"http://testng.org/testng-1.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">suite</span> <span class="attr">name</span>=<span class="string">"futureloan"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listeners</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener</span> <span class="attr">class-name</span>=<span class="string">"com.zhongxin.listeners.ScreenShotListener"</span>&gt;</span><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listeners</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">"登录测试"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">classes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.zhongxin.cases.LoginCase"</span>&gt;</span><span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">classes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">suite</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="将截图展示在Allure报告中"><a href="#将截图展示在Allure报告中" class="headerlink" title="将截图展示在Allure报告中"></a>将截图展示在Allure报告中</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.common.BaseCase;</span><br><span class="line"><span class="keyword">import</span> io.qameta.allure.Attachment;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.OutputType;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.TakesScreenshot;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookCallBack;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookable;</span><br><span class="line"><span class="keyword">import</span> org.testng.ITestResult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AllureReportListener</span> <span class="keyword">implements</span> <span class="title">IHookable</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Attachment(value = "Page screenshot", type = "image/png")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] saveScreenshot(<span class="keyword">byte</span>[] screenShot) {</span><br><span class="line">        <span class="keyword">return</span> screenShot;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(IHookCallBack iHookCallBack, ITestResult iTestResult)</span> </span>{</span><br><span class="line">        iHookCallBack.runTestMethod(iTestResult);</span><br><span class="line">        Throwable throwable = iTestResult.getThrowable();</span><br><span class="line">        <span class="keyword">if</span> (throwable != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">//throwable不等于异常说明@Test出现异常了，执行截图</span></span><br><span class="line">            Object object = iTestResult.getInstance();</span><br><span class="line">            BaseCase baseCase = (BaseCase) object;</span><br><span class="line">            TakesScreenshot screenshot = (TakesScreenshot) baseCase.driver;</span><br><span class="line">            <span class="keyword">byte</span>[] screenshotAs = screenshot.getScreenshotAs(OutputType.BYTES);</span><br><span class="line">            saveScreenshot(screenshotAs);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在<code>testng.xml</code>中</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listeners</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span> <span class="attr">class-name</span>=<span class="string">"com.zhongxin.listeners.AllureReportListener"</span>&gt;</span><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listeners</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="重试"><a href="#重试" class="headerlink" title="重试"></a>重试</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.testng.IRetryAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.testng.ITestResult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRetry</span> <span class="keyword">implements</span> <span class="title">IRetryAnalyzer</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> retryCount = <span class="number">0</span>;<span class="comment">//当前重试次数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> maxRetryCount = <span class="number">3</span>;<span class="comment">//最大重试次数</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">retry</span><span class="params">(ITestResult iTestResult)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (retryCount &lt; maxRetryCount) {</span><br><span class="line">            retryCount++;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在测试代码头部增加</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(retryAnalyzer = MyRetry.class)</span></span><br></pre></td></tr></tbody></table></figure><h3 id="全部添加重试"><a href="#全部添加重试" class="headerlink" title="全部添加重试"></a>全部添加重试</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.common.BaseCase;</span><br><span class="line"><span class="keyword">import</span> io.qameta.allure.Attachment;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.OutputType;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.TakesScreenshot;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookCallBack;</span><br><span class="line"><span class="keyword">import</span> org.testng.IHookable;</span><br><span class="line"><span class="keyword">import</span> org.testng.ITestResult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AllureReportListener</span> <span class="keyword">implements</span> <span class="title">IHookable</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Attachment(value = "Page screenshot", type = "image/png")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] saveScreenshot(<span class="keyword">byte</span>[] screenShot) {</span><br><span class="line">        <span class="keyword">return</span> screenShot;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(IHookCallBack iHookCallBack, ITestResult iTestResult)</span> </span>{</span><br><span class="line">        iHookCallBack.runTestMethod(iTestResult);</span><br><span class="line">        Throwable throwable = iTestResult.getThrowable();</span><br><span class="line">        <span class="keyword">if</span> (throwable != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">//throwable不等于异常说明@Test出现异常了，执行截图</span></span><br><span class="line">            Object object = iTestResult.getInstance();</span><br><span class="line">            BaseCase baseCase = (BaseCase) object;</span><br><span class="line">            TakesScreenshot screenshot = (TakesScreenshot) baseCase.driver;</span><br><span class="line">            <span class="keyword">byte</span>[] screenshotAs = screenshot.getScreenshotAs(OutputType.BYTES);</span><br><span class="line">            saveScreenshot(screenshotAs);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在<code>testng.xml</code>中</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span> <span class="attr">class-name</span>=<span class="string">"com.zhongxin.listeners.RetryListener"</span>&gt;</span><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-web自动化测试框架2-29&quot;&gt;&lt;a href=&quot;#Java自动化测试-web自动化测试框架2-29&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(web自动化测试框架2 29)&quot;&gt;&lt;/a&gt;Java自动化测试(web自动化测试框架2 29)&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;项目地址:&lt;a href=&quot;https://github.com/zx490336534/java_web_base&quot;&gt;https://github.com/zx490336534/java_web_base&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;截图&quot;&gt;&lt;a href=&quot;#截图&quot; class=&quot;headerlink&quot; title=&quot;截图&quot;&gt;&lt;/a&gt;截图&lt;/h2&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(web自动化测试框架 28)</title>
    <link href="http://zx490336534.github.io/article/ea141f.html"/>
    <id>http://zx490336534.github.io/article/ea141f.html</id>
    <published>2020-09-07T22:59:47.134Z</published>
    <updated>2021-03-03T14:29:02.865Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-web自动化测试框架-28"><a href="#Java自动化测试-web自动化测试框架-28" class="headerlink" title="Java自动化测试(web自动化测试框架 28)"></a>Java自动化测试(web自动化测试框架 28)</h1><h2 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h2><h3 id="测试地址"><a href="#测试地址" class="headerlink" title="测试地址"></a>测试地址</h3><p><a href="http://120.78.128.25:8765/">http://120.78.128.25:8765/</a></p><span id="more"></span><h3 id="投资人"><a href="#投资人" class="headerlink" title="投资人"></a>投资人</h3><p>13323234545</p><p>lemon123456</p><h3 id="借款人"><a href="#借款人" class="headerlink" title="借款人"></a>借款人</h3><p>13323234444</p><p>lemonbest</p><h3 id="后台地址"><a href="#后台地址" class="headerlink" title="后台地址"></a>后台地址</h3><p><a href="http://120.78.128.25:8765/Admin/Index/login.html">http://120.78.128.25:8765/Admin/Index/login.html</a></p><p>lemon7</p><p>lemonbest</p><h2 id="Page-Object"><a href="#Page-Object" class="headerlink" title="Page Object"></a>Page Object</h2><h3 id="PO简介"><a href="#PO简介" class="headerlink" title="PO简介"></a>PO简介</h3><blockquote><p><a href="https://www.selenium.dev/documentation/en/guidelines_and_recommendations/page_object_models/">https://www.selenium.dev/documentation/en/guidelines_and_recommendations/page_object_models/</a></p></blockquote><p><strong>Page Object</strong> 是 Selenium 自动化测试项目开发实践的最佳设计模式之一，Page Object 的主要体现于<strong>对界面交互细节的封装</strong>，这样可以使测试案例更关注与业务而非界面细节，提高测试案例的可读性。</p><p><strong>Page Object 设计模式的优点如下：</strong></p><ul><li>减少代码的重复；</li><li>提高测试用例的可读性；</li><li>提高测试用例的可维护性，特别是针对 UI 频繁变化的项目；</li></ul><p><strong>Paget Object 使用注意：</strong></p><ul><li>public方法代表Page提供的功能</li><li>尽量不要暴露Page的内部细节</li><li>不要assertion</li><li>方法可以返回其他Page Objects</li><li>Page Objects不用代表整个页面，可以是任意一个部分</li><li>一样的操作，不同的结果应该分开（正确登录，错误登录）</li></ul><p>使用po是对页面进行抽象或者说建模的过程，需要把页面当作一个对象。</p><p>面向对象编程语言中，进行面向对象编程需要考虑以下两点：</p><ol><li>对象的属性「全局变量」 == web页面的元素「定位方法，定位值」</li><li>对象的行为「方法」 == web页面的元素的操作</li></ol><h2 id="编写页面操作基类"><a href="#编写页面操作基类" class="headerlink" title="编写页面操作基类"></a>编写页面操作基类</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.pages;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.By;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebElement;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.ExpectedConditions;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.WebDriverWait;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasePage</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> WebDriver driver;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BasePage</span><span class="params">(WebDriver driver)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.driver = driver;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 封装显式等待</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by 元素定位信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 元素对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebElement <span class="title">waitElementBisibility</span><span class="params">(By by)</span> </span>{</span><br><span class="line">        WebElement element = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//5秒元素可见显式等待</span></span><br><span class="line">            WebDriverWait wait = <span class="keyword">new</span> WebDriverWait(driver, <span class="number">5</span>);</span><br><span class="line">            element = wait.until(ExpectedConditions.visibilityOfElementLocated(by));</span><br><span class="line">            <span class="keyword">return</span> element;</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            System.out.println(<span class="string">"元素定位异常"</span> + e.getMessage());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="登陆页面封装"><a href="#登陆页面封装" class="headerlink" title="登陆页面封装"></a>登陆页面封装</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.pages;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.By;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebElement;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.ExpectedConditions;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.WebDriverWait;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">BasePage</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> WebDriver driver;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// phone元素定位信息</span></span><br><span class="line">    <span class="keyword">private</span> By phoneBy = By.name(<span class="string">"phone"</span>);</span><br><span class="line">    <span class="comment">//password元素定位信息</span></span><br><span class="line">    <span class="keyword">private</span> By passwordBy = By.name(<span class="string">"password"</span>);</span><br><span class="line">    <span class="comment">//登陆按钮元素定位信息</span></span><br><span class="line">    <span class="keyword">private</span> By loginBtnBy = By.xpath(<span class="string">"//button[@class='btn btn-special']"</span>);</span><br><span class="line">    <span class="comment">//页面中央错误提示</span></span><br><span class="line">    <span class="keyword">private</span> By centerErrorBy = By.className(<span class="string">"layui-layer-content"</span>);</span><br><span class="line">    <span class="comment">//页面手机红色错误提示</span></span><br><span class="line">    <span class="keyword">private</span> By phoneformErrorBy = By.xpath(<span class="string">"//input[@name='phone']//following-sibling::div"</span>);</span><br><span class="line">    <span class="comment">//页面密码红色错误提示</span></span><br><span class="line">    <span class="keyword">private</span> By passwordformErrorBy = By.xpath(<span class="string">"//input[@name='password']//following-sibling::div"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LoginPage</span><span class="params">(WebDriver driver)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(driver);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//对手机框进行输入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inputPhone</span><span class="params">(String phone)</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(phoneBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            element.clear();</span><br><span class="line">            element.sendKeys(phone);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对密码框进行输入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inputPassword</span><span class="params">(String password)</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(passwordBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            element.clear();</span><br><span class="line">            element.sendKeys(password);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//点击登陆按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clickLoginBtn</span><span class="params">()</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(loginBtnBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            element.click();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取页面中央错误提示文本</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCenterErrorText</span><span class="params">()</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(centerErrorBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> element.getText();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取页面手机红色错误提示</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhoneFormErrorText</span><span class="params">()</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(phoneformErrorBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> element.getText();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取页面手机红色错误提示</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPasswordFormErrorText</span><span class="params">()</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(passwordformErrorBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> element.getText();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="首页封装"><a href="#首页封装" class="headerlink" title="首页封装"></a>首页封装</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.pages;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.By;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebElement;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.WebDriverWait;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexPage</span> <span class="keyword">extends</span> <span class="title">BasePage</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> WebDriver driver;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//昵称</span></span><br><span class="line">    <span class="keyword">private</span> By nicknameBy = By.xpath(<span class="string">"//a[contains(text(),'我的帐户[自动化测试帐号1]')]"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IndexPage</span><span class="params">(WebDriver driver)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(driver);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 昵称是否可见</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">nicknameIsVisibility</span><span class="params">()</span> </span>{</span><br><span class="line">        WebElement element = waitElementBisibility(nicknameBy);</span><br><span class="line">        <span class="keyword">if</span> (element != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> element.isDisplayed();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.pages.IndexPage;</span><br><span class="line"><span class="keyword">import</span> com.zhongxin.pages.LoginPage;</span><br><span class="line"><span class="keyword">import</span> okio.Timeout;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.*;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.chrome.ChromeDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.ie.InternetExplorerDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.ExpectedConditions;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.support.ui.WebDriverWait;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.AfterClass;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeClass;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.DataProvider;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginCase</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> WebDriver driver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//打开浏览器</span></span><br><span class="line">        driver = open(<span class="string">"chrome"</span>);</span><br><span class="line">        <span class="comment">//访问登陆页面</span></span><br><span class="line">        driver.get(<span class="string">"http://120.78.128.25:8765/Index/login.html"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailed01</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(<span class="string">"13212312312"</span>);</span><br><span class="line">        loginpage.inputPassword(<span class="string">"123123123"</span>);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        String actual = loginpage.getCenterErrorText();</span><br><span class="line">        String expected = <span class="string">"此账号没有经过授权，请联系管理员!"</span>;</span><br><span class="line">        Assert.assertEquals(actual, expected);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailed02</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(<span class="string">""</span>);</span><br><span class="line">        loginpage.inputPassword(<span class="string">"123123123"</span>);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        String actual = loginpage.getPhoneFormErrorText();</span><br><span class="line">        String expected = <span class="string">"请输入手机号"</span>;</span><br><span class="line">        Assert.assertEquals(actual, expected);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dataProvider = "datas")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailed03</span><span class="params">(String phone, String password, String expected)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(phone);</span><br><span class="line">        loginpage.inputPassword(password);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        String actual = loginpage.getPhoneFormErrorText();</span><br><span class="line">        Assert.assertEquals(actual, expected);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailed04</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(<span class="string">"15859019251"</span>);</span><br><span class="line">        loginpage.inputPassword(<span class="string">""</span>);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        String actual = loginpage.getPasswordFormErrorText();</span><br><span class="line">        Assert.assertEquals(actual, <span class="string">"请输入密码"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailed05</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(<span class="string">"13323234545"</span>);</span><br><span class="line">        loginpage.inputPassword(<span class="string">"123123123"</span>);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        String actual = loginpage.getCenterErrorText();</span><br><span class="line">        Assert.assertEquals(actual, <span class="string">"帐号或密码错误!"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSuccess</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        LoginPage loginpage = <span class="keyword">new</span> LoginPage(driver);</span><br><span class="line">        loginpage.inputPhone(<span class="string">"13323234545"</span>);</span><br><span class="line">        loginpage.inputPassword(<span class="string">"lemon123456"</span>);</span><br><span class="line">        loginpage.clickLoginBtn();</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        IndexPage indexPage = <span class="keyword">new</span> IndexPage(driver);</span><br><span class="line">        <span class="keyword">boolean</span> flag = indexPage.nicknameIsVisibility();</span><br><span class="line">        Assert.assertTrue(flag);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DataProvider</span></span><br><span class="line">    <span class="keyword">public</span> Object[][] datas() {</span><br><span class="line">        Object[][] datas = {</span><br><span class="line">                {<span class="string">""</span>, <span class="string">"123123123"</span>, <span class="string">"请输入手机号"</span>},</span><br><span class="line">                {<span class="string">"1585901925"</span>, <span class="string">"123123123"</span>, <span class="string">"请输入正确的手机号"</span>},</span><br><span class="line">                {<span class="string">"158590192534"</span>, <span class="string">"123123123"</span>, <span class="string">"请输入正确的手机号"</span>},</span><br><span class="line">                {<span class="string">"1585901925%"</span>, <span class="string">"123123123"</span>, <span class="string">"请输入正确的手机号"</span>},</span><br><span class="line">        };</span><br><span class="line">        <span class="keyword">return</span> datas;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        <span class="comment">//关闭浏览器</span></span><br><span class="line">        close(driver);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(WebDriver driver)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        driver.quit();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> WebDriver <span class="title">open</span><span class="params">(String type)</span> </span>{</span><br><span class="line">        WebDriver driver = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"chrome"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.chrome.driver"</span>, <span class="string">"src/test/resources/chromedriver"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"ie"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            <span class="comment">// 设置ie启动项</span></span><br><span class="line">            DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">            <span class="comment">// 忽略缩放</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 忽略保护模式</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 设置初始化浏览器地址</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INITIAL_BROWSER_URL, <span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">            <span class="comment">// 配置ie驱动位置</span></span><br><span class="line">            System.setProperty(<span class="string">"webdriver.ie.driver"</span>, <span class="string">"src/test/resources/IEDriverServer.exe"</span>);</span><br><span class="line">            <span class="comment">// 创建ie驱动对象</span></span><br><span class="line">            driver = <span class="keyword">new</span> InternetExplorerDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"firefox"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.bin"</span>, <span class="string">"D:\\Mozilla Firefox\\firefox.exe"</span>);</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.driver"</span>, <span class="string">"src/test/resources/geckodriver.exe"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> FirefoxDriver();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> driver;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-web自动化测试框架-28&quot;&gt;&lt;a href=&quot;#Java自动化测试-web自动化测试框架-28&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(web自动化测试框架 28)&quot;&gt;&lt;/a&gt;Java自动化测试(web自动化测试框架 28)&lt;/h1&gt;&lt;h2 id=&quot;测试数据&quot;&gt;&lt;a href=&quot;#测试数据&quot; class=&quot;headerlink&quot; title=&quot;测试数据&quot;&gt;&lt;/a&gt;测试数据&lt;/h2&gt;&lt;h3 id=&quot;测试地址&quot;&gt;&lt;a href=&quot;#测试地址&quot; class=&quot;headerlink&quot; title=&quot;测试地址&quot;&gt;&lt;/a&gt;测试地址&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://120.78.128.25:8765/&quot;&gt;http://120.78.128.25:8765/&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(自动化测试背景与流程 27)</title>
    <link href="http://zx490336534.github.io/article/3d748498.html"/>
    <id>http://zx490336534.github.io/article/3d748498.html</id>
    <published>2020-09-07T22:34:25.353Z</published>
    <updated>2021-03-03T14:29:02.822Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-自动化测试背景与流程-27"><a href="#Java自动化测试-自动化测试背景与流程-27" class="headerlink" title="Java自动化测试(自动化测试背景与流程 27)"></a>Java自动化测试(自动化测试背景与流程 27)</h1><h2 id="自动化测试背景"><a href="#自动化测试背景" class="headerlink" title="自动化测试背景"></a>自动化测试背景</h2><h3 id="什么是自动化测试"><a href="#什么是自动化测试" class="headerlink" title="什么是自动化测试"></a>什么是自动化测试</h3><p>机器代替手工测试，自动验证结果是否符合预期</p><h3 id="自动化测试优点"><a href="#自动化测试优点" class="headerlink" title="自动化测试优点"></a>自动化测试优点</h3><ol><li>替代大量重复手工测试</li><li>提升回归测试效率，适合敏捷开发</li><li>在非工作时间自动执行，工作时间查看测试报告</li><li>保证每次测试执行的一致性与正确性，避免人为错误</li></ol><h3 id="自动化测试劣势"><a href="#自动化测试劣势" class="headerlink" title="自动化测试劣势"></a>自动化测试劣势</h3><ol><li>一般用于回归测试，项目开发初期不适合使用自动化</li><li>不能全部取代手工测试，只能替代手工测试中机械化，重复度高的操作，自动化测试极少能够达到100%覆盖率</li><li>自动化测试非常脆弱，特别是UI自动化</li><li>自动化测试工作量(框架设计+脚本开发)比单次手工测试大很多，当自动化多次执行时，性价比才会凸显<span id="more"></span><h3 id="自动化测试实施流程"><a href="#自动化测试实施流程" class="headerlink" title="自动化测试实施流程"></a>自动化测试实施流程</h3></li></ol><h3 id="1-评估自动化测试实施可行性"><a href="#1-评估自动化测试实施可行性" class="headerlink" title="1.评估自动化测试实施可行性"></a>1.评估自动化测试实施可行性</h3><p>想要开展自动化测试，应该遵循以下几个前提条件：</p><ol><li>需求稳定，不会频繁变更</li><li>研发和维护周期长，需要频繁执行回归测试</li><li>项目资源足够「人力」</li></ol><h3 id="2-测试需求分析"><a href="#2-测试需求分析" class="headerlink" title="2.测试需求分析"></a>2.测试需求分析</h3><p>自动化测试到底要做到什么程度</p><p>自动化测试覆盖范围：</p><ul><li>主业务流程</li><li>历史BUG较多的模块</li><li>基础重复的功能</li><li>优先级</li></ul><h3 id="3-制定测试计划"><a href="#3-制定测试计划" class="headerlink" title="3.制定测试计划"></a>3.制定测试计划</h3><p>测试工具/框架选型</p><ul><li>接口自动化：TestNG+HttpClient+Maven+Allure+Log4j</li><li>web自动化：TestNG+Selenium</li></ul><p>框架设计，自动化测试脚本开发时间计划表</p><p>脚本执行的策略，冒烟测试/回归测试的频率</p><p>定义自动化测试的输出，测试框架，测试脚本，测试数据，发现的缺陷，测试报告</p><h4 id="测试数据生成"><a href="#测试数据生成" class="headerlink" title="测试数据生成"></a>测试数据生成</h4><ol><li>UI方法：人工方式造数据</li><li>接口方法：效率高 用的最多 有保证的</li><li>数据库：效率高 添加数据影响到其他的数据表 不能确保正确性</li></ol><h3 id="4-搭建自动化测试环境，设计框架"><a href="#4-搭建自动化测试环境，设计框架" class="headerlink" title="4.搭建自动化测试环境，设计框架"></a>4.搭建自动化测试环境，设计框架</h3><h3 id="5-开发自动化测试脚本"><a href="#5-开发自动化测试脚本" class="headerlink" title="5.开发自动化测试脚本"></a>5.开发自动化测试脚本</h3><p>手工测试用例转自动化测试用例的过程</p><h3 id="6-执行自动化测试"><a href="#6-执行自动化测试" class="headerlink" title="6.执行自动化测试"></a>6.执行自动化测试</h3><p>本地执行：IDE调试/执行</p><p>持续集成平台：jenkins</p><h3 id="7-分析自动化测试结果"><a href="#7-分析自动化测试结果" class="headerlink" title="7.分析自动化测试结果"></a>7.分析自动化测试结果</h3><p>自动化用例失败了</p><ul><li>BUG</li><li>脚本设计/稳定性问题</li></ul><h3 id="8-框架-脚本维护"><a href="#8-框架-脚本维护" class="headerlink" title="8.框架/脚本维护"></a>8.框架/脚本维护</h3><p>周期最长</p><ul><li>框架优化</li><li>需求变更</li></ul><h3 id="9-成功展示「落地」"><a href="#9-成功展示「落地」" class="headerlink" title="9.成功展示「落地」"></a>9.成功展示「落地」</h3><ul><li><p>自动化测试用例覆盖，一般为20%的自动化测试，80%的手工测试</p></li><li><p>节省的时间成本：手工测试花费的时间-自动化测试所花的时间</p></li><li><p>自动化测试发现的缺陷数：保证质量，不能保证发现很多BUG</p></li><li><p>自动化测试的投入产出ROI「越高越好」</p></li></ul><p>(手工测试的成本-自动化测试成本)/自动化测试脚本</p><h2 id="自动化测试可以达到100-覆盖率吗"><a href="#自动化测试可以达到100-覆盖率吗" class="headerlink" title="自动化测试可以达到100%覆盖率吗"></a>自动化测试可以达到100%覆盖率吗</h2><p>有些用例场景无法被自动化</p><p>一些验证易用性，友好性，美观的用例不适合做自动化</p><p>有些边缘用例很少被重复执行，从ROI角度考虑不适合做自动化</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-自动化测试背景与流程-27&quot;&gt;&lt;a href=&quot;#Java自动化测试-自动化测试背景与流程-27&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(自动化测试背景与流程 27)&quot;&gt;&lt;/a&gt;Java自动化测试(自动化测试背景与流程 27)&lt;/h1&gt;&lt;h2 id=&quot;自动化测试背景&quot;&gt;&lt;a href=&quot;#自动化测试背景&quot; class=&quot;headerlink&quot; title=&quot;自动化测试背景&quot;&gt;&lt;/a&gt;自动化测试背景&lt;/h2&gt;&lt;h3 id=&quot;什么是自动化测试&quot;&gt;&lt;a href=&quot;#什么是自动化测试&quot; class=&quot;headerlink&quot; title=&quot;什么是自动化测试&quot;&gt;&lt;/a&gt;什么是自动化测试&lt;/h3&gt;&lt;p&gt;机器代替手工测试，自动验证结果是否符合预期&lt;/p&gt;
&lt;h3 id=&quot;自动化测试优点&quot;&gt;&lt;a href=&quot;#自动化测试优点&quot; class=&quot;headerlink&quot; title=&quot;自动化测试优点&quot;&gt;&lt;/a&gt;自动化测试优点&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;替代大量重复手工测试&lt;/li&gt;
&lt;li&gt;提升回归测试效率，适合敏捷开发&lt;/li&gt;
&lt;li&gt;在非工作时间自动执行，工作时间查看测试报告&lt;/li&gt;
&lt;li&gt;保证每次测试执行的一致性与正确性，避免人为错误&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;自动化测试劣势&quot;&gt;&lt;a href=&quot;#自动化测试劣势&quot; class=&quot;headerlink&quot; title=&quot;自动化测试劣势&quot;&gt;&lt;/a&gt;自动化测试劣势&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;一般用于回归测试，项目开发初期不适合使用自动化&lt;/li&gt;
&lt;li&gt;不能全部取代手工测试，只能替代手工测试中机械化，重复度高的操作，自动化测试极少能够达到100%覆盖率&lt;/li&gt;
&lt;li&gt;自动化测试非常脆弱，特别是UI自动化&lt;/li&gt;
&lt;li&gt;自动化测试工作量(框架设计+脚本开发)比单次手工测试大很多，当自动化多次执行时，性价比才会凸显&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(特殊元素处理 26)</title>
    <link href="http://zx490336534.github.io/article/e57525d6.html"/>
    <id>http://zx490336534.github.io/article/e57525d6.html</id>
    <published>2020-09-06T22:43:35.656Z</published>
    <updated>2021-03-03T14:29:02.853Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-特殊元素处理-26"><a href="#Java自动化测试-特殊元素处理-26" class="headerlink" title="Java自动化测试(特殊元素处理 26)"></a>Java自动化测试(特殊元素处理 26)</h1><h2 id="时间控件"><a href="#时间控件" class="headerlink" title="时间控件"></a>时间控件</h2><h3 id="可输入"><a href="#可输入" class="headerlink" title="可输入"></a>可输入</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"https://www.fliggy.com/?ttid=seo.000000574&amp;seoType=origin"</span>);</span><br><span class="line">WebElement element = driver.findElement(By.xpath(<span class="string">"//div[@class='search-field']//div[@class='calendar-input-wrap']//input[@placeholder='yyyy-mm-dd']"</span>));</span><br><span class="line">element.sendKeys(<span class="string">"aaa"</span>);</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihpdmye9aj312q0hgdj1.jpg" alt="飞猪"></p><h3 id="不可输入"><a href="#不可输入" class="headerlink" title="不可输入"></a>不可输入</h3><p>在<code>html</code>中有<code>readonly</code>的时间控件</p><span id="more"></span><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihph1vr9mj318u09kq54.jpg" alt="readonly"></p><h4 id="方案一：在控件弹框中点击"><a href="#方案一：在控件弹框中点击" class="headerlink" title="方案一：在控件弹框中点击"></a>方案一：在控件弹框中点击</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"https://www.12306.cn/index/"</span>);</span><br><span class="line">driver.findElement(By.id(<span class="string">"train_date"</span>)).click();</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">driver.findElement(By.xpath(<span class="string">"//div[@class='cal']//div[8]"</span>)).click();</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihpe3zbghj318u0nwwo3.jpg" alt="12306"></p><h4 id="方案二：使用js修改页面"><a href="#方案二：使用js修改页面" class="headerlink" title="方案二：使用js修改页面"></a>方案二：使用js修改页面</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"https://www.12306.cn/index/"</span>);</span><br><span class="line">JavascriptExecutor jsExecutor = (JavascriptExecutor) driver;</span><br><span class="line">jsExecutor.executeScript(<span class="string">"document.getElementById('train_date').removeAttribute('readonly')"</span>);</span><br><span class="line">WebElement train_date = driver.findElement(By.id(<span class="string">"train_date"</span>));</span><br><span class="line">train_date.clear();</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">train_date.sendKeys(<span class="string">"2020-11-11"</span>);</span><br><span class="line">Thread.sleep(<span class="number">3000</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="executeScript定位元素的方法"><a href="#executeScript定位元素的方法" class="headerlink" title="executeScript定位元素的方法"></a>executeScript定位元素的方法</h2><h3 id="不传参"><a href="#不传参" class="headerlink" title="不传参"></a>不传参</h3><p>可以全部使用JavaScript的语法定位</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jsExecutor.executeScript(<span class="string">"document.getElementById('train_date').removeAttribute('readonly')"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h3><p>也可以使用定位到的元素来进行定位</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"https://www.12306.cn/index/"</span>);</span><br><span class="line">JavascriptExecutor jsExecutor = (JavascriptExecutor) driver;</span><br><span class="line">WebElement train_date = driver.findElement(By.id(<span class="string">"train_date"</span>));</span><br><span class="line">jsExecutor.executeScript(<span class="string">"arguments[0].removeAttribute('readonly')"</span>, train_date);</span><br></pre></td></tr></tbody></table></figure><p>可以替换多个内容</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jsExecutor.executeScript(<span class="string">"arguments[0].removeAttribute(arguments[1])"</span>, train_date, <span class="string">"readonly"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="常见使用场景"><a href="#常见使用场景" class="headerlink" title="常见使用场景"></a>常见使用场景</h2><ul><li>设置，去除元素属性</li><li>页面滚动</li></ul><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">windows.scrollTo(<span class="number">0</span>,<span class="built_in">document</span>.body.scrollHeight) 滚动到页面最底部</span><br><span class="line">Element.scrollIntoViewIfNeeded() 滚动到指定元素的位置</span><br></pre></td></tr></tbody></table></figure><h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><h3 id="直接输入"><a href="#直接输入" class="headerlink" title="直接输入"></a>直接输入</h3><p>测试页面：</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文件上传<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"file"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"src/test/resources/file.html"</span>);</span><br><span class="line">driver.findElement(By.id(<span class="string">"file"</span>)).sendKeys(<span class="string">"aaa"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="无法直接输入"><a href="#无法直接输入" class="headerlink" title="无法直接输入"></a>无法直接输入</h3><p>针对不是 input 类型的元素，我们可以使用第三方的自动化工具，比如：Auto，对 windows 控件元素进行操作</p><p>以下是其官网介绍：</p><blockquote><p>AutoIt v3 is a freeware BASIC-like scripting language designed for automating the Windows GUI and general scripting. It uses a combination of simulated keystrokes, mouse movement and window/control manipulation in order to automate tasks in a way not possible or reliable with other languages (e.g. VBScript and SendKeys).</p></blockquote><p>翻译过来就是：</p><p>AutoIT 是类似于 Basic 脚本语言的免费软件，利用它我们可以实现对 windows 的 GUI 界面进行自动化操作，balabala…</p><p>官网地址：<a href="http://testingpai.com/forward?goto=https://www.autoitscript.com/site/autoit/">https://www.autoitscript.com/site/autoit/</a></p><p>强烈建议先去看官方文档：<a href="http://testingpai.com/forward?goto=https://www.autoitscript.com/autoit3/docs/">https://www.autoitscript.com/autoit3/docs/</a>，对工具的使用和脚本编写语法描述的非常详细</p><h4 id="step1：下载安装"><a href="#step1：下载安装" class="headerlink" title="step1：下载安装"></a>step1：下载安装</h4><p>下载页面在这里：<a href="http://testingpai.com/forward?goto=https://www.autoitscript.com/site/autoit/downloads/">https://www.autoitscript.com/site/autoit/downloads/</a></p><p>点击下载即可，下载完下一步直到安装完毕</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihqb8sqvuj30x409oabh.jpg" alt="image.png"></p><p>安装完毕会有如下几个应用：</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihqbhqtb8j30ah0fw0xb.jpg" alt="image.png"></p><p>其中我们用得到的有：</p><ul><li><strong>AutoIT Window Info</strong> 识别 Windows 元素信息</li><li><strong>Complie Script to .exe</strong> 将 AutoIT 编写的脚本编译成 exe 可执行文件</li><li><strong>Run Script</strong> 运行 AutoIT 脚本</li><li><strong>SciTE Script Editor</strong> 编写 AutoIT 脚本</li></ul><p>注意：官方推荐使用 X86 版本，这样兼容性问题会少些</p><h4 id="step2：使用-AutoIT"><a href="#step2：使用-AutoIT" class="headerlink" title="step2：使用 AutoIT"></a>step2：使用 AutoIT</h4><ol><li>将上传的 Windows 窗口打开</li><li>打开 <strong>AutoIT Window Info</strong> 工具，Finder Tool 下的图标一直按住，选择窗口中要识别的元素（文件名后面的输入框以及打开按钮），分别记录下此时的 Tile、Class 等信息</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihqbnoravj30x70ikadn.jpg" alt="image.png"></p><ol><li>打开 <strong>SciTE Script Editor</strong>，开始进行脚本编写（注意元素的定位是由 Class 和 Instance 进行拼接的，如 Class 为 Edit，Instance 为 1，那么定位表达式为 Edit1）</li></ol><figure class="highlight vbs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">;等待“打开”窗口</span><br><span class="line">WinWaitActive(<span class="string">"打开"</span>)</span><br><span class="line">;休眠<span class="number">2</span>秒</span><br><span class="line">Sleep(<span class="number">2000</span>)</span><br><span class="line">;在输入框中写入上传文件的路径</span><br><span class="line">ControlSetText(<span class="string">"打开"</span>, <span class="string">""</span>, <span class="string">"Edit1"</span>, <span class="string">"d:\java_auto\test.png"</span>)</span><br><span class="line">;休眠<span class="number">2</span>秒</span><br><span class="line">Sleep(<span class="number">2000</span>)</span><br><span class="line">;点击打开按钮</span><br><span class="line">ControlClick(<span class="string">"打开"</span>, <span class="string">""</span>,<span class="string">"Button1"</span>);</span><br></pre></td></tr></tbody></table></figure><ol><li>选择工具栏上面的 Tools-Go 先去运行下脚本，试运行 OK 之后将脚本保存，后缀为 au3</li><li>选择 <strong>Complie Script to .exe</strong> 工具把脚本编译为 exe 文件</li><li>Java 代码本地执行 exe 文件</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ChromeDriver driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">driver.get(<span class="string">"D:\\fileupload.html"</span>);</span><br><span class="line">Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">driver.findElement(By.id(<span class="string">"fu"</span>)).click();</span><br><span class="line"><span class="comment">//Java运行时对象</span></span><br><span class="line">Runtime runtime = Runtime.getRuntime();</span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">//执行</span></span><br><span class="line">    runtime.exec(<span class="string">"D:\\upload.exe"</span>);</span><br><span class="line">}<span class="keyword">catch</span> (IOException e){</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>运行效果</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gihqbzxqvqg30zv0kkws1.gif" alt="image.png"></p><h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><ul><li>去除验证码-测试环境</li><li>自动识别，OCR</li><li>万能验证码，在后端开一个后门</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-特殊元素处理-26&quot;&gt;&lt;a href=&quot;#Java自动化测试-特殊元素处理-26&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(特殊元素处理 26)&quot;&gt;&lt;/a&gt;Java自动化测试(特殊元素处理 26)&lt;/h1&gt;&lt;h2 id=&quot;时间控件&quot;&gt;&lt;a href=&quot;#时间控件&quot; class=&quot;headerlink&quot; title=&quot;时间控件&quot;&gt;&lt;/a&gt;时间控件&lt;/h2&gt;&lt;h3 id=&quot;可输入&quot;&gt;&lt;a href=&quot;#可输入&quot; class=&quot;headerlink&quot; title=&quot;可输入&quot;&gt;&lt;/a&gt;可输入&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;driver.get(&lt;span class=&quot;string&quot;&gt;&quot;https://www.fliggy.com/?ttid=seo.000000574&amp;amp;seoType=origin&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WebElement element = driver.findElement(By.xpath(&lt;span class=&quot;string&quot;&gt;&quot;//div[@class=&#39;search-field&#39;]//div[@class=&#39;calendar-input-wrap&#39;]//input[@placeholder=&#39;yyyy-mm-dd&#39;]&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;element.sendKeys(&lt;span class=&quot;string&quot;&gt;&quot;aaa&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlly1gihpdmye9aj312q0hgdj1.jpg&quot; alt=&quot;飞猪&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;不可输入&quot;&gt;&lt;a href=&quot;#不可输入&quot; class=&quot;headerlink&quot; title=&quot;不可输入&quot;&gt;&lt;/a&gt;不可输入&lt;/h3&gt;&lt;p&gt;在&lt;code&gt;html&lt;/code&gt;中有&lt;code&gt;readonly&lt;/code&gt;的时间控件&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(特殊元素处理 25)</title>
    <link href="http://zx490336534.github.io/article/ce587615.html"/>
    <id>http://zx490336534.github.io/article/ce587615.html</id>
    <published>2020-09-02T22:56:29.466Z</published>
    <updated>2021-03-03T14:29:02.895Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-特殊元素处理-25"><a href="#Java自动化测试-特殊元素处理-25" class="headerlink" title="Java自动化测试(特殊元素处理 25)"></a>Java自动化测试(特殊元素处理 25)</h1><h2 id="下拉框"><a href="#下拉框" class="headerlink" title="下拉框"></a>下拉框</h2><ol><li>找到下拉框所在元素</li><li>导入<code>import org.openqa.selenium.support.ui.Select;</code></li><li>新建<code>Select</code>对象</li><li>通过<code>getOptions</code>拿到全部选项内容</li><li>通过<code>selectByIndex</code>或者<code>selectByValue</code>或者<code>selectByVisibleText</code>分别以<code>index</code>,<code>value</code>,<code>text</code>来选择</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">WebElement selectElement = driver.findElement(By.id(<span class="string">"modules"</span>));</span><br><span class="line">Select select = <span class="keyword">new</span> Select(selectElement);</span><br><span class="line">List&lt;WebElement&gt; options = select.getOptions();</span><br><span class="line">System.out.println(options);</span><br><span class="line">System.out.println(select.isMultiple());</span><br><span class="line">select.selectByIndex(<span class="number">1</span>);</span><br><span class="line">Thread.sleep(<span class="number">200</span>);</span><br><span class="line">select.selectByValue(<span class="string">"20"</span>);</span><br><span class="line">Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">select.selectByVisibleText(<span class="string">"switch"</span>);</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><p>需要将driver的焦点切换到iframe中</p><h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p>页面上从0开始的iframe</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().frame(index);</span><br></pre></td></tr></tbody></table></figure><h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><p>元素的id名称</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().frame(nameOrId);</span><br></pre></td></tr></tbody></table></figure><h3 id="iframe-WebElement"><a href="#iframe-WebElement" class="headerlink" title="iframe WebElement"></a>iframe WebElement</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().frame(WebElement);</span><br></pre></td></tr></tbody></table></figure><h3 id="跳转到父级iframe中"><a href="#跳转到父级iframe中" class="headerlink" title="跳转到父级iframe中"></a>跳转到父级iframe中</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().parentFrame()</span><br></pre></td></tr></tbody></table></figure><h3 id="回到默认内容页面"><a href="#回到默认内容页面" class="headerlink" title="回到默认内容页面"></a>回到默认内容页面</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().defaultContent()</span><br></pre></td></tr></tbody></table></figure><h2 id="切换windows窗口"><a href="#切换windows窗口" class="headerlink" title="切换windows窗口"></a>切换windows窗口</h2><p>打开新页面之后需要进行切换才能定位到新页面的内容</p><p>切换需要传入窗口的handle句柄</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().window(nameOrHandle)</span><br></pre></td></tr></tbody></table></figure><h3 id="获取句柄"><a href="#获取句柄" class="headerlink" title="获取句柄"></a>获取句柄</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.getwindowHandle(); <span class="comment">//获取当前窗口句柄</span></span><br><span class="line">driver.getwindowHandles();<span class="comment">//获取全部窗口句柄</span></span><br></pre></td></tr></tbody></table></figure><h2 id="切换Alart弹框"><a href="#切换Alart弹框" class="headerlink" title="切换Alart弹框"></a>切换Alart弹框</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switchTo().alart()</span><br></pre></td></tr></tbody></table></figure><h3 id="获取弹出框中的提示信息"><a href="#获取弹出框中的提示信息" class="headerlink" title="获取弹出框中的提示信息"></a>获取弹出框中的提示信息</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alart.getText()</span><br></pre></td></tr></tbody></table></figure><h3 id="点击确认按钮"><a href="#点击确认按钮" class="headerlink" title="点击确认按钮"></a>点击确认按钮</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alart.accept()</span><br></pre></td></tr></tbody></table></figure><h3 id="点击取消按钮"><a href="#点击取消按钮" class="headerlink" title="点击取消按钮"></a>点击取消按钮</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alart.dismiss();</span><br></pre></td></tr></tbody></table></figure><h2 id="鼠标操作"><a href="#鼠标操作" class="headerlink" title="鼠标操作"></a>鼠标操作</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">clickAndHold() <span class="comment">//左键点击并且不释放</span></span><br><span class="line">release()      <span class="comment">//在特定元素上释放左键</span></span><br><span class="line">doubleClick()  <span class="comment">//双击左键</span></span><br><span class="line">moveToElement()<span class="comment">//移动鼠标指针到特定元素</span></span><br><span class="line">contextClick() <span class="comment">//在特定元素上右键点击</span></span><br><span class="line">dragAndDrop()  <span class="comment">//拖拽元素</span></span><br><span class="line">perform()      <span class="comment">//执行具体操作，前面方法都是声明操作，调用perform后才会执行</span></span><br></pre></td></tr></tbody></table></figure><p>完成一系列操作：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Actions actions = <span class="keyword">new</span> Actions(driver);</span><br><span class="line">WebElement a = driver.findElement(By.id(<span class="string">"a"</span>));</span><br><span class="line">WebElement b = driver.findElement(By.id(<span class="string">"b"</span>));</span><br><span class="line">actions.clickAndHold(a).moveToElement(b).release().perform();</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-特殊元素处理-25&quot;&gt;&lt;a href=&quot;#Java自动化测试-特殊元素处理-25&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(特殊元素处理 25)&quot;&gt;&lt;/a&gt;Java自动化测试(特殊元素处理 25)&lt;/h1&gt;&lt;h2 id=&quot;下拉框&quot;&gt;&lt;a href=&quot;#下拉框&quot; class=&quot;headerlink&quot; title=&quot;下拉框&quot;&gt;&lt;/a&gt;下拉框&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;找到下拉框所在元素&lt;/li&gt;
&lt;li&gt;导入&lt;code&gt;import org.openqa.selenium.support.ui.Select;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;新建&lt;code&gt;Select&lt;/code&gt;对象&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;getOptions&lt;/code&gt;拿到全部选项内容&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;selectByIndex&lt;/code&gt;或者&lt;code&gt;selectByValue&lt;/code&gt;或者&lt;code&gt;selectByVisibleText&lt;/code&gt;分别以&lt;code&gt;index&lt;/code&gt;,&lt;code&gt;value&lt;/code&gt;,&lt;code&gt;text&lt;/code&gt;来选择&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;WebElement selectElement = driver.findElement(By.id(&lt;span class=&quot;string&quot;&gt;&quot;modules&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Select select = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Select(selectElement);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;WebElement&amp;gt; options = select.getOptions();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(options);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(select.isMultiple());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select.selectByIndex(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Thread.sleep(&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select.selectByValue(&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Thread.sleep(&lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select.selectByVisibleText(&lt;span class=&quot;string&quot;&gt;&quot;switch&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(webdriver常用API 24)</title>
    <link href="http://zx490336534.github.io/article/498f9c83.html"/>
    <id>http://zx490336534.github.io/article/498f9c83.html</id>
    <published>2020-08-31T23:06:13.568Z</published>
    <updated>2021-03-03T14:29:02.777Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-webdriver常用API-24"><a href="#Java自动化测试-webdriver常用API-24" class="headerlink" title="Java自动化测试(webdriver常用API 24)"></a>Java自动化测试(webdriver常用API 24)</h1><h2 id="元素基本API"><a href="#元素基本API" class="headerlink" title="元素基本API"></a>元素基本API</h2><h3 id="click"><a href="#click" class="headerlink" title="click"></a>click</h3><p>触发当前元素的点击事件</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"https://www.ketangpai.com/"</span>);</span><br><span class="line">WebElement element = driver.findElement(By.xpath(<span class="string">"//a[text()='教师培训']"</span>));</span><br><span class="line">element.click();</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>清空内容</p><h3 id="sendKeys"><a href="#sendKeys" class="headerlink" title="sendKeys"></a>sendKeys</h3><ol><li>往文本框一类元素中写入内容</li><li>按键操作</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">element.sendKeys(Keys.CONTROL,<span class="string">"a"</span>); <span class="comment">// ctrl+a</span></span><br><span class="line">element.sendKeys(Keys.ENTER); <span class="comment">// 回车</span></span><br><span class="line">element.sendKeys(Keys.BACK_SPACE); <span class="comment">// 删除</span></span><br></pre></td></tr></tbody></table></figure><h3 id="getTagName"><a href="#getTagName" class="headerlink" title="getTagName"></a>getTagName</h3><p>获取元素的标签名</p><h3 id="getAttribute"><a href="#getAttribute" class="headerlink" title="getAttribute"></a>getAttribute</h3><p>根据属性名获取元素属性</p><h3 id="getText"><a href="#getText" class="headerlink" title="getText"></a>getText</h3><p>获取当前元素的文本值</p><h3 id="isDisplayed"><a href="#isDisplayed" class="headerlink" title="isDisplayed"></a>isDisplayed</h3><p>查看元素是否显示</p><h3 id="isEnabled"><a href="#isEnabled" class="headerlink" title="isEnabled"></a>isEnabled</h3><p>查看元素是否可用</p><h3 id="isSelected"><a href="#isSelected" class="headerlink" title="isSelected"></a>isSelected</h3><p>查看元素是否选中</p><h2 id="webdriver常用api"><a href="#webdriver常用api" class="headerlink" title="webdriver常用api"></a>webdriver常用api</h2><h3 id="get-String-url"><a href="#get-String-url" class="headerlink" title="get(String url)"></a>get(String url)</h3><p>访问指定url</p><h3 id="getCurrentUrl"><a href="#getCurrentUrl" class="headerlink" title="getCurrentUrl"></a>getCurrentUrl</h3><p>获取当前页面地址</p><h3 id="getTitle"><a href="#getTitle" class="headerlink" title="getTitle"></a>getTitle</h3><p>获取当前页面标题</p><h3 id="getPageSource"><a href="#getPageSource" class="headerlink" title="getPageSource"></a>getPageSource</h3><p>获取当前页面源码</p><h3 id="quit"><a href="#quit" class="headerlink" title="quit"></a>quit</h3><p>关闭驱动对象以及所有相关的窗口</p><h3 id="close"><a href="#close" class="headerlink" title="close"></a>close</h3><p>关闭当前窗口</p><h2 id="navigate对象"><a href="#navigate对象" class="headerlink" title="navigate对象"></a>navigate对象</h2><p>关于浏览器的基本功能操作，大部分由<code>navigate</code>对象提供</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigation navigation = driver.navigation();</span><br></pre></td></tr></tbody></table></figure><h3 id="to"><a href="#to" class="headerlink" title="to"></a>to</h3><p>访问指定的url地址</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigation.to(url);</span><br></pre></td></tr></tbody></table></figure><h3 id="refresh"><a href="#refresh" class="headerlink" title="refresh"></a>refresh</h3><p>刷新当前页面</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigation.refresh();</span><br></pre></td></tr></tbody></table></figure><h3 id="back"><a href="#back" class="headerlink" title="back"></a>back</h3><p>浏览器回退操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigation.back();</span><br></pre></td></tr></tbody></table></figure><h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><p>浏览器前进操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigation.forward();</span><br></pre></td></tr></tbody></table></figure><h2 id="windows基本操作"><a href="#windows基本操作" class="headerlink" title="windows基本操作"></a>windows基本操作</h2><p>关于窗口的设置，基本都是由windows对象提供的</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Window windows = driver.manage().window();</span><br></pre></td></tr></tbody></table></figure><h3 id="maximize"><a href="#maximize" class="headerlink" title="maximize"></a>maximize</h3><p>最大化</p><h3 id="getPostition"><a href="#getPostition" class="headerlink" title="getPostition"></a>getPostition</h3><p>窗口位置</p><h3 id="getSize"><a href="#getSize" class="headerlink" title="getSize"></a>getSize</h3><p>窗口大小</p><h3 id="setPosition"><a href="#setPosition" class="headerlink" title="setPosition"></a>setPosition</h3><p>设置位置</p><h3 id="setSize"><a href="#setSize" class="headerlink" title="setSize"></a>setSize</h3><p>设置窗口大小</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WebDriver.Window window = driver.manage().window();</span><br><span class="line"><span class="comment">// 最大化</span></span><br><span class="line">window.maximize();</span><br><span class="line"><span class="comment">// 全屏</span></span><br><span class="line">window.fullscreen();</span><br><span class="line"><span class="comment">// 获取位置</span></span><br><span class="line">window.getPosition();</span><br><span class="line"><span class="comment">// 获取大小</span></span><br><span class="line">window.getSize();</span><br></pre></td></tr></tbody></table></figure><h2 id="等待"><a href="#等待" class="headerlink" title="等待"></a>等待</h2><h3 id="硬性等待"><a href="#硬性等待" class="headerlink" title="硬性等待"></a>硬性等待</h3><p>单位毫秒</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Thread.sleep()</span><br></pre></td></tr></tbody></table></figure><p>优点：使用简单</p><p>缺点：容易造成时间浪费</p><h3 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h3><p>在设置的超时时间范围内不断查找元素，知道找到元素或者超时</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.manage().timeouts().implicitlyWait(<span class="keyword">long</span> time,TimeUnit unit)</span><br></pre></td></tr></tbody></table></figure><p>优点：相对灵活</p><p>缺点：设置是针对全局的，在<code>WebDriver</code>实例整个生命周期有效，但并不是所有的元素都需要等待</p><p>不能适用更复杂的情况如：元素可点击，元素可见</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐式等待3秒</span></span><br><span class="line">driver.manage().timeouts().implicitlyWait(<span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></tbody></table></figure><h3 id="显示等待"><a href="#显示等待" class="headerlink" title="显示等待"></a>显示等待</h3><p>自定义一段代码，用来等待某个条件发生后再继续执行后续代码（如：找到元素，元素可点击，元素已显示）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WebDriverWait wait = <span class="keyword">new</span> WebDriverWait(driver, <span class="number">10</span>);</span><br><span class="line">WebElement username = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(<span class="string">"username"</span>)));</span><br></pre></td></tr></tbody></table></figure><p>优点：每隔一段时间扫描一次页面，检查元素是否满足等待结果条件，比如查找元素，则检查元素是存在，不存在则继续等待，直到找到或超时。</p><p>该方法不是全局设置，特定需要等待的元素可以这样设置</p><ul><li>presenceOfElementLocated:页面元素在页面中存在</li><li>visibilityOfElementLocated:页面元素在页面存在并且可见</li><li>elementToBeClickable:页面元素是否在页面上可用和可被点击</li><li>frameToBeAvailableAndSwitchTolt:切换到iframe中，返回boolean类型</li><li>urlContains:当前页面的url包含特定文本</li><li>titleContains:当前页面title包含特定文本</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-webdriver常用API-24&quot;&gt;&lt;a href=&quot;#Java自动化测试-webdriver常用API-24&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(webdriver常用API 24)&quot;&gt;&lt;/a&gt;Java自动化测试(webdriver常用API 24)&lt;/h1&gt;&lt;h2 id=&quot;元素基本API&quot;&gt;&lt;a href=&quot;#元素基本API&quot; class=&quot;headerlink&quot; title=&quot;元素基本API&quot;&gt;&lt;/a&gt;元素基本API&lt;/h2&gt;&lt;h3 id=&quot;click&quot;&gt;&lt;a href=&quot;#click&quot; class=&quot;headerlink&quot; title=&quot;click&quot;&gt;&lt;/a&gt;click&lt;/h3&gt;&lt;p&gt;触发当前元素的点击事件&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;driver.get(&lt;span class=&quot;string&quot;&gt;&quot;https://www.ketangpai.com/&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WebElement element = driver.findElement(By.xpath(&lt;span class=&quot;string&quot;&gt;&quot;//a[text()=&#39;教师培训&#39;]&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;element.click();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试 (元素定位 23)</title>
    <link href="http://zx490336534.github.io/article/9e41a6be.html"/>
    <id>http://zx490336534.github.io/article/9e41a6be.html</id>
    <published>2020-08-29T23:30:57.999Z</published>
    <updated>2021-03-03T14:29:02.816Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-元素定位-23"><a href="#Java自动化测试-元素定位-23" class="headerlink" title="Java自动化测试 (元素定位 23)"></a>Java自动化测试 (元素定位 23)</h1><h2 id="基础定位方式"><a href="#基础定位方式" class="headerlink" title="基础定位方式"></a>基础定位方式</h2><h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><p>根据id来获取元素，id唯一性</p><h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>根据元素name熟悉来获取元素，会存在不唯一的情况</p><h3 id="tagName"><a href="#tagName" class="headerlink" title="tagName"></a>tagName</h3><p>根据元素的标签名来获取元素，一般不建议使用</p><h3 id="className"><a href="#className" class="headerlink" title="className"></a>className</h3><p>根据元素的样式名来获取元素，会存在不唯一性，注意复合类名的问题</p><h3 id="linkText"><a href="#linkText" class="headerlink" title="linkText"></a>linkText</h3><span id="more"></span><p>根据超链接的全部文本值来获取元素</p><h3 id="partialLinkText"><a href="#partialLinkText" class="headerlink" title="partialLinkText"></a>partialLinkText</h3><p>根据超链接的部分文本值来获取元素（模糊匹配）</p><h2 id="代码封装"><a href="#代码封装" class="headerlink" title="代码封装"></a>代码封装</h2><p>之后的例子都会使用到<code>open</code>和<code>close</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.day02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.By;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebElement;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.chrome.ChromeDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.ie.InternetExplorerDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebLocateApI</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        WebDriver driver = open(<span class="string">"chrome"</span>);</span><br><span class="line">        driver.get(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        </span><br><span class="line">        close(driver);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(WebDriver driver)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        driver.quit();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> WebDriver <span class="title">open</span><span class="params">(String type)</span> </span>{</span><br><span class="line">        WebDriver driver = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"chrome"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.chrome.driver"</span>, <span class="string">"src/test/resources/chromedriver"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"ie"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            <span class="comment">// 设置ie启动项</span></span><br><span class="line">            DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">            <span class="comment">// 忽略缩放</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 忽略保护模式</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 设置初始化浏览器地址</span></span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INITIAL_BROWSER_URL, <span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">            <span class="comment">// 配置ie驱动位置</span></span><br><span class="line">            System.setProperty(<span class="string">"webdriver.ie.driver"</span>, <span class="string">"src/test/resources/IEDriverServer.exe"</span>);</span><br><span class="line">            <span class="comment">// 创建ie驱动对象</span></span><br><span class="line">            driver = <span class="keyword">new</span> InternetExplorerDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"firefox"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.bin"</span>, <span class="string">"D:\\Mozilla Firefox\\firefox.exe"</span>);</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.driver"</span>, <span class="string">"src/test/resources/geckodriver.exe"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> FirefoxDriver();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> driver;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="定位相关代码"><a href="#定位相关代码" class="headerlink" title="定位相关代码"></a>定位相关代码</h2><h3 id="通过ID来定位"><a href="#通过ID来定位" class="headerlink" title="通过ID来定位"></a>通过ID来定位</h3><p>推荐！</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebElement kw = driver.findElement(By.id(<span class="string">"kw"</span>));</span><br><span class="line">kw.clear();</span><br><span class="line">kw.sendKeys(<span class="string">"Java"</span>);</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi8hupqk7lj32140twk1a.jpg" alt="id定位"></p><h3 id="通过name来定位"><a href="#通过name来定位" class="headerlink" title="通过name来定位"></a>通过name来定位</h3><p>推荐！</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebElement wd = driver.findElement(By.name(<span class="string">"wd"</span>));</span><br><span class="line">wd.clear();</span><br><span class="line">wd.sendKeys(<span class="string">"Java1"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过tagName来定位"><a href="#通过tagName来定位" class="headerlink" title="通过tagName来定位"></a>通过tagName来定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebElement input = driver.findElement(By.tagName(<span class="string">"input"</span>));</span><br><span class="line">input.clear();</span><br><span class="line">input.sendKeys(<span class="string">"Java2"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过className来定位"><a href="#通过className来定位" class="headerlink" title="通过className来定位"></a>通过className来定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebElement s_ipt = driver.findElement(By.className(<span class="string">"s_ipt"</span>));</span><br><span class="line">s_ipt.clear();</span><br><span class="line">s_ipt.sendKeys(<span class="string">"Java3"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过linkText来定位"><a href="#通过linkText来定位" class="headerlink" title="通过linkText来定位"></a>通过linkText来定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WebElement hao123 = driver.findElement(By.linkText(<span class="string">"hao123"</span>));</span><br><span class="line">hao123.click();</span><br></pre></td></tr></tbody></table></figure><h3 id="通过partialLinkText来定位"><a href="#通过partialLinkText来定位" class="headerlink" title="通过partialLinkText来定位"></a>通过partialLinkText来定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WebElement hao12 = driver.findElement(By.partialLinkText(<span class="string">"hao12"</span>));</span><br><span class="line">hao12.click();</span><br></pre></td></tr></tbody></table></figure><h2 id="cssSelector元素定位"><a href="#cssSelector元素定位" class="headerlink" title="cssSelector元素定位"></a>cssSelector元素定位</h2><h3 id="根据tagName"><a href="#根据tagName" class="headerlink" title="根据tagName"></a>根据tagName</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">"input"</span>)</span><br></pre></td></tr></tbody></table></figure><h3 id="根据ID"><a href="#根据ID" class="headerlink" title="根据ID"></a>根据ID</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">"input#id"</span>); <span class="comment">// html标签拼上#id</span></span><br><span class="line">By.cssSelector(<span class="string">"#id"</span>);      <span class="comment">// 仅使用#id</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">"#kw"</span>);   </span><br></pre></td></tr></tbody></table></figure><h3 id="根据className-样式名"><a href="#根据className-样式名" class="headerlink" title="根据className(样式名)"></a>根据className(样式名)</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">".className"</span>);</span><br><span class="line">By.cssSelector(<span class="string">"input.className"</span>); <span class="comment">//标签拼上样式</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">".s_ipt"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="根据元素属性，属性名-属性值，ID，class"><a href="#根据元素属性，属性名-属性值，ID，class" class="headerlink" title="根据元素属性，属性名=属性值，ID，class"></a>根据元素属性，属性名=属性值，ID，class</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">"标签名[属性名='属性值']"</span>);</span><br><span class="line">By.cssSelector(<span class="string">"标签名[属性名1='属性值'][属性2='属性值']"</span>);</span><br><span class="line">By.cssSelector(<span class="string">"input[name='xxx']"</span>); </span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">By.cssSelector(<span class="string">"input[id='kw']"</span>); </span><br><span class="line">By.cssSelector(<span class="string">"a[href='https://www.hao123.com']['target='_blank]"</span>); </span><br></pre></td></tr></tbody></table></figure><h2 id="Xpath定位"><a href="#Xpath定位" class="headerlink" title="Xpath定位"></a>Xpath定位</h2><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><h4 id="Xpath-Helper"><a href="#Xpath-Helper" class="headerlink" title="Xpath Helper"></a>Xpath Helper</h4><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g481x1mrsuj327w09a42a.jpg" alt="Xpath定位"></p><p>Xpath定位有很多的优势</p><ol><li>没有id可以进行定位</li><li>需要定位多个符合要求的元素</li></ol><p>使用脚本断点调试定位是否正确是一个方法，当时在我的实际工作中，元素定位代码的封装较深，所以修改查询元素的内容较麻烦，所以直接使用Xpath Helper可以方便的进行开发前的测试。不管是爬虫爬去页面内容还是自动化测试都很实用。</p><p>下面是使用它的方法：</p><h4 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h4><p>使用浏览器自带的定位工具进行元素的定位</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g482366a4qj31b30u0b29.jpg" alt="元素定位"></p><h4 id="初步获取Xpath"><a href="#初步获取Xpath" class="headerlink" title="初步获取Xpath"></a>初步获取Xpath</h4><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g4824mj1bbj30wa0lqnhp.jpg" alt="获取Xpath"></p><p>获取到的Xpath为：</p><p><code>//*[@id="dashboard"]/div/div[3]/div[2]/div/div/div/div[2]/div/div[1]/a</code></p><p>这个路径为绝对路径，假如我们需要获取的是一个元素的列表，那就可以进行删减</p><p>将它删减为：<code>//*[@id="dashboard"]/div/div[3]/div//a</code>可以发现页面中标黄的都是定位到的部分内容，「RESULTS(156)」中也可以看到相关结果</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g482a9ttgtj31b30u01kx.jpg" alt="定位元素列表"></p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g482bedv5sj30vs06gdge.jpg" alt="RESULTS"></p><p>xpath其实就是一个path(路径),根据元素的路径进行定位</p><h3 id="xpath绝对定位"><a href="#xpath绝对定位" class="headerlink" title="xpath绝对定位"></a>xpath绝对定位</h3><p>从根开始找 <code>/(根目录)</code></p><p><code>/html/body/div/div[3]/a</code></p><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>一旦页面结构发生变化，该路径也随之失效，不推荐</p><h2 id="xpath相对定位"><a href="#xpath相对定位" class="headerlink" title="xpath相对定位"></a>xpath相对定位</h2><p><code>//*[@id="kw"]</code></p><p>相对路径以<code>//</code>表示，让xpath从文档的任意符合的元素节点开始进行解析</p><p>路径解析：</p><ul><li><code>//</code>匹配指定节点，不考虑它们位置</li><li><code>*</code>通配符，匹配任意元素节点</li><li><code>@</code>选取属性</li><li><code>[]</code>属性判断条件表达式</li></ul><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>灵活，方便，耦合性低</p><h3 id="通过元素名定位"><a href="#通过元素名定位" class="headerlink" title="通过元素名定位"></a>通过元素名定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.xpath(<span class="string">"//input"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过元素名-索引定位"><a href="#通过元素名-索引定位" class="headerlink" title="通过元素名+索引定位"></a>通过元素名+索引定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.xpath(<span class="string">"//form/div[1]/input"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过元素名-属性定位"><a href="#通过元素名-属性定位" class="headerlink" title="通过元素名+属性定位"></a>通过元素名+属性定位</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">By.xpath(<span class="string">"//*[@name='phone']"</span>);</span><br><span class="line">By.xpath(<span class="string">"//*[contains(@name,'one')]"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="通过元素名-元素的文本内容"><a href="#通过元素名-元素的文本内容" class="headerlink" title="通过元素名+元素的文本内容"></a>通过元素名+元素的文本内容</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">By.xpath(<span class="string">"//*[text()='忘记密码?']"</span>); <span class="comment">// 全匹配</span></span><br><span class="line">By.xpath(<span class="string">"//*[contains(text(),'忘记密码')]"</span>);<span class="comment">// 模糊匹配</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Xpath-轴定位"><a href="#Xpath-轴定位" class="headerlink" title="Xpath 轴定位"></a>Xpath 轴定位</h2><p>当某个元素的各个属性及其组合都不足以定位时，那么可以利用其兄弟节点或父节点等各种可以定位的元素进行定位。</p><ul><li>ancestor：选择当前节点的所有祖先节点</li><li>parent：选取当前节点的父节点</li><li>preceding：选取当前节点之前的所有节点</li><li>preceding-sibling：选取当前节点之前的所有兄弟节点</li><li>following：选取当前节点之后的所有节点</li><li>following-sibling：选取当前节点之后的所有兄弟节点</li></ul><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/轴名称::节点名称[@属性=值]</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">By.xpath(<span class="string">"//div/table//td//preceding::td"</span>);</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-元素定位-23&quot;&gt;&lt;a href=&quot;#Java自动化测试-元素定位-23&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试 (元素定位 23)&quot;&gt;&lt;/a&gt;Java自动化测试 (元素定位 23)&lt;/h1&gt;&lt;h2 id=&quot;基础定位方式&quot;&gt;&lt;a href=&quot;#基础定位方式&quot; class=&quot;headerlink&quot; title=&quot;基础定位方式&quot;&gt;&lt;/a&gt;基础定位方式&lt;/h2&gt;&lt;h3 id=&quot;id&quot;&gt;&lt;a href=&quot;#id&quot; class=&quot;headerlink&quot; title=&quot;id&quot;&gt;&lt;/a&gt;id&lt;/h3&gt;&lt;p&gt;根据id来获取元素，id唯一性&lt;/p&gt;
&lt;h3 id=&quot;name&quot;&gt;&lt;a href=&quot;#name&quot; class=&quot;headerlink&quot; title=&quot;name&quot;&gt;&lt;/a&gt;name&lt;/h3&gt;&lt;p&gt;根据元素name熟悉来获取元素，会存在不唯一的情况&lt;/p&gt;
&lt;h3 id=&quot;tagName&quot;&gt;&lt;a href=&quot;#tagName&quot; class=&quot;headerlink&quot; title=&quot;tagName&quot;&gt;&lt;/a&gt;tagName&lt;/h3&gt;&lt;p&gt;根据元素的标签名来获取元素，一般不建议使用&lt;/p&gt;
&lt;h3 id=&quot;className&quot;&gt;&lt;a href=&quot;#className&quot; class=&quot;headerlink&quot; title=&quot;className&quot;&gt;&lt;/a&gt;className&lt;/h3&gt;&lt;p&gt;根据元素的样式名来获取元素，会存在不唯一性，注意复合类名的问题&lt;/p&gt;
&lt;h3 id=&quot;linkText&quot;&gt;&lt;a href=&quot;#linkText&quot; class=&quot;headerlink&quot; title=&quot;linkText&quot;&gt;&lt;/a&gt;linkText&lt;/h3&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(selenium 22)</title>
    <link href="http://zx490336534.github.io/article/e4409899.html"/>
    <id>http://zx490336534.github.io/article/e4409899.html</id>
    <published>2020-08-26T22:39:10.176Z</published>
    <updated>2021-03-03T14:29:02.799Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-selenium-22"><a href="#Java自动化测试-selenium-22" class="headerlink" title="Java自动化测试(selenium 22)"></a>Java自动化测试(selenium 22)</h1><h2 id="selenium-IDE"><a href="#selenium-IDE" class="headerlink" title="selenium IDE"></a>selenium IDE</h2><p>selenium IDE是一个Firefox/Chrome插件，用于记录和回放用户与浏览器的交互。使用它来创建简单的脚本或协助进行探索性测试。</p><h3 id="下载selenium-IDE"><a href="#下载selenium-IDE" class="headerlink" title="下载selenium IDE"></a>下载selenium IDE</h3><p>下载地址：<a href="https://www.selenium.dev/downloads/">https://www.selenium.dev/downloads/</a></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gi4zbe1saij324i0ggmzu.jpg" alt="官网"></p><p>可翻墙的使用chrome浏览器，不可以翻墙的用firefox浏览器</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi51funq5lj31k90u01fe.jpg" alt="chrome商店"></p><span id="more"></span><h3 id="开始使用-录制"><a href="#开始使用-录制" class="headerlink" title="开始使用-录制"></a>开始使用-录制</h3><ol><li>打开Selenium IDE插件</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zeq17etj30u011pae1.jpg" alt="selenium IDE"></p><ol start="2"><li>点击<code>Record a new test in a new project</code></li><li>项目名称设置为<code>web-test</code>（任意）</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zieh1wuj30js0gi3zm.jpg" alt="项目名称"></p><ol start="4"><li>测试页面选择<code>https://www.baidu.com</code></li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zjwvcyrj30js0hujsp.jpg" alt="测试页面"></p><ol start="5"><li>点击<code>Start Recording</code>自动打开页面。右下角有<code>Selenium IDE is recording ...</code>录制中的标记</li></ol><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zkc5o49j31b30u0kjl.jpg" alt="截屏2020-08-27 上午6.51.17"></p><p>6.在该页面上操作后再次点击插件停止录制</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zm5dfxpj30u011p77n.jpg" alt="停止录制"></p><p>从图中可以看到，总共操作了7步</p><ul><li>打开浏览器</li><li>设置浏览器大小</li><li>点击输入框</li><li>输入<code>python</code></li><li>点击搜索按钮</li><li>点击搜索结果的第一行</li><li>进入新的弹出页面</li></ul><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4znuassvj30s60dat9x.jpg" alt="测试步骤"></p><h3 id="开始使用-执行"><a href="#开始使用-执行" class="headerlink" title="开始使用-执行"></a>开始使用-执行</h3><p>点击播放按钮进行回放</p><p>点击播放速度，降低播放速度，防止出现因为操作过快导致的元素无法找到的问题。</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4zr2w1h0j30u00z1ag1.jpg" alt="执行"></p><h2 id="java-selenium环境搭建"><a href="#java-selenium环境搭建" class="headerlink" title="java selenium环境搭建"></a>java selenium环境搭建</h2><h3 id="chrom浏览器下载"><a href="#chrom浏览器下载" class="headerlink" title="chrom浏览器下载"></a>chrom浏览器下载</h3><p><a href="https://www.chromedownloads.net/chrome64win/">https://www.chromedownloads.net/chrome64win/</a></p><h3 id="Firefox浏览器下载"><a href="#Firefox浏览器下载" class="headerlink" title="Firefox浏览器下载"></a>Firefox浏览器下载</h3><p><a href="http://testingpai.com/forward?goto=http://ftp.mozilla.org/pub/firefox/releases/">http://ftp.mozilla.org/pub/firefox/releases/</a></p><h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><blockquote><p><a href="https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/3.141.59">https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/3.141.59</a></p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.seleniumhq.selenium<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>selenium-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.141.59<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="驱动"><a href="#驱动" class="headerlink" title="驱动"></a>驱动</h3><h4 id="IE"><a href="#IE" class="headerlink" title="IE"></a>IE</h4><p>使用 IE 浏览器进行 Web 自动化测试，selenium-java.jar 包和 IE 驱动是同步的(如下图)，所以只需要关注 IE 驱动和 IE 浏览器版本如何搭配。</p><p>如果你使用 ie6、ie7 请使用 selenium 2.42 或者 2.40 版本，也就是图中的版本。如果你使用的 ie8-ie11 推荐使用 2.50 之后的版本。</p><p>镜像地址：<a href="http://testingpai.com/forward?goto=https://npm.taobao.org/mirrors/selenium/">https://npm.taobao.org/mirrors/selenium/</a></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi50b9yjugj30o60hodiq.jpg" alt="下载"></p><h4 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h4><p>使用 Chrome 浏览器进行 Web 自动化测试，selenium-java.jar 是通用的，只需要关注 Chrome 驱动和 Chrome 浏览器版本是否对应即可。在 70.0.3538.16 之后，Chrome 驱动和 Chrome 浏览器是一一对应。之前的版本会有一个 notes.txt 进行描述（如下图）。</p><p>镜像地址：<a href="http://testingpai.com/forward?goto=https://npm.taobao.org/mirrors/chromedriver/">https://npm.taobao.org/mirrors/chromedriver/</a></p><h4 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h4><p>使用 Firefox 浏览器进行 Web 自动化测试，相对于 IE 和 Chrome 更复杂一些。需要 selenium-java.jar、Firefox 驱动、Firefox 浏览器都匹配。这个匹配关系在 GitHub 上 Firefox 驱动项目 releases 中（如下图）。</p><p>地址：<a href="http://testingpai.com/forward?goto=https://github.com/mozilla/geckodriver/releases">https://github.com/mozilla/geckodriver/releases</a></p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi50cmnswaj30o90ca75f.jpg" alt="对应关系"></p><h3 id="测试Demo-IE"><a href="#测试Demo-IE" class="headerlink" title="测试Demo-IE"></a>测试Demo-IE</h3><p>将Driver放到<code>resources</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.day01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.ie.InternetExplorerDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        <span class="comment">// 设置ie启动项</span></span><br><span class="line">        DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">        <span class="comment">// 忽略缩放</span></span><br><span class="line">        capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 忽略保护模式</span></span><br><span class="line">        capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置初始化浏览器地址</span></span><br><span class="line">        capabilities.setCapability(InternetExplorerDriver.INITIAL_BROWSER_URL, <span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        <span class="comment">// 配置ie驱动位置</span></span><br><span class="line">        System.setProperty(<span class="string">"webdriver.ie.driver"</span>, <span class="string">"src/test/resources/IEDriverServer.exe"</span>);</span><br><span class="line">        <span class="comment">// 创建ie驱动对象</span></span><br><span class="line">        InternetExplorerDriver driver = <span class="keyword">new</span> InternetExplorerDriver();</span><br><span class="line">        <span class="comment">// 打开百度</span></span><br><span class="line">        driver.get(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        <span class="comment">// 停留3秒</span></span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        <span class="comment">// 关闭驱动</span></span><br><span class="line">        driver.quit();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="测试Demo-Chrome"><a href="#测试Demo-Chrome" class="headerlink" title="测试Demo-Chrome"></a>测试Demo-Chrome</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">chrome</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">    System.setProperty(<span class="string">"webdriver.chrome.driver"</span>, <span class="string">"src/test/resources/chromedriver"</span>);</span><br><span class="line">    ChromeDriver driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">    driver.get(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    driver.quit();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="测试Demo-Firefox"><a href="#测试Demo-Firefox" class="headerlink" title="测试Demo-Firefox"></a>测试Demo-Firefox</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">firefox</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">    System.setProperty(<span class="string">"webdriver.firefox.bin"</span>, <span class="string">"D:\\Mozilla Firefox\\firefox.exe"</span>);</span><br><span class="line">    System.setProperty(<span class="string">"webdriver.firefox.driver"</span>, <span class="string">"src/test/resources/geckodriver.exe"</span>);</span><br><span class="line">    FirefoxDriver driver = <span class="keyword">new</span> FirefoxDriver();</span><br><span class="line">    driver.get(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    driver.quit();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="提取"><a href="#提取" class="headerlink" title="提取"></a>提取</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.day01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.chrome.ChromeDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.ie.InternetExplorerDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">        String type = <span class="string">"chrome"</span>;</span><br><span class="line">        WebDriver driver = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"chrome"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.chrome.driver"</span>, <span class="string">"src/test/resources/chromedriver"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"ie"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, <span class="keyword">true</span>);</span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, <span class="keyword">true</span>);</span><br><span class="line">            capabilities.setCapability(InternetExplorerDriver.INITIAL_BROWSER_URL, <span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.ie.driver"</span>, <span class="string">"src/test/resources/IEDriverServer.exe"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> InternetExplorerDriver();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"firefox"</span>.equalsIgnoreCase(type)) {</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.bin"</span>, <span class="string">"D:\\Mozilla Firefox\\firefox.exe"</span>);</span><br><span class="line">            System.setProperty(<span class="string">"webdriver.firefox.driver"</span>, <span class="string">"src/test/resources/geckodriver.exe"</span>);</span><br><span class="line">            driver = <span class="keyword">new</span> FirefoxDriver();</span><br><span class="line">        }</span><br><span class="line">        driver.get(<span class="string">"https://www.baidu.com"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        driver.quit();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-selenium-22&quot;&gt;&lt;a href=&quot;#Java自动化测试-selenium-22&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(selenium 22)&quot;&gt;&lt;/a&gt;Java自动化测试(selenium 22)&lt;/h1&gt;&lt;h2 id=&quot;selenium-IDE&quot;&gt;&lt;a href=&quot;#selenium-IDE&quot; class=&quot;headerlink&quot; title=&quot;selenium IDE&quot;&gt;&lt;/a&gt;selenium IDE&lt;/h2&gt;&lt;p&gt;selenium IDE是一个Firefox/Chrome插件，用于记录和回放用户与浏览器的交互。使用它来创建简单的脚本或协助进行探索性测试。&lt;/p&gt;
&lt;h3 id=&quot;下载selenium-IDE&quot;&gt;&lt;a href=&quot;#下载selenium-IDE&quot; class=&quot;headerlink&quot; title=&quot;下载selenium IDE&quot;&gt;&lt;/a&gt;下载selenium IDE&lt;/h3&gt;&lt;p&gt;下载地址：&lt;a href=&quot;https://www.selenium.dev/downloads/&quot;&gt;https://www.selenium.dev/downloads/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gi4zbe1saij324i0ggmzu.jpg&quot; alt=&quot;官网&quot;&gt;&lt;/p&gt;
&lt;p&gt;可翻墙的使用chrome浏览器，不可以翻墙的用firefox浏览器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlly1gi51funq5lj31k90u01fe.jpg&quot; alt=&quot;chrome商店&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(jenkins 21)</title>
    <link href="http://zx490336534.github.io/article/2f8cb43e.html"/>
    <id>http://zx490336534.github.io/article/2f8cb43e.html</id>
    <published>2020-08-17T22:46:28.566Z</published>
    <updated>2021-03-03T14:29:02.857Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-jenkins-21"><a href="#Java自动化测试-jenkins-21" class="headerlink" title="Java自动化测试(jenkins 21)"></a>Java自动化测试(jenkins 21)</h1><h2 id="安装jenkins"><a href="#安装jenkins" class="headerlink" title="安装jenkins"></a>安装jenkins</h2><blockquote><p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;album_id=1375914177998733312&amp;__biz=MzU5NTI3NDcxOA==#wechat_redirect">https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;album_id=1375914177998733312&amp;__biz=MzU5NTI3NDcxOA==#wechat_redirect</a></p></blockquote><h2 id="配置Global-Tool-Configuration"><a href="#配置Global-Tool-Configuration" class="headerlink" title="配置Global Tool Configuration"></a>配置Global Tool Configuration</h2><span id="more"></span><h3 id="JDK安装"><a href="#JDK安装" class="headerlink" title="JDK安装"></a>JDK安装</h3><p>选择本地jdk</p><h3 id="maven安装"><a href="#maven安装" class="headerlink" title="maven安装"></a>maven安装</h3><p>选择本地maven</p><h3 id="Allure-Commandline"><a href="#Allure-Commandline" class="headerlink" title="Allure Commandline"></a>Allure Commandline</h3><p>取个别名</p><p>Install automatically自动安装</p><h2 id="配置Configure-System"><a href="#配置Configure-System" class="headerlink" title="配置Configure System"></a>配置Configure System</h2><p>Extended E-mail Notification-&gt;SMTP server</p><p><code>smtp.163.com</code></p><p>Default user E-mail suffix</p><p><code>@163.com</code></p><p>高级</p><p>Use SMTP Authentication</p><ul><li><code>邮箱地址</code></li><li><code>邮箱授权码</code></li><li><code>use SSL</code></li></ul><h3 id="项目设置"><a href="#项目设置" class="headerlink" title="项目设置"></a>项目设置</h3><ul><li><p>源码管理         svn</p></li><li><p>构建触发器         Build periodically            定时构建</p></li><li><p>Build            clean test                    </p></li><li><p>构建命令        </p></li><li><p>构建后操作    </p><blockquote><p>Allure report:result 结果路径</p></blockquote></li><li><p>Editable Email Notification</p></li><li><p>Project From                        发件人</p></li><li><p>Project Recipient List                收件人</p></li><li><p>格式：<a href="mailto:xxxx9@qq.com">xxxx9@qq.com</a>,xxx@qq.com</p></li><li><p>Attachments                            附件</p></li><li><p>格式：log/api_auto*.log,src\test\resources\cases_v8.xlsx </p><blockquote><p>*是通配符s</p></blockquote></li></ul><h2 id="Jenkins邮件-模版"><a href="#Jenkins邮件-模版" class="headerlink" title="Jenkins邮件 模版"></a>Jenkins邮件 模版</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>${PROJECT_NAME}-第${BUILD_NUMBER}次构建日志<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">leftmargin</span>=<span class="string">"8"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">topmargin</span>=<span class="string">"8"</span> <span class="attr">marginheight</span>=<span class="string">"4"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">offset</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"95%"</span> <span class="attr">cellpadding</span>=<span class="string">"0"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>(本邮件是程序自动下发的，请勿回复！)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"#0B610B"</span>&gt;</span>构建信息($BUILD_STATUS)<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">align</span>=<span class="string">"center"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目名称 ： ${PROJECT_NAME}<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建编号 ： 第${BUILD_NUMBER}次构建<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>触发原因 ： ${CAUSE}<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建日志 ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"${BUILD_URL}console"</span>&gt;</span>${BUILD_URL}console<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>工作目录 ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"${PROJECT_URL}ws"</span>&gt;</span>${PROJECT_URL}ws<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Allure Report ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"${BUILD_URL}allure"</span>&gt;</span>${BUILD_URL}allure<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"#0B610B"</span>&gt;</span>构建日志(最后100行):<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">align</span>=<span class="string">"center"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">"80"</span> <span class="attr">rows</span>=<span class="string">"30"</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">"font-family: Courier New"</span>&gt;</span>${BUILD_LOG, maxLines=100}<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><h3 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghumhmb0l1j31da0u0jzk.jpg" alt="image-20200818074316555"></p><h3 id="输入代码路径"><a href="#输入代码路径" class="headerlink" title="输入代码路径"></a>输入代码路径</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghumimf0ugj315j0u0tdd.jpg" alt="image-20200818074416810"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-jenkins-21&quot;&gt;&lt;a href=&quot;#Java自动化测试-jenkins-21&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(jenkins 21)&quot;&gt;&lt;/a&gt;Java自动化测试(jenkins 21)&lt;/h1&gt;&lt;h2 id=&quot;安装jenkins&quot;&gt;&lt;a href=&quot;#安装jenkins&quot; class=&quot;headerlink&quot; title=&quot;安装jenkins&quot;&gt;&lt;/a&gt;安装jenkins&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;amp;album_id=1375914177998733312&amp;amp;__biz=MzU5NTI3NDcxOA==#wechat_redirect&quot;&gt;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;amp;album_id=1375914177998733312&amp;amp;__biz=MzU5NTI3NDcxOA==#wechat_redirect&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;配置Global-Tool-Configuration&quot;&gt;&lt;a href=&quot;#配置Global-Tool-Configuration&quot; class=&quot;headerlink&quot; title=&quot;配置Global Tool Configuration&quot;&gt;&lt;/a&gt;配置Global Tool Configuration&lt;/h2&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(mock 21)</title>
    <link href="http://zx490336534.github.io/article/15e929aa.html"/>
    <id>http://zx490336534.github.io/article/15e929aa.html</id>
    <published>2020-08-15T01:41:22.296Z</published>
    <updated>2021-03-03T14:29:02.892Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-mock-21"><a href="#Java自动化测试-mock-21" class="headerlink" title="Java自动化测试(mock 21)"></a>Java自动化测试(mock 21)</h1><blockquote><p>mock测试就是在测试过程中，对于某些不容易构造或者不容易获取的对象，用一个虚拟的对象来创建以便测试的测试方法。</p></blockquote><h2 id="mock测试环境"><a href="#mock测试环境" class="headerlink" title="mock测试环境"></a>mock测试环境</h2><blockquote><p><a href="https://www.easy-mock.com/login">https://www.easy-mock.com/login</a></p><p><a href="https://github.com/easy-mock/easy-mock">https://github.com/easy-mock/easy-mock</a></p></blockquote><p>Easy Mock 是一个可视化，并且能快速生成<strong>模拟数据</strong>的持久化服务。</p><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><span id="more"></span><ul><li>支持接口代理</li><li>支持快捷键操作</li><li>支持协同编辑</li><li>支持团队项目</li><li>支持 RESTful</li><li>支持 <a href="https://swagger.io/">Swagger</a> | OpenAPI Specification (<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/1.2.md">1.2</a> &amp; <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md">2.0</a> &amp; <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md">3.0</a>)<ul><li>基于 Swagger 快速创建项目</li><li>支持显示接口入参与返回值</li><li>支持显示实体类</li></ul></li><li>支持灵活性与扩展性更高的响应式数据开发</li><li>支持自定义响应配置（例：status/headers/cookies）</li><li>支持 <a href="http://mockjs.com/">Mock.js</a> 语法</li><li>支持 <a href="https://github.com/ElemeFE/restc">restc</a> 方式的接口预览</li></ul><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr9bt1oycj31b30u0kjo.jpg" alt="登陆"></p><h2 id="单机版"><a href="#单机版" class="headerlink" title="单机版"></a>单机版</h2><blockquote><p><a href="https://github.com/dreamhead/moco">https://github.com/dreamhead/moco</a></p></blockquote><h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.lemon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>moco-runner<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 文件拷贝时的编码 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 编译时的编码 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.dreamhead<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>moco-runner<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="runner-java"><a href="#runner-java" class="headerlink" title="runner.java"></a>runner.java</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lemon;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.dreamhead.moco.bootstrap.Main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Runner</span> </span>{</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">      test9();</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/ body foo</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12307 -c src/test/resources/foo2.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/getBoy?name=onecoder</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo3.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// post http://localhost:12306/getBoy body name=onecoder</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo4.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/template?name=123 返回 123</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo5.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/template?name=123 返回 123</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo6.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/template?name=123 返回 123</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo7.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test8</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/template?name=123 返回 123</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo8.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test9</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="comment">// get http://localhost:12306/template?name=123 返回 123</span></span><br><span class="line">      String[] args = <span class="string">"http -p 12306 -c src/test/resources/foo9.json"</span>.split(<span class="string">" "</span>);</span><br><span class="line">      Main.main(args);</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h3><ul><li><code>foo1.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">"response"</span> :</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">"text"</span> : <span class="string">"Hello, Moco"</span></span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">] </span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo2.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[{</span><br><span class="line">  <span class="attr">"request"</span> : { <span class="attr">"text"</span> : <span class="string">"foo"</span> },</span><br><span class="line">  <span class="attr">"response"</span> : {  <span class="attr">"xml"</span> : <span class="string">"bar"</span> }</span><br><span class="line">}]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo3.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[{</span><br><span class="line">   <span class="attr">"request"</span>: {</span><br><span class="line">      <span class="attr">"uri"</span>: <span class="string">"/getBoy"</span>,</span><br><span class="line">      <span class="attr">"queries"</span>: {</span><br><span class="line">         <span class="attr">"name"</span>: <span class="string">"onecoder"</span></span><br><span class="line">      }</span><br><span class="line">   },</span><br><span class="line">   <span class="attr">"response"</span>: {</span><br><span class="line">      <span class="attr">"text"</span>: <span class="string">"get Hey."</span></span><br><span class="line">   }</span><br><span class="line">}]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo4.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"method"</span>: <span class="string">"post"</span>,</span><br><span class="line">         <span class="attr">"forms"</span>: {</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"onecoder"</span></span><br><span class="line">         }</span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"text"</span>: <span class="string">"post Hi."</span></span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo5.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"uri"</span>: <span class="string">"/template"</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"text"</span>: {</span><br><span class="line">            <span class="attr">"template"</span>: <span class="string">"aaaaaaaa${req.queries['name']}bbbbbbb"</span></span><br><span class="line">         }</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo6.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"description"</span>: <span class="string">"带header请求"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"uri"</span>: <span class="string">"/member/register"</span>,</span><br><span class="line">         <span class="attr">"method"</span>: <span class="string">"post"</span>,</span><br><span class="line">         <span class="attr">"headers"</span>: {</span><br><span class="line">            <span class="attr">"content-type"</span>: <span class="string">"application/json"</span></span><br><span class="line">         },</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"mobile_phone"</span>: <span class="string">"13212312312"</span>,</span><br><span class="line">            <span class="attr">"pwd"</span>: <span class="string">"12345678"</span></span><br><span class="line">         }</span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"msg"</span>: <span class="string">"OK"</span>,</span><br><span class="line">            <span class="attr">"data"</span>: {</span><br><span class="line">               <span class="attr">"id"</span>: <span class="number">189</span>,</span><br><span class="line">               <span class="attr">"reg_name"</span>: <span class="string">"小柠檬"</span>,</span><br><span class="line">               <span class="attr">"mobile_phone"</span>: <span class="string">"13212312312"</span></span><br><span class="line">            }</span><br><span class="line">         }</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo7.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"description"</span>: <span class="string">"这是一个带cookies的Post请求"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"uri"</span>: <span class="string">"/postDemoWithCookies"</span>,</span><br><span class="line">         <span class="attr">"method"</span>: <span class="string">"post"</span>,</span><br><span class="line">         <span class="attr">"cookies"</span>: {</span><br><span class="line">            <span class="attr">"login"</span>: <span class="string">"true"</span></span><br><span class="line">         }</span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"status"</span>: <span class="string">"200"</span>,</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"success"</span>,</span><br><span class="line">            <span class="attr">"status"</span>: <span class="string">"1"</span></span><br><span class="line">         },</span><br><span class="line">         <span class="attr">"cookies"</span>: {</span><br><span class="line">            <span class="attr">"JSESSIONID"</span>: <span class="string">"123"</span></span><br><span class="line">         }</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo8.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"description"</span>: <span class="string">"充值"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"uri"</span>: <span class="string">"/member/recharge"</span>,</span><br><span class="line">         <span class="attr">"method"</span>: <span class="string">"post"</span>,</span><br><span class="line">         <span class="attr">"headers"</span>: {</span><br><span class="line">            <span class="attr">"X-Lemonban-Media-Type"</span>: <span class="string">"lemonban.v2"</span>,</span><br><span class="line">            <span class="attr">"Authorization"</span> : <span class="string">"Bearer Token"</span>,</span><br><span class="line">            <span class="attr">"content-type"</span>: <span class="string">"application/json"</span></span><br><span class="line">         },</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"member_id"</span>: <span class="string">"123"</span>,</span><br><span class="line">            <span class="attr">"amount"</span>: <span class="string">"4000"</span></span><br><span class="line">         }</span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"msg"</span>: <span class="string">"OK"</span>,</span><br><span class="line">            <span class="attr">"data"</span>: {</span><br><span class="line">               <span class="attr">"id"</span>: <span class="number">123</span>,</span><br><span class="line">               <span class="attr">"leave_amount"</span>: <span class="number">1800000.01</span> ,</span><br><span class="line">               <span class="attr">"mobile_phone"</span>: <span class="string">"13888888879"</span>,</span><br><span class="line">               <span class="attr">"reg_name"</span>: <span class="string">"小柠檬"</span>,</span><br><span class="line">               <span class="attr">"reg_time"</span>: <span class="string">"2019-08-25 21:18:30.0"</span>,</span><br><span class="line">               <span class="attr">"type"</span>: <span class="number">1</span></span><br><span class="line">            }</span><br><span class="line">         }</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><ul><li><code>foo9.json</code></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   {</span><br><span class="line">      <span class="attr">"description"</span>: <span class="string">"登录"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: {</span><br><span class="line">         <span class="attr">"uri"</span>: <span class="string">"/member/login"</span>,</span><br><span class="line">         <span class="attr">"method"</span>: <span class="string">"post"</span>,</span><br><span class="line">         <span class="attr">"headers"</span>: {</span><br><span class="line">            <span class="attr">"X-Lemonban-Media-Type"</span>: <span class="string">"lemonban.v2"</span>,</span><br><span class="line">            <span class="attr">"content-type"</span>: <span class="string">"application/json;charset=utf-8"</span></span><br><span class="line">         },</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"mobile_phone"</span>: <span class="string">"13212312312"</span>,</span><br><span class="line">            <span class="attr">"pwd"</span>: <span class="string">"12345678"</span></span><br><span class="line">         }</span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"response"</span>: {</span><br><span class="line">         <span class="attr">"json"</span>: {</span><br><span class="line">            <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"msg"</span>: <span class="string">"OK"</span>,</span><br><span class="line">            <span class="attr">"data"</span>: {</span><br><span class="line">               <span class="attr">"id"</span>: <span class="number">70362</span>,</span><br><span class="line">               <span class="attr">"leave_amount"</span>: <span class="number">0.0</span>,</span><br><span class="line">               <span class="attr">"mobile_phone"</span>: <span class="string">"13212312312"</span>,</span><br><span class="line">               <span class="attr">"reg_name"</span>: <span class="string">"小柠檬"</span>,</span><br><span class="line">               <span class="attr">"reg_time"</span>: <span class="string">"2019-12-19 21:12:21.0"</span>,</span><br><span class="line">               <span class="attr">"type"</span>: <span class="number">1</span>,</span><br><span class="line">               <span class="attr">"token_info"</span>: {</span><br><span class="line">                  <span class="attr">"token_type"</span>: <span class="string">"Bearer"</span>,</span><br><span class="line">                  <span class="attr">"expires_in"</span>: <span class="string">"2019-12-19 21:17:23"</span>,</span><br><span class="line">                  <span class="attr">"token"</span>: <span class="string">"eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjg5ODU4LCJleHAiOjE1NzY3NjE0NDN9.ZJKz-aOxWtCQakvhOfRjTSTA_K7amiKe0e9wpaF9lpzKQaTZiVjsoUDmpA2DCKtIdMyaQ4QYWWybP1ZD5QDVWQ"</span></span><br><span class="line">               }</span><br><span class="line">            },</span><br><span class="line">            <span class="attr">"copyright"</span>: <span class="string">"Copyright 柠檬班 © 2017-2019 湖南省零檬信息技术有限公司 All Rights Reserved"</span></span><br><span class="line">         }</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-mock-21&quot;&gt;&lt;a href=&quot;#Java自动化测试-mock-21&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(mock 21)&quot;&gt;&lt;/a&gt;Java自动化测试(mock 21)&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;mock测试就是在测试过程中，对于某些不容易构造或者不容易获取的对象，用一个虚拟的对象来创建以便测试的测试方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;mock测试环境&quot;&gt;&lt;a href=&quot;#mock测试环境&quot; class=&quot;headerlink&quot; title=&quot;mock测试环境&quot;&gt;&lt;/a&gt;mock测试环境&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.easy-mock.com/login&quot;&gt;https://www.easy-mock.com/login&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/easy-mock/easy-mock&quot;&gt;https://github.com/easy-mock/easy-mock&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Easy Mock 是一个可视化，并且能快速生成&lt;strong&gt;模拟数据&lt;/strong&gt;的持久化服务。&lt;/p&gt;
&lt;h3 id=&quot;特性&quot;&gt;&lt;a href=&quot;#特性&quot; class=&quot;headerlink&quot; title=&quot;特性&quot;&gt;&lt;/a&gt;特性&lt;/h3&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(allure 20)</title>
    <link href="http://zx490336534.github.io/article/34a48abe.html"/>
    <id>http://zx490336534.github.io/article/34a48abe.html</id>
    <published>2020-08-15T01:01:34.791Z</published>
    <updated>2021-03-03T14:29:02.804Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-allure-20"><a href="#Java自动化测试-allure-20" class="headerlink" title="Java自动化测试(allure 20)"></a>Java自动化测试(allure 20)</h1><p>allure官网：</p><blockquote><p><a href="https://docs.qameta.io/allure/">https://docs.qameta.io/allure/</a></p></blockquote><span id="more"></span><h2 id="在项目中导入-testng-和-allure2-坐标和对应设置"><a href="#在项目中导入-testng-和-allure2-坐标和对应设置" class="headerlink" title="在项目中导入 testng 和 allure2 坐标和对应设置"></a>在项目中导入 testng 和 allure2 坐标和对应设置</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文件拷贝时的编码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 编译时的编码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aspectj.version</span>&gt;</span>1.9.2<span class="tag">&lt;/<span class="name">aspectj.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- testng maven坐标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.testng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testng<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>6.8.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- allure2 maven坐标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.qameta.allure<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>allure-testng<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="加入-maven-surefire-plugin-插件并进行配置"><a href="#加入-maven-surefire-plugin-插件并进行配置" class="headerlink" title="加入 maven-surefire-plugin 插件并进行配置"></a>加入 maven-surefire-plugin 插件并进行配置</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- maven-surefire-plugin 配合testng/junit执行测试用例的maven插件 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 测试失败后，是否忽略并继续测试 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">testFailureIgnore</span>&gt;</span>true<span class="tag">&lt;/<span class="name">testFailureIgnore</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">suiteXmlFiles</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- testng配置文件名称  --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">suiteXmlFile</span>&gt;</span>testng.xml<span class="tag">&lt;/<span class="name">suiteXmlFile</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">suiteXmlFiles</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--设置参数命令行 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">argLine</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- UTF-8编码 --&gt;</span></span><br><span class="line">                    -Dfile.encoding=UTF-8</span><br><span class="line">                    <span class="comment">&lt;!-- 配置拦截器 --&gt;</span></span><br><span class="line">                    -javaagent:"${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar"</span><br><span class="line">                <span class="tag">&lt;/<span class="name">argLine</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">systemProperties</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 配置 allure 结果存储路径  --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">name</span>&gt;</span>allure.results.directory<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>${project.build.directory}/allure-results<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">systemProperties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- aspectjweaver maven坐标 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${aspectj.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><blockquote><p><a href="https://github.com/zx490336534/auto_api/blob/master/pom.xml">https://github.com/zx490336534/auto_api/blob/master/pom.xml</a></p></blockquote><h2 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr81tq3x2j30pk0mmgn4.jpg" alt="执行内容"></p><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><p>首先双击<code>clean</code>进行清理</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr85wj06pj326u0nedkg.jpg" alt="清理结果"></p><h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><p>双击<code>test</code>开始执行测试</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr86tuurxj326s0n6gql.jpg" alt="测试结果"></p><h3 id="测试结果存放"><a href="#测试结果存放" class="headerlink" title="测试结果存放"></a>测试结果存放</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr87o08abj30hu0kgabn.jpg" alt="allure-results"></p><h3 id="报告生成"><a href="#报告生成" class="headerlink" title="报告生成"></a>报告生成</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr891wjjyj31p00l279l.jpg" alt="安装插件"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn io.qameta.allure:allure-maven:serve</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8axs20lj326s0n40zt.jpg" alt="报告"></p><p>会自动打开报告页面</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8b88b6xj31d90u0gv6.jpg" alt="报告"></p><h2 id="报告查看"><a href="#报告查看" class="headerlink" title="报告查看"></a>报告查看</h2><h3 id="切换语言"><a href="#切换语言" class="headerlink" title="切换语言"></a>切换语言</h3><p>在右下角有个按钮可以切换语言</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8c3ay1bj30i00eogm3.jpg" alt="切换语言"></p><h3 id="查看测试汇总"><a href="#查看测试汇总" class="headerlink" title="查看测试汇总"></a>查看测试汇总</h3><p>可以在<code>总览</code>页面查看测试执行通过情况，测试环境，前后运行的<code>趋势</code>，当前的运行器</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8cp17d1j31nq0u0wk7.jpg" alt="测试汇总"></p><h3 id="查看各个测试的情况"><a href="#查看各个测试的情况" class="headerlink" title="查看各个测试的情况"></a>查看各个测试的情况</h3><p>在<code>测试套</code>中可以查看对应接口的测试情况，可以查看它的参数化构建</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8dxgm9fj30w10u0tf8.jpg" alt="测试套"></p><h3 id="查看耗时情况"><a href="#查看耗时情况" class="headerlink" title="查看耗时情况"></a>查看耗时情况</h3><p>在<code>时间刻度</code>中可以看到每个接口执行的耗时情况</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8eqwxtxj327u0negod.jpg" alt="耗时"></p><h3 id="查看执行顺序"><a href="#查看执行顺序" class="headerlink" title="查看执行顺序"></a>查看执行顺序</h3><p>在<code>功能</code>页面可以查看脚本执行顺序</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8fejn3mj30w00u0gx9.jpg" alt="执行顺序"></p><h2 id="报告内容拓展"><a href="#报告内容拓展" class="headerlink" title="报告内容拓展"></a>报告内容拓展</h2><h3 id="用例描述"><a href="#用例描述" class="headerlink" title="用例描述"></a>用例描述</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(dataProvider = "datas", description = "管理员用户信息查询")</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8n99eozj319c0pon42.jpg" alt="标题修改"></p><h3 id="用例步骤"><a href="#用例步骤" class="headerlink" title="用例步骤"></a>用例步骤</h3><p>在测试代码前增加<code>Step</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Step("Type {caseInfo.id} - {caseInfo.url}")</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8o821c3j31d40u0du7.jpg" alt="测试步骤"></p><h2 id="报表断言"><a href="#报表断言" class="headerlink" title="报表断言"></a>报表断言</h2><p>新增两个常量</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ASSERT_SUCCESS = <span class="string">"PASSED"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ASSERT_FAILED = <span class="string">"FAILED"</span>;</span><br></pre></td></tr></tbody></table></figure><p>在测试的最后一行增加：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertEquals(assertResult, Constants.ASSERT_SUCCESS);</span><br></pre></td></tr></tbody></table></figure><h3 id="增加断言后重新执行"><a href="#增加断言后重新执行" class="headerlink" title="增加断言后重新执行"></a>增加断言后重新执行</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghr8zivup9j31d90u0qcn.jpg" alt="测试结果"></p><p>后续和Jenkins组合执行可以看到测试趋势</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-allure-20&quot;&gt;&lt;a href=&quot;#Java自动化测试-allure-20&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(allure 20)&quot;&gt;&lt;/a&gt;Java自动化测试(allure 20)&lt;/h1&gt;&lt;p&gt;allure官网：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.qameta.io/allure/&quot;&gt;https://docs.qameta.io/allure/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(参数化 19)</title>
    <link href="http://zx490336534.github.io/article/65eed160.html"/>
    <id>http://zx490336534.github.io/article/65eed160.html</id>
    <published>2020-08-12T23:02:37.449Z</published>
    <updated>2021-03-03T14:29:02.789Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-参数化-19"><a href="#Java自动化测试-参数化-19" class="headerlink" title="Java自动化测试(参数化 19)"></a>Java自动化测试(参数化 19)</h1><h2 id="测试数据修改"><a href="#测试数据修改" class="headerlink" title="测试数据修改"></a>测试数据修改</h2><p>使用占位符来替代参数，可以在代码中动态修改它的值。</p><p>修改前测试参数：</p><span id="more"></span><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{<span class="attr">"mobile_phone"</span>:<span class="string">"13212332111"</span>,<span class="attr">"pwd"</span>:<span class="string">"12345678"</span>}</span><br></pre></td></tr></tbody></table></figure><p>测试参数</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{<span class="attr">"mobile_phone"</span>:<span class="string">"${register_md}"</span>,<span class="attr">"pwd"</span>:<span class="string">"${register_pwd}"</span>}</span><br></pre></td></tr></tbody></table></figure><p>测试SQL</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"select count(*) from member a where a.mobile_phone = '${register_mb}';"</span>]</span><br></pre></td></tr></tbody></table></figure><h2 id="Maven导入测试数据生成"><a href="#Maven导入测试数据生成" class="headerlink" title="Maven导入测试数据生成"></a>Maven导入测试数据生成</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.binarywang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-testdata-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="随机测试参数生成"><a href="#随机测试参数生成" class="headerlink" title="随机测试参数生成"></a>随机测试参数生成</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.binarywang.tools.generator.ChineseMobileNumberGenerator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserData</span> </span>{</span><br><span class="line">    <span class="comment">// 存储接口响应对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; VARS = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// 存储默认请求头</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, String&gt; DEFAULT_HEADERS = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="comment">// 静态代码：类在加载时会自动加载一次此代码</span></span><br><span class="line">        DEFAULT_HEADERS.put(<span class="string">"X-Lemonban-Media-Type"</span>, <span class="string">"lemonban.v2"</span>);</span><br><span class="line">        DEFAULT_HEADERS.put(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 把需要参数化的数据存储到VARS</span></span><br><span class="line">        <span class="comment">// 随机手机号码</span></span><br><span class="line">        VARS.put(<span class="string">"${register_mb}"</span>, ChineseMobileNumberGenerator.getInstance().generate());</span><br><span class="line">        VARS.put(<span class="string">"${register_pwd}"</span>, <span class="string">"12345678"</span>);</span><br><span class="line">        VARS.put(<span class="string">"${amount}"</span>, <span class="string">"5000"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="测试前的参数替换"><a href="#测试前的参数替换" class="headerlink" title="测试前的参数替换"></a>测试前的参数替换</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paramsReplace</span><span class="params">(CaseInfo caseInfo)</span> </span>{</span><br><span class="line">        Set&lt;String&gt; keySet = UserData.VARS.keySet();</span><br><span class="line">        String params = caseInfo.getParams();</span><br><span class="line">        String sql = caseInfo.getSql();</span><br><span class="line">        String expectedResult = caseInfo.getExpectedResult();</span><br><span class="line">        String url = caseInfo.getUrl();</span><br><span class="line">        <span class="keyword">for</span> (String placeHolder : keySet) {</span><br><span class="line">            String value = UserData.VARS.get(placeHolder).toString();</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(params)) {</span><br><span class="line">                params = params.replace(placeHolder, value);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(sql)) {</span><br><span class="line">                sql = sql.replace(placeHolder, value);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(expectedResult)) {</span><br><span class="line">                expectedResult = expectedResult.replace(placeHolder, value);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(url)) {</span><br><span class="line">                url = url.replace(placeHolder, value);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        caseInfo.setParams(params);</span><br><span class="line">        caseInfo.setSql(sql);</span><br><span class="line">        caseInfo.setExpectedResult(expectedResult);</span><br><span class="line">        caseInfo.setUrl(url);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="Maven中导入异常排除"><a href="#Maven中导入异常排除" class="headerlink" title="Maven中导入异常排除"></a>Maven中导入异常排除</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.afterturn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easypoi-base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="使用常量替代"><a href="#使用常量替代" class="headerlink" title="使用常量替代"></a>使用常量替代</h2><blockquote><p>final修饰变量，变量成为常量，常量只能赋值一次。</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应数据回写列</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PESPONSE_CELL_NUM = <span class="number">8</span>;</span><br><span class="line">    <span class="comment">// 断言数据回写列</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ASSERT_CELL_NUM = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// 用例文件路径</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXCEL_PATH = <span class="string">"src/test/resources/cases_v3.xlsx"</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>部分可能会变更的数据写入到<code>Constants</code>类中定义为一个常量</p><h2 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h2><h3 id="引入Maven"><a href="#引入Maven" class="headerlink" title="引入Maven"></a>引入Maven</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="定义输出"><a href="#定义输出" class="headerlink" title="定义输出"></a>定义输出</h3><p><code>src/test/resources/log4j.properties</code></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">log4j.rootLogger</span> = <span class="string">INFO,console,file</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout.ConversionPattern</span> = <span class="string">%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.appender.file</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.file.File</span> = <span class="string">log/api_auto.log</span></span><br><span class="line"><span class="meta">log4j.appender.file.Append</span> = <span class="string">false</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout.ConversionPattern</span> = <span class="string">%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n</span></span><br></pre></td></tr></tbody></table></figure><h3 id="定义logger"><a href="#定义logger" class="headerlink" title="定义logger"></a>定义logger</h3><p><code>src/test/java/com/zhongxin/utils/HttpUtils.java</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Logger logger = Logger.getLogger(HttpUtils.class);</span><br></pre></td></tr></tbody></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.info(statusCode);</span><br></pre></td></tr></tbody></table></figure><h3 id="测试日志打印"><a href="#测试日志打印" class="headerlink" title="测试日志打印"></a>测试日志打印</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghov2juqpuj30xi07mgml.jpg" alt="打印"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-参数化-19&quot;&gt;&lt;a href=&quot;#Java自动化测试-参数化-19&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(参数化 19)&quot;&gt;&lt;/a&gt;Java自动化测试(参数化 19)&lt;/h1&gt;&lt;h2 id=&quot;测试数据修改&quot;&gt;&lt;a href=&quot;#测试数据修改&quot; class=&quot;headerlink&quot; title=&quot;测试数据修改&quot;&gt;&lt;/a&gt;测试数据修改&lt;/h2&gt;&lt;p&gt;使用占位符来替代参数，可以在代码中动态修改它的值。&lt;/p&gt;
&lt;p&gt;修改前测试参数：&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(数据库断言 18)</title>
    <link href="http://zx490336534.github.io/article/bfb7ec4.html"/>
    <id>http://zx490336534.github.io/article/bfb7ec4.html</id>
    <published>2020-08-10T23:35:27.027Z</published>
    <updated>2021-03-03T14:29:02.780Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-数据库断言-18"><a href="#Java自动化测试-数据库断言-18" class="headerlink" title="Java自动化测试(数据库断言 18)"></a>Java自动化测试(数据库断言 18)</h1><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>数据库，简而言之可视为电子化的文件柜——存储电子文件的处所，用户可以对文件中的数据进行新增、截取、更新、删除等操作。<br>所谓“数据库”是以一定方式储存在一起、能与多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。</p><h2 id="JDBC-驱动程序"><a href="#JDBC-驱动程序" class="headerlink" title="JDBC 驱动程序"></a>JDBC 驱动程序</h2><p>JDBC(java database connectivity)驱动程序是对 JDBC 规范完整的实现，它的存在在 Java 程序与数据库系统之间建立了一条通信的渠道。</p><span id="more"></span><figure class="highlight txt"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DBUtils封装了JDBC的操作，核心功能如下：</span><br><span class="line">1、QueryRunner中提供对sql语句操作的API.</span><br><span class="line">2、ResultSetHandler接口，用于定义select操作后，怎样封装结果集.</span><br><span class="line">3、DbUtils类是一个工具类，定义了关闭资源与事务处理的方法</span><br><span class="line">QueryRunner核心类：</span><br><span class="line">update(Connection conn, String sql, Object... params) ，执行insert update delete操作</span><br><span class="line">query(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params) ，执行 select操作</span><br></pre></td></tr></tbody></table></figure><h2 id="Maven中配置DBUtils"><a href="#Maven中配置DBUtils" class="headerlink" title="Maven中配置DBUtils"></a>Maven中配置DBUtils</h2><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mysql数据库驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 数据库连接工具包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="数据库连接工具类"><a href="#数据库连接工具类" class="headerlink" title="数据库连接工具类"></a>数据库连接工具类</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//定义数据库连接</span></span><br><span class="line">        String url = <span class="string">"jdbc:mysql://api.lemonban.com:3306/futureloan?useUnicode=true&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">        String user = <span class="string">"future"</span>;</span><br><span class="line">        String password = <span class="string">"123456"</span>;</span><br><span class="line">        <span class="comment">//定义数据库连接对象</span></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//你导入的数据库驱动包， mysql。</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection conn)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                conn.close();</span><br><span class="line">            } <span class="keyword">catch</span> (SQLException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">    QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"UPDATE member SET leave_amount=100 WHERE id=2073699;"</span>;</span><br><span class="line">    Connection conn = JDBCUtils.getConnection();</span><br><span class="line">    <span class="keyword">int</span> count = runner.update(conn, sql);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">    JDBCUtils.close(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">    QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"INSERT INTO member VALUES(NULL,'zhong','123456','15168230600,1,100,NOW());"</span>;</span><br><span class="line">    Connection conn = JDBCUtils.getConnection();</span><br><span class="line">    <span class="keyword">int</span> count = runner.update(conn, sql);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">    JDBCUtils.close(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>从上可以看出，更新和插入的区别就在<code>SQL</code>语句不同</p><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><h3 id="通过MapHandler查询"><a href="#通过MapHandler查询" class="headerlink" title="通过MapHandler查询"></a>通过MapHandler查询</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"select * from member where id=2073699"</span>;</span><br><span class="line">    Connection conn = JDBCUtils.getConnection();</span><br><span class="line">    MapHandler handler = <span class="keyword">new</span> MapHandler();</span><br><span class="line">    Map&lt;String, Object&gt; map = runner.query(conn, sql, handler);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">    JDBCUtils.close(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghmjvze2zej326w0b2taq.jpg" alt="数据查询"></p><h3 id="定义一个数据对象"><a href="#定义一个数据对象" class="headerlink" title="定义一个数据对象"></a>定义一个数据对象</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String reg_name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String mobile_phone;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> type;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal leave_amount;</span><br><span class="line">    <span class="keyword">private</span> Timestamp reg_time;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Member{"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", reg_name='"</span> + reg_name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", pwd='"</span> + pwd + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", mobile_phone='"</span> + mobile_phone + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", type="</span> + type +</span><br><span class="line">                <span class="string">", leave_amount="</span> + leave_amount +</span><br><span class="line">                <span class="string">", reg_time="</span> + reg_time +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getReg_name</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> reg_name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReg_name</span><span class="params">(String reg_name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.reg_name = reg_name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMobile_phone</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> mobile_phone;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMobile_phone</span><span class="params">(String mobile_phone)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.mobile_phone = mobile_phone;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(<span class="keyword">int</span> type)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">getLeave_amount</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> leave_amount;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLeave_amount</span><span class="params">(BigDecimal leave_amount)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.leave_amount = leave_amount;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getReg_time</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> reg_time;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReg_time</span><span class="params">(Timestamp reg_time)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.reg_time = reg_time;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="通过BeanHandler获取"><a href="#通过BeanHandler获取" class="headerlink" title="通过BeanHandler获取"></a>通过BeanHandler获取</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beanHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">        String sql = <span class="string">"select * from member where id=2073699"</span>;</span><br><span class="line">        Connection conn = JDBCUtils.getConnection();</span><br><span class="line">        BeanHandler&lt;Member&gt; handler = <span class="keyword">new</span> BeanHandler&lt;&gt;(Member.class);</span><br><span class="line">        Member m = runner.query(conn, sql, handler);</span><br><span class="line">        System.out.println(m);</span><br><span class="line">        JDBCUtils.close(conn);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghmk20hmtnj326s07yabw.jpg" alt="查询结果"></p><h3 id="通过BeanListHandler查询"><a href="#通过BeanListHandler查询" class="headerlink" title="通过BeanListHandler查询"></a>通过BeanListHandler查询</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"select * from member"</span>;</span><br><span class="line">    Connection conn = JDBCUtils.getConnection();</span><br><span class="line">    BeanListHandler&lt;Member&gt; handler = <span class="keyword">new</span> BeanListHandler&lt;&gt;(Member.class);</span><br><span class="line">    List&lt;Member&gt; list = runner.query(conn, sql, handler);</span><br><span class="line">    <span class="keyword">for</span> (Member member : list) {</span><br><span class="line">        System.out.println(member);</span><br><span class="line">    }</span><br><span class="line">    JDBCUtils.close(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="通过ScalarHandler查询"><a href="#通过ScalarHandler查询" class="headerlink" title="通过ScalarHandler查询"></a>通过ScalarHandler查询</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">scalarHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">    QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"select count(*) from member where id=2073699"</span>;</span><br><span class="line">    Connection conn = JDBCUtils.getConnection();</span><br><span class="line">    ScalarHandler&lt;Long&gt; handler = <span class="keyword">new</span> ScalarHandler&lt;&gt;();</span><br><span class="line">    Long count = runner.query(conn, sql, handler);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">    JDBCUtils.close(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="数据库断言"><a href="#数据库断言" class="headerlink" title="数据库断言"></a>数据库断言</h2><p>从excel中读取sql语句</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getSingleResult</span><span class="params">(String sql)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isBlank(sql)) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 1. 定义返回值</span></span><br><span class="line">    Object result = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 2. 创建DBUtils sql语句操作类</span></span><br><span class="line">        Connection conn = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">// 3. 获取数据库连接</span></span><br><span class="line">        QueryRunner runner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">        <span class="comment">// 4. 创建ScalarHandler，针对单行单列的数据</span></span><br><span class="line">        ScalarHandler handler = <span class="keyword">new</span> ScalarHandler();</span><br><span class="line">        <span class="comment">// 5. 执行sql语句</span></span><br><span class="line">        result = runner.query(conn, sql, handler);</span><br><span class="line">        <span class="comment">// 6. 关闭数据库连接</span></span><br><span class="line">        JDBCUtils.close(conn);</span><br><span class="line">    } <span class="keyword">catch</span> (SQLException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="对注册进行数据库断言"><a href="#对注册进行数据库断言" class="headerlink" title="对注册进行数据库断言"></a>对注册进行数据库断言</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(dataProvider = "datas")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(CaseInfo caseInfo)</span> </span>{</span><br><span class="line">    Long beforeSQLresult = (Long) SQLUtils.getSingleResult(caseInfo.getSql());</span><br><span class="line">    String responseBody = HttpUtils.call(caseInfo, UserData.DEFAULT_HEADERS);</span><br><span class="line">    responseAssert(caseInfo.getExpectedResult(), responseBody);</span><br><span class="line">    addWriteBackData(sheetIndex, caseInfo.getId(), <span class="number">8</span>, responseBody);</span><br><span class="line">    Long afterSQLresult = (Long) SQLUtils.getSingleResult(caseInfo.getSql());</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNoneBlank(caseInfo.getSql())) {</span><br><span class="line">        <span class="keyword">if</span> (beforeSQLresult == <span class="number">0</span> &amp;&amp; afterSQLresult == <span class="number">1</span>) {</span><br><span class="line">            System.out.println(<span class="string">"数据库断言成功"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            System.out.println(<span class="string">"数据库断言失败"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="对充值进行数据库断言"><a href="#对充值进行数据库断言" class="headerlink" title="对充值进行数据库断言"></a>对充值进行数据库断言</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(dataProvider = "datas")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(CaseInfo caseInfo)</span> </span>{</span><br><span class="line">    BigDecimal beforeSQLresult = (BigDecimal) SQLUtils.getSingleResult(caseInfo.getSql());</span><br><span class="line">    HashMap&lt;String, String&gt; headers = getAuthorizationHeader();</span><br><span class="line">    String responseBody = HttpUtils.call(caseInfo, headers);</span><br><span class="line">    responseAssert(caseInfo.getExpectedResult(), responseBody);</span><br><span class="line">    addWriteBackData(sheetIndex, caseInfo.getId(), <span class="number">8</span>, responseBody);</span><br><span class="line">    BigDecimal afterSQLresult = (BigDecimal) SQLUtils.getSingleResult(caseInfo.getSql());</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(caseInfo.getSql())) {</span><br><span class="line">        String amountStr = JSONPath.read(caseInfo.getParams(), <span class="string">"$.amount"</span>).toString();</span><br><span class="line">        BigDecimal amout = <span class="keyword">new</span> BigDecimal(amountStr);</span><br><span class="line">        BigDecimal subtractResult = afterSQLresult.subtract(beforeSQLresult);</span><br><span class="line">        <span class="comment">// compareTo == 0 =&gt; 相等</span></span><br><span class="line">        <span class="keyword">if</span> (subtractResult.compareTo(amout) == <span class="number">0</span>) {</span><br><span class="line">            System.out.println(<span class="string">"数据库断言成功"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            System.out.println(<span class="string">"数据库断言失败"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-数据库断言-18&quot;&gt;&lt;a href=&quot;#Java自动化测试-数据库断言-18&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(数据库断言 18)&quot;&gt;&lt;/a&gt;Java自动化测试(数据库断言 18)&lt;/h1&gt;&lt;h2 id=&quot;数据库&quot;&gt;&lt;a href=&quot;#数据库&quot; class=&quot;headerlink&quot; title=&quot;数据库&quot;&gt;&lt;/a&gt;数据库&lt;/h2&gt;&lt;p&gt;数据库，简而言之可视为电子化的文件柜——存储电子文件的处所，用户可以对文件中的数据进行新增、截取、更新、删除等操作。&lt;br&gt;所谓“数据库”是以一定方式储存在一起、能与多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。&lt;/p&gt;
&lt;h2 id=&quot;JDBC-驱动程序&quot;&gt;&lt;a href=&quot;#JDBC-驱动程序&quot; class=&quot;headerlink&quot; title=&quot;JDBC 驱动程序&quot;&gt;&lt;/a&gt;JDBC 驱动程序&lt;/h2&gt;&lt;p&gt;JDBC(java database connectivity)驱动程序是对 JDBC 规范完整的实现，它的存在在 Java 程序与数据库系统之间建立了一条通信的渠道。&lt;/p&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java自动化测试(回写与断言 17)</title>
    <link href="http://zx490336534.github.io/article/34770ee9.html"/>
    <id>http://zx490336534.github.io/article/34770ee9.html</id>
    <published>2020-08-08T23:33:27.651Z</published>
    <updated>2021-03-03T14:29:02.786Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java自动化测试-回写与断言-17"><a href="#Java自动化测试-回写与断言-17" class="headerlink" title="Java自动化测试(回写与断言 17)"></a>Java自动化测试(回写与断言 17)</h1><h2 id="回写"><a href="#回写" class="headerlink" title="回写"></a>回写</h2><p>将测试结果写回到Excel中</p><h3 id="定义回写数据对象"><a href="#定义回写数据对象" class="headerlink" title="定义回写数据对象"></a>定义回写数据对象</h3><span id="more"></span><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriteBackData</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sheetIndex;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> rowNum;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> cellNum;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WriteBackData</span><span class="params">(<span class="keyword">int</span> sheetIndex, <span class="keyword">int</span> rowNum, <span class="keyword">int</span> cellNum, String content)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.sheetIndex = sheetIndex;</span><br><span class="line">        <span class="keyword">this</span>.rowNum = rowNum;</span><br><span class="line">        <span class="keyword">this</span>.cellNum = cellNum;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WriteBackData</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"WriteBackData{"</span> +</span><br><span class="line">                <span class="string">"sheetIndex="</span> + sheetIndex +</span><br><span class="line">                <span class="string">", rowNum="</span> + rowNum +</span><br><span class="line">                <span class="string">", cellNum="</span> + cellNum +</span><br><span class="line">                <span class="string">", content='"</span> + content + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSheetIndex</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> sheetIndex;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSheetIndex</span><span class="params">(<span class="keyword">int</span> sheetIndex)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.sheetIndex = sheetIndex;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRowNum</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> rowNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRowNum</span><span class="params">(<span class="keyword">int</span> rowNum)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.rowNum = rowNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCellNum</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> cellNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCellNum</span><span class="params">(<span class="keyword">int</span> cellNum)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.cellNum = cellNum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="批量回写操作代码"><a href="#批量回写操作代码" class="headerlink" title="批量回写操作代码"></a>批量回写操作代码</h3><p>使用到类似之前Excel到写入操作代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">batchWrite</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    <span class="comment">//回写的逻辑：遍历wdbList集合，取出sheetIndex,rowNum,cellNum,content</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"src/test/resources/cases_v3.xlsx"</span>);</span><br><span class="line">    Workbook sheets = WorkbookFactory.create(fis);</span><br><span class="line">    <span class="keyword">for</span> (WriteBackData wdb : wdbList) {</span><br><span class="line">        <span class="keyword">int</span> sheetIndex = wdb.getSheetIndex();</span><br><span class="line">        <span class="keyword">int</span> rowNum = wdb.getRowNum();</span><br><span class="line">        <span class="keyword">int</span> cellNum = wdb.getCellNum();</span><br><span class="line">        String content = wdb.getContent();</span><br><span class="line"></span><br><span class="line">        Sheet sheet = sheets.getSheetAt(sheetIndex);</span><br><span class="line">        Row row = sheet.getRow(rowNum);</span><br><span class="line">        Cell cell = row.getCell(cellNum, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK);</span><br><span class="line">        cell.setCellValue(content);</span><br><span class="line">    }</span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"src/test/resources/cases_v3.xlsx"</span>);</span><br><span class="line">    sheets.write(fos);</span><br><span class="line">    fis.close();</span><br><span class="line">    fos.close();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>com.zhongxin.utils.ExcelUtils</code>中需要增加一个<code>wdbList</code>，用于存储运行测试时候每次产生的结果</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;WriteBackData&gt; wdbList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></tbody></table></figure><h3 id="case中新增写入测试结果"><a href="#case中新增写入测试结果" class="headerlink" title="case中新增写入测试结果"></a>case中新增写入测试结果</h3><p>每个case执行的最后阶段增加</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WriteBackData wdb = <span class="keyword">new</span> WriteBackData(sheetIndex, caseInfo.getId(), <span class="number">8</span>, responseBody);</span><br><span class="line">ExcelUtils.wdbList.add(wdb);</span><br></pre></td></tr></tbody></table></figure><h3 id="全部测试完成后批量写入结果"><a href="#全部测试完成后批量写入结果" class="headerlink" title="全部测试完成后批量写入结果"></a>全部测试完成后批量写入结果</h3><p>使用注解<code>AfterSuite</code>在全部测试结束后将结果写入Excel</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterSuite</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">    ExcelUtils.batchWrite();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="提取父类"><a href="#提取父类" class="headerlink" title="提取父类"></a>提取父类</h2><p>将共性代码放到父类<code>BaseCase</code>中</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhongxin.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhongxin.pojo.WriteBackData;</span><br><span class="line"><span class="keyword">import</span> com.zhongxin.utils.ExcelUtils;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.AfterSuite;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeClass;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Parameters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseCase</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> sheetIndex;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="meta">@Parameters({"sheetIndex"})</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeClass</span><span class="params">(<span class="keyword">int</span> sheetIndex)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.sheetIndex = sheetIndex;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加回写对象到回写集合中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addWriteBackData</span><span class="params">(<span class="keyword">int</span> sheetIndex, <span class="keyword">int</span> rowNum, <span class="keyword">int</span> cellNum, String content)</span> </span>{</span><br><span class="line">        WriteBackData wdb = <span class="keyword">new</span> WriteBackData(sheetIndex, rowNum, cellNum, content);</span><br><span class="line">        ExcelUtils.wdbList.add(wdb);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterSuite</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        ExcelUtils.batchWrite();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="提取responseBody参数到UserData中的封装"><a href="#提取responseBody参数到UserData中的封装" class="headerlink" title="提取responseBody参数到UserData中的封装"></a>提取responseBody参数到UserData中的封装</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从responseBody 通过Jsonpath取出对应参数，存到UserData中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getParams</span><span class="params">(String responseBody, String jsonPathExpression, String userDataKey)</span> </span>{</span><br><span class="line">    Object token = JSONPath.read(responseBody, jsonPathExpression);</span><br><span class="line">    <span class="keyword">if</span> (token != <span class="keyword">null</span>) {</span><br><span class="line">        UserData.VARS.put(userDataKey, token);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="提取返回鉴权头"><a href="#提取返回鉴权头" class="headerlink" title="提取返回鉴权头"></a>提取返回鉴权头</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> HashMap&lt;String, String&gt; <span class="title">getAuthorizationHeader</span><span class="params">()</span> </span>{</span><br><span class="line">    Object token = UserData.VARS.get(<span class="string">"${token}"</span>);</span><br><span class="line">    HashMap&lt;String, String&gt; headers = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    headers.put(<span class="string">"Authorization"</span>, <span class="string">"Bearer "</span> + token);</span><br><span class="line">    headers.putAll(UserData.DEFAULT_HEADERS);</span><br><span class="line">    <span class="keyword">return</span> headers;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接口响应断言</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> expectedResult 断言的期望值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> responseBody   接口响应内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 接口响应断言结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">responseAssert</span><span class="params">(String expectedResult, String responseBody)</span> </span>{</span><br><span class="line">    Map&lt;String, Object&gt; map = JSONObject.parseObject(expectedResult, Map.class);</span><br><span class="line">    Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">    <span class="keyword">boolean</span> reponseAssertFlag = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (String actualExpression : keySet) {</span><br><span class="line">        Object expectedValue = map.get(actualExpression);</span><br><span class="line">        Object actualValue = JSONPath.read(responseBody, actualExpression);</span><br><span class="line">        <span class="keyword">if</span> (!expectedValue.equals(actualValue)) {</span><br><span class="line">            reponseAssertFlag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    System.out.println(<span class="string">"断言结果:"</span> + reponseAssertFlag);</span><br><span class="line">    <span class="keyword">return</span> reponseAssertFlag;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Java自动化测试-回写与断言-17&quot;&gt;&lt;a href=&quot;#Java自动化测试-回写与断言-17&quot; class=&quot;headerlink&quot; title=&quot;Java自动化测试(回写与断言 17)&quot;&gt;&lt;/a&gt;Java自动化测试(回写与断言 17)&lt;/h1&gt;&lt;h2 id=&quot;回写&quot;&gt;&lt;a href=&quot;#回写&quot; class=&quot;headerlink&quot; title=&quot;回写&quot;&gt;&lt;/a&gt;回写&lt;/h2&gt;&lt;p&gt;将测试结果写回到Excel中&lt;/p&gt;
&lt;h3 id=&quot;定义回写数据对象&quot;&gt;&lt;a href=&quot;#定义回写数据对象&quot; class=&quot;headerlink&quot; title=&quot;定义回写数据对象&quot;&gt;&lt;/a&gt;定义回写数据对象&lt;/h3&gt;</summary>
    
    
    
    <category term="Java自动化测试" scheme="http://zx490336534.github.io/categories/Java%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Java" scheme="http://zx490336534.github.io/tags/Java/"/>
    
    <category term="自动化测试" scheme="http://zx490336534.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
</feed>
